(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();var vp={exports:{}},Zu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0;function bD(){if(h0)return Zu;h0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var f in s)f!=="key"&&(l[f]=s[f])}else l=s;return s=l.ref,{$$typeof:n,type:r,key:c,ref:s!==void 0?s:null,props:l}}return Zu.Fragment=e,Zu.jsx=t,Zu.jsxs=t,Zu}var f0;function SD(){return f0||(f0=1,vp.exports=bD()),vp.exports}var pe=SD(),Ep={exports:{}},Ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d0;function AD(){if(d0)return Ye;d0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function w(M){return M===null||typeof M!="object"?null:(M=E&&M[E]||M["@@iterator"],typeof M=="function"?M:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,F={};function L(M,ie,me){this.props=M,this.context=ie,this.refs=F,this.updater=me||I}L.prototype.isReactComponent={},L.prototype.setState=function(M,ie){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,ie,"setState")},L.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ne(){}ne.prototype=L.prototype;function te(M,ie,me){this.props=M,this.context=ie,this.refs=F,this.updater=me||I}var ee=te.prototype=new ne;ee.constructor=te,P(ee,L.prototype),ee.isPureReactComponent=!0;var _e=Array.isArray,le={H:null,A:null,T:null,S:null,V:null},z=Object.prototype.hasOwnProperty;function x(M,ie,me,ue,De,qe){return me=qe.ref,{$$typeof:n,type:M,key:ie,ref:me!==void 0?me:null,props:qe}}function A(M,ie){return x(M.type,ie,void 0,void 0,void 0,M.props)}function R(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function O(M){var ie={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(me){return ie[me]})}var k=/\/+/g;function U(M,ie){return typeof M=="object"&&M!==null&&M.key!=null?O(""+M.key):ie.toString(36)}function D(){}function Ge(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(D,D):(M.status="pending",M.then(function(ie){M.status==="pending"&&(M.status="fulfilled",M.value=ie)},function(ie){M.status==="pending"&&(M.status="rejected",M.reason=ie)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function nt(M,ie,me,ue,De){var qe=typeof M;(qe==="undefined"||qe==="boolean")&&(M=null);var Pe=!1;if(M===null)Pe=!0;else switch(qe){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(M.$$typeof){case n:case e:Pe=!0;break;case _:return Pe=M._init,nt(Pe(M._payload),ie,me,ue,De)}}if(Pe)return De=De(M),Pe=ue===""?"."+U(M,0):ue,_e(De)?(me="",Pe!=null&&(me=Pe.replace(k,"$&/")+"/"),nt(De,ie,me,"",function(cr){return cr})):De!=null&&(R(De)&&(De=A(De,me+(De.key==null||M&&M.key===De.key?"":(""+De.key).replace(k,"$&/")+"/")+Pe)),ie.push(De)),1;Pe=0;var qt=ue===""?".":ue+":";if(_e(M))for(var wt=0;wt<M.length;wt++)ue=M[wt],qe=qt+U(ue,wt),Pe+=nt(ue,ie,me,qe,De);else if(wt=w(M),typeof wt=="function")for(M=wt.call(M),wt=0;!(ue=M.next()).done;)ue=ue.value,qe=qt+U(ue,wt++),Pe+=nt(ue,ie,me,qe,De);else if(qe==="object"){if(typeof M.then=="function")return nt(Ge(M),ie,me,ue,De);throw ie=String(M),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function $(M,ie,me){if(M==null)return M;var ue=[],De=0;return nt(M,ue,"","",function(qe){return ie.call(me,qe,De++)}),ue}function fe(M){if(M._status===-1){var ie=M._result;ie=ie(),ie.then(function(me){(M._status===0||M._status===-1)&&(M._status=1,M._result=me)},function(me){(M._status===0||M._status===-1)&&(M._status=2,M._result=me)}),M._status===-1&&(M._status=0,M._result=ie)}if(M._status===1)return M._result.default;throw M._result}var ve=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function je(){}return Ye.Children={map:$,forEach:function(M,ie,me){$(M,function(){ie.apply(this,arguments)},me)},count:function(M){var ie=0;return $(M,function(){ie++}),ie},toArray:function(M){return $(M,function(ie){return ie})||[]},only:function(M){if(!R(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Ye.Component=L,Ye.Fragment=t,Ye.Profiler=s,Ye.PureComponent=te,Ye.StrictMode=r,Ye.Suspense=m,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,Ye.__COMPILER_RUNTIME={__proto__:null,c:function(M){return le.H.useMemoCache(M)}},Ye.cache=function(M){return function(){return M.apply(null,arguments)}},Ye.cloneElement=function(M,ie,me){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ue=P({},M.props),De=M.key,qe=void 0;if(ie!=null)for(Pe in ie.ref!==void 0&&(qe=void 0),ie.key!==void 0&&(De=""+ie.key),ie)!z.call(ie,Pe)||Pe==="key"||Pe==="__self"||Pe==="__source"||Pe==="ref"&&ie.ref===void 0||(ue[Pe]=ie[Pe]);var Pe=arguments.length-2;if(Pe===1)ue.children=me;else if(1<Pe){for(var qt=Array(Pe),wt=0;wt<Pe;wt++)qt[wt]=arguments[wt+2];ue.children=qt}return x(M.type,De,void 0,void 0,qe,ue)},Ye.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Ye.createElement=function(M,ie,me){var ue,De={},qe=null;if(ie!=null)for(ue in ie.key!==void 0&&(qe=""+ie.key),ie)z.call(ie,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(De[ue]=ie[ue]);var Pe=arguments.length-2;if(Pe===1)De.children=me;else if(1<Pe){for(var qt=Array(Pe),wt=0;wt<Pe;wt++)qt[wt]=arguments[wt+2];De.children=qt}if(M&&M.defaultProps)for(ue in Pe=M.defaultProps,Pe)De[ue]===void 0&&(De[ue]=Pe[ue]);return x(M,qe,void 0,void 0,null,De)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(M){return{$$typeof:f,render:M}},Ye.isValidElement=R,Ye.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:fe}},Ye.memo=function(M,ie){return{$$typeof:g,type:M,compare:ie===void 0?null:ie}},Ye.startTransition=function(M){var ie=le.T,me={};le.T=me;try{var ue=M(),De=le.S;De!==null&&De(me,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(je,ve)}catch(qe){ve(qe)}finally{le.T=ie}},Ye.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},Ye.use=function(M){return le.H.use(M)},Ye.useActionState=function(M,ie,me){return le.H.useActionState(M,ie,me)},Ye.useCallback=function(M,ie){return le.H.useCallback(M,ie)},Ye.useContext=function(M){return le.H.useContext(M)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(M,ie){return le.H.useDeferredValue(M,ie)},Ye.useEffect=function(M,ie,me){var ue=le.H;if(typeof me=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(M,ie)},Ye.useId=function(){return le.H.useId()},Ye.useImperativeHandle=function(M,ie,me){return le.H.useImperativeHandle(M,ie,me)},Ye.useInsertionEffect=function(M,ie){return le.H.useInsertionEffect(M,ie)},Ye.useLayoutEffect=function(M,ie){return le.H.useLayoutEffect(M,ie)},Ye.useMemo=function(M,ie){return le.H.useMemo(M,ie)},Ye.useOptimistic=function(M,ie){return le.H.useOptimistic(M,ie)},Ye.useReducer=function(M,ie,me){return le.H.useReducer(M,ie,me)},Ye.useRef=function(M){return le.H.useRef(M)},Ye.useState=function(M){return le.H.useState(M)},Ye.useSyncExternalStore=function(M,ie,me){return le.H.useSyncExternalStore(M,ie,me)},Ye.useTransition=function(){return le.H.useTransition()},Ye.version="19.1.1",Ye}var m0;function Ly(){return m0||(m0=1,Ep.exports=AD()),Ep.exports}var Q=Ly(),Tp={exports:{}},Ju={},wp={exports:{}},bp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0;function ID(){return g0||(g0=1,(function(n){function e($,fe){var ve=$.length;$.push(fe);e:for(;0<ve;){var je=ve-1>>>1,M=$[je];if(0<s(M,fe))$[je]=fe,$[ve]=M,ve=je;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var fe=$[0],ve=$.pop();if(ve!==fe){$[0]=ve;e:for(var je=0,M=$.length,ie=M>>>1;je<ie;){var me=2*(je+1)-1,ue=$[me],De=me+1,qe=$[De];if(0>s(ue,ve))De<M&&0>s(qe,ue)?($[je]=qe,$[De]=ve,je=De):($[je]=ue,$[me]=ve,je=me);else if(De<M&&0>s(qe,ve))$[je]=qe,$[De]=ve,je=De;else break e}}return fe}function s($,fe){var ve=$.sortIndex-fe.sortIndex;return ve!==0?ve:$.id-fe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],g=[],_=1,E=null,w=3,I=!1,P=!1,F=!1,L=!1,ne=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function _e($){for(var fe=t(g);fe!==null;){if(fe.callback===null)r(g);else if(fe.startTime<=$)r(g),fe.sortIndex=fe.expirationTime,e(m,fe);else break;fe=t(g)}}function le($){if(F=!1,_e($),!P)if(t(m)!==null)P=!0,z||(z=!0,U());else{var fe=t(g);fe!==null&&nt(le,fe.startTime-$)}}var z=!1,x=-1,A=5,R=-1;function O(){return L?!0:!(n.unstable_now()-R<A)}function k(){if(L=!1,z){var $=n.unstable_now();R=$;var fe=!0;try{e:{P=!1,F&&(F=!1,te(x),x=-1),I=!0;var ve=w;try{t:{for(_e($),E=t(m);E!==null&&!(E.expirationTime>$&&O());){var je=E.callback;if(typeof je=="function"){E.callback=null,w=E.priorityLevel;var M=je(E.expirationTime<=$);if($=n.unstable_now(),typeof M=="function"){E.callback=M,_e($),fe=!0;break t}E===t(m)&&r(m),_e($)}else r(m);E=t(m)}if(E!==null)fe=!0;else{var ie=t(g);ie!==null&&nt(le,ie.startTime-$),fe=!1}}break e}finally{E=null,w=ve,I=!1}fe=void 0}}finally{fe?U():z=!1}}}var U;if(typeof ee=="function")U=function(){ee(k)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Ge=D.port2;D.port1.onmessage=k,U=function(){Ge.postMessage(null)}}else U=function(){ne(k,0)};function nt($,fe){x=ne(function(){$(n.unstable_now())},fe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function($){switch(w){case 1:case 2:case 3:var fe=3;break;default:fe=w}var ve=w;w=fe;try{return $()}finally{w=ve}},n.unstable_requestPaint=function(){L=!0},n.unstable_runWithPriority=function($,fe){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ve=w;w=$;try{return fe()}finally{w=ve}},n.unstable_scheduleCallback=function($,fe,ve){var je=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?je+ve:je):ve=je,$){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=ve+M,$={id:_++,callback:fe,priorityLevel:$,startTime:ve,expirationTime:M,sortIndex:-1},ve>je?($.sortIndex=ve,e(g,$),t(m)===null&&$===t(g)&&(F?(te(x),x=-1):F=!0,nt(le,ve-je))):($.sortIndex=M,e(m,$),P||I||(P=!0,z||(z=!0,U()))),$},n.unstable_shouldYield=O,n.unstable_wrapCallback=function($){var fe=w;return function(){var ve=w;w=fe;try{return $.apply(this,arguments)}finally{w=ve}}}})(bp)),bp}var p0;function RD(){return p0||(p0=1,wp.exports=ID()),wp.exports}var Sp={exports:{}},Dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0;function DD(){if(y0)return Dn;y0=1;var n=Ly();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(m,g,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:m,containerInfo:g,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Dn.createPortal=function(m,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,_)},Dn.flushSync=function(m){var g=c.T,_=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=g,r.p=_,r.d.f()}},Dn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},Dn.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},Dn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var _=g.as,E=f(_,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,I=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:w,fetchPriority:I}):_==="script"&&r.d.X(m,{crossOrigin:E,integrity:w,fetchPriority:I,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Dn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=f(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},Dn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,E=f(_,g.crossOrigin);r.d.L(m,_,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Dn.preloadModule=function(m,g){if(typeof m=="string")if(g){var _=f(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},Dn.requestFormReset=function(m){r.d.r(m)},Dn.unstable_batchedUpdates=function(m,g){return m(g)},Dn.useFormState=function(m,g,_){return c.H.useFormState(m,g,_)},Dn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Dn.version="19.1.1",Dn}var _0;function aS(){if(_0)return Sp.exports;_0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sp.exports=DD(),Sp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v0;function CD(){if(v0)return Ju;v0=1;var n=RD(),e=Ly(),t=aS();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var a=i,o=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(o=a.return),i=a.return;while(i)}return a.tag===3?o:null}function c(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function f(i){if(l(i)!==i)throw Error(r(188))}function m(i){var a=i.alternate;if(!a){if(a=l(i),a===null)throw Error(r(188));return a!==i?null:i}for(var o=i,u=a;;){var d=o.return;if(d===null)break;var p=d.alternate;if(p===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===o)return f(d),i;if(p===u)return f(d),a;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=d,u=p;else{for(var T=!1,b=d.child;b;){if(b===o){T=!0,o=d,u=p;break}if(b===u){T=!0,u=d,o=p;break}b=b.sibling}if(!T){for(b=p.child;b;){if(b===o){T=!0,o=p,u=d;break}if(b===u){T=!0,u=p,o=d;break}b=b.sibling}if(!T)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?i:a}function g(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=g(i),a!==null)return a;i=i.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),ne=Symbol.for("react.provider"),te=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function U(i){return i===null||typeof i!="object"?null:(i=k&&i[k]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function Ge(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case L:return"Profiler";case F:return"StrictMode";case le:return"Suspense";case z:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case I:return"Portal";case ee:return(i.displayName||"Context")+".Provider";case te:return(i._context.displayName||"Context")+".Consumer";case _e:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case x:return a=i.displayName||null,a!==null?a:Ge(i.type)||"Memo";case A:a=i._payload,i=i._init;try{return Ge(i(a))}catch{}}return null}var nt=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},je=[],M=-1;function ie(i){return{current:i}}function me(i){0>M||(i.current=je[M],je[M]=null,M--)}function ue(i,a){M++,je[M]=i.current,i.current=a}var De=ie(null),qe=ie(null),Pe=ie(null),qt=ie(null);function wt(i,a){switch(ue(Pe,a),ue(qe,i),ue(De,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?zT(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=zT(a),i=BT(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}me(De),ue(De,i)}function cr(){me(De),me(qe),me(Pe)}function xt(i){i.memoizedState!==null&&ue(qt,i);var a=De.current,o=BT(a,i.type);a!==o&&(ue(qe,i),ue(De,o))}function An(i){qe.current===i&&(me(De),me(qe)),qt.current===i&&(me(qt),Ku._currentValue=ve)}var Yr=Object.prototype.hasOwnProperty,Ti=n.unstable_scheduleCallback,Mn=n.unstable_cancelCallback,ys=n.unstable_shouldYield,bo=n.unstable_requestPaint,Pn=n.unstable_now,eu=n.unstable_getCurrentPriorityLevel,_s=n.unstable_ImmediatePriority,ia=n.unstable_UserBlockingPriority,wi=n.unstable_NormalPriority,Pr=n.unstable_LowPriority,hr=n.unstable_IdlePriority,aa=n.log,sa=n.unstable_setDisableYieldValue,ct=null,Ke=null;function In(i){if(typeof aa=="function"&&sa(i),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(ct,i)}catch{}}var Ht=Math.clz32?Math.clz32:Kr,So=Math.log,fr=Math.LN2;function Kr(i){return i>>>=0,i===0?32:31-(So(i)/fr|0)|0}var Qr=256,$r=4194304;function Qn(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function bi(i,a,o){var u=i.pendingLanes;if(u===0)return 0;var d=0,p=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var b=u&134217727;return b!==0?(u=b&~p,u!==0?d=Qn(u):(T&=b,T!==0?d=Qn(T):o||(o=b&~i,o!==0&&(d=Qn(o))))):(b=u&~p,b!==0?d=Qn(b):T!==0?d=Qn(T):o||(o=u&~i,o!==0&&(d=Qn(o)))),d===0?0:a!==0&&a!==d&&(a&p)===0&&(p=d&-d,o=a&-a,p>=o||p===32&&(o&4194048)!==0)?a:d}function dr(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function oa(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Si(){var i=Qr;return Qr<<=1,(Qr&4194048)===0&&(Qr=256),i}function vs(){var i=$r;return $r<<=1,($r&62914560)===0&&($r=4194304),i}function mr(i){for(var a=[],o=0;31>o;o++)a.push(i);return a}function Or(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function la(i,a,o,u,d,p){var T=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var b=i.entanglements,C=i.expirationTimes,Y=i.hiddenUpdates;for(o=T&~o;0<o;){var re=31-Ht(o),se=1<<re;b[re]=0,C[re]=-1;var X=Y[re];if(X!==null)for(Y[re]=null,re=0;re<X.length;re++){var W=X[re];W!==null&&(W.lane&=-536870913)}o&=~se}u!==0&&On(i,u,0),p!==0&&d===0&&i.tag!==0&&(i.suspendedLanes|=p&~(T&~a))}function On(i,a,o){i.pendingLanes|=a,i.suspendedLanes&=~a;var u=31-Ht(a);i.entangledLanes|=a,i.entanglements[u]=i.entanglements[u]|1073741824|o&4194090}function Xr(i,a){var o=i.entangledLanes|=a;for(i=i.entanglements;o;){var u=31-Ht(o),d=1<<u;d&a|i[u]&a&&(i[u]|=a),o&=~d}}function Wr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ua(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function N(){var i=fe.p;return i!==0?i:(i=window.event,i===void 0?32:a0(i.type))}function j(i,a){var o=fe.p;try{return fe.p=i,a()}finally{fe.p=o}}var K=Math.random().toString(36).slice(2),oe="__reactFiber$"+K,ce="__reactProps$"+K,Ee="__reactContainer$"+K,Ce="__reactEvents$"+K,Se="__reactListeners$"+K,Ae="__reactHandles$"+K,Me="__reactResources$"+K,Ie="__reactMarker$"+K;function we(i){delete i[oe],delete i[ce],delete i[Ce],delete i[Se],delete i[Ae]}function He(i){var a=i[oe];if(a)return a;for(var o=i.parentNode;o;){if(a=o[Ee]||o[oe]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(i=HT(i);i!==null;){if(o=i[oe])return o;i=HT(i)}return a}i=o,o=i.parentNode}return null}function rt(i){if(i=i[oe]||i[Ee]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function gt(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function ht(i){var a=i[Me];return a||(a=i[Me]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Be(i){i[Ie]=!0}var ft=new Set,jn={};function pn(i,a){sn(i,a),sn(i+"Capture",a)}function sn(i,a){for(jn[i]=a,i=0;i<a.length;i++)ft.add(a[i])}var Vn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ca={},$n={};function gr(i){return Yr.call($n,i)?!0:Yr.call(ca,i)?!1:Vn.test(i)?$n[i]=!0:(ca[i]=!0,!1)}function Xn(i,a,o){if(gr(a))if(o===null)i.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+o)}}function kn(i,a,o){if(o===null)i.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+o)}}function Ve(i,a,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(a,o,""+u)}}var Nt,Vr;function yn(i){if(Nt===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);Nt=a&&a[1]||"",Vr=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Nt+i+Vr}var Dt=!1;function kr(i,a){if(!i||Dt)return"";Dt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(W){var X=W}Reflect.construct(i,[],se)}else{try{se.call()}catch(W){X=W}i.call(se.prototype)}}else{try{throw Error()}catch(W){X=W}(se=i())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(W){if(W&&X&&typeof W.stack=="string")return[W.stack,X.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),T=p[0],b=p[1];if(T&&b){var C=T.split(`
`),Y=b.split(`
`);for(d=u=0;u<C.length&&!C[u].includes("DetermineComponentFrameRoot");)u++;for(;d<Y.length&&!Y[d].includes("DetermineComponentFrameRoot");)d++;if(u===C.length||d===Y.length)for(u=C.length-1,d=Y.length-1;1<=u&&0<=d&&C[u]!==Y[d];)d--;for(;1<=u&&0<=d;u--,d--)if(C[u]!==Y[d]){if(u!==1||d!==1)do if(u--,d--,0>d||C[u]!==Y[d]){var re=`
`+C[u].replace(" at new "," at ");return i.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",i.displayName)),re}while(1<=u&&0<=d);break}}}finally{Dt=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?yn(o):""}function ha(i){switch(i.tag){case 26:case 27:case 5:return yn(i.type);case 16:return yn("Lazy");case 13:return yn("Suspense");case 19:return yn("SuspenseList");case 0:case 15:return kr(i.type,!1);case 11:return kr(i.type.render,!1);case 1:return kr(i.type,!0);case 31:return yn("Activity");default:return""}}function fa(i){try{var a="";do a+=ha(i),i=i.return;while(i);return a}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Ln(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function tu(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function bm(i){var a=tu(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),u=""+i[a];if(!i.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,p=o.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return d.call(this)},set:function(T){u=""+T,p.call(this,T)}}),Object.defineProperty(i,a,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(T){u=""+T},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Ao(i){i._valueTracker||(i._valueTracker=bm(i))}function nu(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var o=a.getValue(),u="";return i&&(u=tu(i)?i.checked?"true":"false":i.value),i=u,i!==o?(a.setValue(i),!0):!1}function Es(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Sm=/[\n"\\]/g;function Gt(i){return i.replace(Sm,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Wn(i,a,o,u,d,p,T,b){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),a!=null?T==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+Ln(a)):i.value!==""+Ln(a)&&(i.value=""+Ln(a)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),a!=null?da(i,T,Ln(a)):o!=null?da(i,T,Ln(o)):u!=null&&i.removeAttribute("value"),d==null&&p!=null&&(i.defaultChecked=!!p),d!=null&&(i.checked=d&&typeof d!="function"&&typeof d!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.name=""+Ln(b):i.removeAttribute("name")}function Ts(i,a,o,u,d,p,T,b){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(i.type=p),a!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||a!=null))return;o=o!=null?""+Ln(o):"",a=a!=null?""+Ln(a):o,b||a===i.value||(i.value=a),i.defaultValue=a}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=b?i.checked:!!u,i.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T)}function da(i,a,o){a==="number"&&Es(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function Ai(i,a,o,u){if(i=i.options,a){a={};for(var d=0;d<o.length;d++)a["$"+o[d]]=!0;for(o=0;o<i.length;o++)d=a.hasOwnProperty("$"+i[o].value),i[o].selected!==d&&(i[o].selected=d),d&&u&&(i[o].defaultSelected=!0)}else{for(o=""+Ln(o),a=null,d=0;d<i.length;d++){if(i[d].value===o){i[d].selected=!0,u&&(i[d].defaultSelected=!0);return}a!==null||i[d].disabled||(a=i[d])}a!==null&&(a.selected=!0)}}function bt(i,a,o){if(a!=null&&(a=""+Ln(a),a!==i.value&&(i.value=a),o==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=o!=null?""+Ln(o):""}function ws(i,a,o,u){if(a==null){if(u!=null){if(o!=null)throw Error(r(92));if(nt(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),a=o}o=Ln(a),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u)}function pr(i,a){if(a){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=a;return}}i.textContent=a}var bs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vh(i,a,o){var u=a.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":u?i.setProperty(a,o):typeof o!="number"||o===0||bs.has(a)?a==="float"?i.cssFloat=o:i[a]=(""+o).trim():i[a]=o+"px"}function ru(i,a,o){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var d in a)u=a[d],a.hasOwnProperty(d)&&o[d]!==u&&vh(i,d,u)}else for(var p in a)a.hasOwnProperty(p)&&vh(i,p,a[p])}function iu(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Am=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Im=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Io(i){return Im.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Ii=null;function yr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ri=null,Di=null;function au(i){var a=rt(i);if(a&&(i=a.stateNode)){var o=i[ce]||null;e:switch(i=a.stateNode,a.type){case"input":if(Wn(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),a=o.name,o.type==="radio"&&a!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Gt(""+a)+'"][type="radio"]'),a=0;a<o.length;a++){var u=o[a];if(u!==i&&u.form===i.form){var d=u[ce]||null;if(!d)throw Error(r(90));Wn(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(a=0;a<o.length;a++)u=o[a],u.form===i.form&&nu(u)}break e;case"textarea":bt(i,o.value,o.defaultValue);break e;case"select":a=o.value,a!=null&&Ai(i,!!o.multiple,a,!1)}}}var Zr=!1;function Eh(i,a,o){if(Zr)return i(a,o);Zr=!0;try{var u=i(a);return u}finally{if(Zr=!1,(Ri!==null||Di!==null)&&(mf(),Ri&&(a=Ri,i=Di,Di=Ri=null,au(a),i)))for(a=0;a<i.length;a++)au(i[a])}}function Ss(i,a){var o=i.stateNode;if(o===null)return null;var u=o[ce]||null;if(u===null)return null;o=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(r(231,a,typeof o));return o}var Lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_r=!1;if(Lr)try{var As={};Object.defineProperty(As,"passive",{get:function(){_r=!0}}),window.addEventListener("test",As,As),window.removeEventListener("test",As,As)}catch{_r=!1}var Jr=null,ma=null,Ci=null;function su(){if(Ci)return Ci;var i,a=ma,o=a.length,u,d="value"in Jr?Jr.value:Jr.textContent,p=d.length;for(i=0;i<o&&a[i]===d[i];i++);var T=o-i;for(u=1;u<=T&&a[o-u]===d[p-u];u++);return Ci=d.slice(i,1<u?1-u:void 0)}function ei(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function ti(){return!0}function ou(){return!1}function on(i){function a(o,u,d,p,T){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var b in i)i.hasOwnProperty(b)&&(o=i[b],this[b]=o?o(p):p[b]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ti:ou,this.isPropagationStopped=ou,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),a}var mt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ro=on(mt),Is=_({},mt,{view:0,detail:0}),Th=on(Is),Do,Co,ni,Rs=_({},Is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ni&&(ni&&i.type==="mousemove"?(Do=i.screenX-ni.screenX,Co=i.screenY-ni.screenY):Co=Do=0,ni=i),Do)},movementY:function(i){return"movementY"in i?i.movementY:Co}}),vr=on(Rs),wh=_({},Rs,{dataTransfer:0}),Rm=on(wh),Ds=_({},Is,{relatedTarget:0}),xo=on(Ds),lu=_({},mt,{animationName:0,elapsedTime:0,pseudoElement:0}),No=on(lu),bh=_({},mt,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Mo=on(bh),Dm=_({},mt,{data:0}),uu=on(Dm),Cs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ah={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cu(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Ah[i])?!!a[i]:!1}function xs(){return cu}var Ih=_({},Is,{key:function(i){if(i.key){var a=Cs[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=ei(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Sh[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xs,charCode:function(i){return i.type==="keypress"?ei(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ei(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Po=on(Ih),Rh=_({},Rs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hu=on(Rh),xi=_({},Is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xs}),Dh=on(xi),Ch=_({},mt,{propertyName:0,elapsedTime:0,pseudoElement:0}),xh=on(Ch),Nh=_({},Rs,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Oo=on(Nh),Un=_({},mt,{newState:0,oldState:0}),Mh=on(Un),Ph=[9,13,27,32],ri=Lr&&"CompositionEvent"in window,h=null;Lr&&"documentMode"in document&&(h=document.documentMode);var y=Lr&&"TextEvent"in window&&!h,v=Lr&&(!ri||h&&8<h&&11>=h),S=" ",q=!1;function Z(i,a){switch(i){case"keyup":return Ph.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ge(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var it=!1;function Zt(i,a){switch(i){case"compositionend":return ge(a);case"keypress":return a.which!==32?null:(q=!0,S);case"textInput":return i=a.data,i===S&&q?null:i;default:return null}}function at(i,a){if(it)return i==="compositionend"||!ri&&Z(i,a)?(i=su(),Ci=ma=Jr=null,it=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return v&&a.locale!=="ko"?null:a.data;default:return null}}var ln={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jt(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!ln[i.type]:a==="textarea"}function Ni(i,a,o,u){Ri?Di?Di.push(u):Di=[u]:Ri=u,a=Ef(a,"onChange"),0<a.length&&(o=new Ro("onChange","change",null,o,u),i.push({event:o,listeners:a}))}var _n=null,ii=null;function fu(i){OT(i,0)}function Oh(i){var a=gt(i);if(nu(a))return i}function tv(i,a){if(i==="change")return a}var nv=!1;if(Lr){var Cm;if(Lr){var xm="oninput"in document;if(!xm){var rv=document.createElement("div");rv.setAttribute("oninput","return;"),xm=typeof rv.oninput=="function"}Cm=xm}else Cm=!1;nv=Cm&&(!document.documentMode||9<document.documentMode)}function iv(){_n&&(_n.detachEvent("onpropertychange",av),ii=_n=null)}function av(i){if(i.propertyName==="value"&&Oh(ii)){var a=[];Ni(a,ii,i,yr(i)),Eh(fu,a)}}function JR(i,a,o){i==="focusin"?(iv(),_n=a,ii=o,_n.attachEvent("onpropertychange",av)):i==="focusout"&&iv()}function e1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Oh(ii)}function t1(i,a){if(i==="click")return Oh(a)}function n1(i,a){if(i==="input"||i==="change")return Oh(a)}function r1(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Zn=typeof Object.is=="function"?Object.is:r1;function du(i,a){if(Zn(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var o=Object.keys(i),u=Object.keys(a);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!Yr.call(a,d)||!Zn(i[d],a[d]))return!1}return!0}function sv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ov(i,a){var o=sv(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=a&&u>=a)return{node:o,offset:a-i};i=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=sv(o)}}function lv(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?lv(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function uv(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Es(i.document);a instanceof i.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)i=a.contentWindow;else break;a=Es(i.document)}return a}function Nm(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var i1=Lr&&"documentMode"in document&&11>=document.documentMode,Vo=null,Mm=null,mu=null,Pm=!1;function cv(i,a,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Pm||Vo==null||Vo!==Es(u)||(u=Vo,"selectionStart"in u&&Nm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),mu&&du(mu,u)||(mu=u,u=Ef(Mm,"onSelect"),0<u.length&&(a=new Ro("onSelect","select",null,a,o),i.push({event:a,listeners:u}),a.target=Vo)))}function Ns(i,a){var o={};return o[i.toLowerCase()]=a.toLowerCase(),o["Webkit"+i]="webkit"+a,o["Moz"+i]="moz"+a,o}var ko={animationend:Ns("Animation","AnimationEnd"),animationiteration:Ns("Animation","AnimationIteration"),animationstart:Ns("Animation","AnimationStart"),transitionrun:Ns("Transition","TransitionRun"),transitionstart:Ns("Transition","TransitionStart"),transitioncancel:Ns("Transition","TransitionCancel"),transitionend:Ns("Transition","TransitionEnd")},Om={},hv={};Lr&&(hv=document.createElement("div").style,"AnimationEvent"in window||(delete ko.animationend.animation,delete ko.animationiteration.animation,delete ko.animationstart.animation),"TransitionEvent"in window||delete ko.transitionend.transition);function Ms(i){if(Om[i])return Om[i];if(!ko[i])return i;var a=ko[i],o;for(o in a)if(a.hasOwnProperty(o)&&o in hv)return Om[i]=a[o];return i}var fv=Ms("animationend"),dv=Ms("animationiteration"),mv=Ms("animationstart"),a1=Ms("transitionrun"),s1=Ms("transitionstart"),o1=Ms("transitioncancel"),gv=Ms("transitionend"),pv=new Map,Vm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vm.push("scrollEnd");function Ur(i,a){pv.set(i,a),pn(a,[i])}var yv=new WeakMap;function Er(i,a){if(typeof i=="object"&&i!==null){var o=yv.get(i);return o!==void 0?o:(a={value:i,source:a,stack:fa(a)},yv.set(i,a),a)}return{value:i,source:a,stack:fa(a)}}var Tr=[],Lo=0,km=0;function Vh(){for(var i=Lo,a=km=Lo=0;a<i;){var o=Tr[a];Tr[a++]=null;var u=Tr[a];Tr[a++]=null;var d=Tr[a];Tr[a++]=null;var p=Tr[a];if(Tr[a++]=null,u!==null&&d!==null){var T=u.pending;T===null?d.next=d:(d.next=T.next,T.next=d),u.pending=d}p!==0&&_v(o,d,p)}}function kh(i,a,o,u){Tr[Lo++]=i,Tr[Lo++]=a,Tr[Lo++]=o,Tr[Lo++]=u,km|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Lm(i,a,o,u){return kh(i,a,o,u),Lh(i)}function Uo(i,a){return kh(i,null,null,a),Lh(i)}function _v(i,a,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var d=!1,p=i.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(i=p.stateNode,i===null||i._visibility&1||(d=!0)),i=p,p=p.return;return i.tag===3?(p=i.stateNode,d&&a!==null&&(d=31-Ht(o),i=p.hiddenUpdates,u=i[d],u===null?i[d]=[a]:u.push(a),a.lane=o|536870912),p):null}function Lh(i){if(50<zu)throw zu=0,qg=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var zo={};function l1(i,a,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(i,a,o,u){return new l1(i,a,o,u)}function Um(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Mi(i,a){var o=i.alternate;return o===null?(o=Jn(i.tag,a,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=a,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,a=i.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function vv(i,a){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,a=o.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Uh(i,a,o,u,d,p){var T=0;if(u=i,typeof i=="function")Um(i)&&(T=1);else if(typeof i=="string")T=cD(i,o,De.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case R:return i=Jn(31,o,a,d),i.elementType=R,i.lanes=p,i;case P:return Ps(o.children,d,p,a);case F:T=8,d|=24;break;case L:return i=Jn(12,o,a,d|2),i.elementType=L,i.lanes=p,i;case le:return i=Jn(13,o,a,d),i.elementType=le,i.lanes=p,i;case z:return i=Jn(19,o,a,d),i.elementType=z,i.lanes=p,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case ne:case ee:T=10;break e;case te:T=9;break e;case _e:T=11;break e;case x:T=14;break e;case A:T=16,u=null;break e}T=29,o=Error(r(130,i===null?"null":typeof i,"")),u=null}return a=Jn(T,o,a,d),a.elementType=i,a.type=u,a.lanes=p,a}function Ps(i,a,o,u){return i=Jn(7,i,u,a),i.lanes=o,i}function zm(i,a,o){return i=Jn(6,i,null,a),i.lanes=o,i}function Bm(i,a,o){return a=Jn(4,i.children!==null?i.children:[],i.key,a),a.lanes=o,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var Bo=[],Fo=0,zh=null,Bh=0,wr=[],br=0,Os=null,Pi=1,Oi="";function Vs(i,a){Bo[Fo++]=Bh,Bo[Fo++]=zh,zh=i,Bh=a}function Ev(i,a,o){wr[br++]=Pi,wr[br++]=Oi,wr[br++]=Os,Os=i;var u=Pi;i=Oi;var d=32-Ht(u)-1;u&=~(1<<d),o+=1;var p=32-Ht(a)+d;if(30<p){var T=d-d%5;p=(u&(1<<T)-1).toString(32),u>>=T,d-=T,Pi=1<<32-Ht(a)+d|o<<d|u,Oi=p+i}else Pi=1<<p|o<<d|u,Oi=i}function Fm(i){i.return!==null&&(Vs(i,1),Ev(i,1,0))}function jm(i){for(;i===zh;)zh=Bo[--Fo],Bo[Fo]=null,Bh=Bo[--Fo],Bo[Fo]=null;for(;i===Os;)Os=wr[--br],wr[br]=null,Oi=wr[--br],wr[br]=null,Pi=wr[--br],wr[br]=null}var zn=null,Ut=null,dt=!1,ks=null,ai=!1,qm=Error(r(519));function Ls(i){var a=Error(r(418,""));throw yu(Er(a,i)),qm}function Tv(i){var a=i.stateNode,o=i.type,u=i.memoizedProps;switch(a[oe]=i,a[ce]=u,o){case"dialog":Ze("cancel",a),Ze("close",a);break;case"iframe":case"object":case"embed":Ze("load",a);break;case"video":case"audio":for(o=0;o<Fu.length;o++)Ze(Fu[o],a);break;case"source":Ze("error",a);break;case"img":case"image":case"link":Ze("error",a),Ze("load",a);break;case"details":Ze("toggle",a);break;case"input":Ze("invalid",a),Ts(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Ao(a);break;case"select":Ze("invalid",a);break;case"textarea":Ze("invalid",a),ws(a,u.value,u.defaultValue,u.children),Ao(a)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||a.textContent===""+o||u.suppressHydrationWarning===!0||UT(a.textContent,o)?(u.popover!=null&&(Ze("beforetoggle",a),Ze("toggle",a)),u.onScroll!=null&&Ze("scroll",a),u.onScrollEnd!=null&&Ze("scrollend",a),u.onClick!=null&&(a.onclick=Tf),a=!0):a=!1,a||Ls(i)}function wv(i){for(zn=i.return;zn;)switch(zn.tag){case 5:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:zn=zn.return}}function gu(i){if(i!==zn)return!1;if(!dt)return wv(i),dt=!0,!1;var a=i.tag,o;if((o=a!==3&&a!==27)&&((o=a===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||ap(i.type,i.memoizedProps)),o=!o),o&&Ut&&Ls(i),wv(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(o=i.data,o==="/$"){if(a===0){Ut=Br(i.nextSibling);break e}a--}else o!=="$"&&o!=="$!"&&o!=="$?"||a++;i=i.nextSibling}Ut=null}}else a===27?(a=Ut,xa(i.type)?(i=up,up=null,Ut=i):Ut=a):Ut=zn?Br(i.stateNode.nextSibling):null;return!0}function pu(){Ut=zn=null,dt=!1}function bv(){var i=ks;return i!==null&&(Gn===null?Gn=i:Gn.push.apply(Gn,i),ks=null),i}function yu(i){ks===null?ks=[i]:ks.push(i)}var Hm=ie(null),Us=null,Vi=null;function ga(i,a,o){ue(Hm,a._currentValue),a._currentValue=o}function ki(i){i._currentValue=Hm.current,me(Hm)}function Gm(i,a,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),i===o)break;i=i.return}}function Ym(i,a,o,u){var d=i.child;for(d!==null&&(d.return=i);d!==null;){var p=d.dependencies;if(p!==null){var T=d.child;p=p.firstContext;e:for(;p!==null;){var b=p;p=d;for(var C=0;C<a.length;C++)if(b.context===a[C]){p.lanes|=o,b=p.alternate,b!==null&&(b.lanes|=o),Gm(p.return,o,i),u||(T=null);break e}p=b.next}}else if(d.tag===18){if(T=d.return,T===null)throw Error(r(341));T.lanes|=o,p=T.alternate,p!==null&&(p.lanes|=o),Gm(T,o,i),T=null}else T=d.child;if(T!==null)T.return=d;else for(T=d;T!==null;){if(T===i){T=null;break}if(d=T.sibling,d!==null){d.return=T.return,T=d;break}T=T.return}d=T}}function _u(i,a,o,u){i=null;for(var d=a,p=!1;d!==null;){if(!p){if((d.flags&524288)!==0)p=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var T=d.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var b=d.type;Zn(d.pendingProps.value,T.value)||(i!==null?i.push(b):i=[b])}}else if(d===qt.current){if(T=d.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(i!==null?i.push(Ku):i=[Ku])}d=d.return}i!==null&&Ym(a,i,o,u),a.flags|=262144}function Fh(i){for(i=i.firstContext;i!==null;){if(!Zn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function zs(i){Us=i,Vi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Rn(i){return Sv(Us,i)}function jh(i,a){return Us===null&&zs(i),Sv(i,a)}function Sv(i,a){var o=a._currentValue;if(a={context:a,memoizedValue:o,next:null},Vi===null){if(i===null)throw Error(r(308));Vi=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Vi=Vi.next=a;return o}var u1=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){a.aborted=!0,i.forEach(function(o){return o()})}},c1=n.unstable_scheduleCallback,h1=n.unstable_NormalPriority,en={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Km(){return{controller:new u1,data:new Map,refCount:0}}function vu(i){i.refCount--,i.refCount===0&&c1(h1,function(){i.controller.abort()})}var Eu=null,Qm=0,jo=0,qo=null;function f1(i,a){if(Eu===null){var o=Eu=[];Qm=0,jo=Xg(),qo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Qm++,a.then(Av,Av),a}function Av(){if(--Qm===0&&Eu!==null){qo!==null&&(qo.status="fulfilled");var i=Eu;Eu=null,jo=0,qo=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function d1(i,a){var o=[],u={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return i.then(function(){u.status="fulfilled",u.value=a;for(var d=0;d<o.length;d++)(0,o[d])(a)},function(d){for(u.status="rejected",u.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),u}var Iv=$.S;$.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&f1(i,a),Iv!==null&&Iv(i,a)};var Bs=ie(null);function $m(){var i=Bs.current;return i!==null?i:Ct.pooledCache}function qh(i,a){a===null?ue(Bs,Bs.current):ue(Bs,a.pool)}function Rv(){var i=$m();return i===null?null:{parent:en._currentValue,pool:i}}var Tu=Error(r(460)),Dv=Error(r(474)),Hh=Error(r(542)),Xm={then:function(){}};function Cv(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Gh(){}function xv(i,a,o){switch(o=i[o],o===void 0?i.push(a):o!==a&&(a.then(Gh,Gh),a=o),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Mv(i),i;default:if(typeof a.status=="string")a.then(Gh,Gh);else{if(i=Ct,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(u){if(a.status==="pending"){var d=a;d.status="fulfilled",d.value=u}},function(u){if(a.status==="pending"){var d=a;d.status="rejected",d.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Mv(i),i}throw wu=a,Tu}}var wu=null;function Nv(){if(wu===null)throw Error(r(459));var i=wu;return wu=null,i}function Mv(i){if(i===Tu||i===Hh)throw Error(r(483))}var pa=!1;function Wm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zm(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ya(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function _a(i,a,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(pt&2)!==0){var d=u.pending;return d===null?a.next=a:(a.next=d.next,d.next=a),u.pending=a,a=Lh(i),_v(i,null,o),a}return kh(i,u,a,o),Lh(i)}function bu(i,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194048)!==0)){var u=a.lanes;u&=i.pendingLanes,o|=u,a.lanes=o,Xr(i,o)}}function Jm(i,a){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?d=p=T:p=p.next=T,o=o.next}while(o!==null);p===null?d=p=a:p=p.next=a}else d=p=a;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=a:i.next=a,o.lastBaseUpdate=a}var eg=!1;function Su(){if(eg){var i=qo;if(i!==null)throw i}}function Au(i,a,o,u){eg=!1;var d=i.updateQueue;pa=!1;var p=d.firstBaseUpdate,T=d.lastBaseUpdate,b=d.shared.pending;if(b!==null){d.shared.pending=null;var C=b,Y=C.next;C.next=null,T===null?p=Y:T.next=Y,T=C;var re=i.alternate;re!==null&&(re=re.updateQueue,b=re.lastBaseUpdate,b!==T&&(b===null?re.firstBaseUpdate=Y:b.next=Y,re.lastBaseUpdate=C))}if(p!==null){var se=d.baseState;T=0,re=Y=C=null,b=p;do{var X=b.lane&-536870913,W=X!==b.lane;if(W?(st&X)===X:(u&X)===X){X!==0&&X===jo&&(eg=!0),re!==null&&(re=re.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Ue=i,Oe=b;X=a;var It=o;switch(Oe.tag){case 1:if(Ue=Oe.payload,typeof Ue=="function"){se=Ue.call(It,se,X);break e}se=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=Oe.payload,X=typeof Ue=="function"?Ue.call(It,se,X):Ue,X==null)break e;se=_({},se,X);break e;case 2:pa=!0}}X=b.callback,X!==null&&(i.flags|=64,W&&(i.flags|=8192),W=d.callbacks,W===null?d.callbacks=[X]:W.push(X))}else W={lane:X,tag:b.tag,payload:b.payload,callback:b.callback,next:null},re===null?(Y=re=W,C=se):re=re.next=W,T|=X;if(b=b.next,b===null){if(b=d.shared.pending,b===null)break;W=b,b=W.next,W.next=null,d.lastBaseUpdate=W,d.shared.pending=null}}while(!0);re===null&&(C=se),d.baseState=C,d.firstBaseUpdate=Y,d.lastBaseUpdate=re,p===null&&(d.shared.lanes=0),Ia|=T,i.lanes=T,i.memoizedState=se}}function Pv(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function Ov(i,a){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)Pv(o[i],a)}var Ho=ie(null),Yh=ie(0);function Vv(i,a){i=qi,ue(Yh,i),ue(Ho,a),qi=i|a.baseLanes}function tg(){ue(Yh,qi),ue(Ho,Ho.current)}function ng(){qi=Yh.current,me(Ho),me(Yh)}var va=0,Qe=null,St=null,Yt=null,Kh=!1,Go=!1,Fs=!1,Qh=0,Iu=0,Yo=null,m1=0;function Bt(){throw Error(r(321))}function rg(i,a){if(a===null)return!1;for(var o=0;o<a.length&&o<i.length;o++)if(!Zn(i[o],a[o]))return!1;return!0}function ig(i,a,o,u,d,p){return va=p,Qe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,$.H=i===null||i.memoizedState===null?_E:vE,Fs=!1,p=o(u,d),Fs=!1,Go&&(p=Lv(a,o,u,d)),kv(i),p}function kv(i){$.H=ef;var a=St!==null&&St.next!==null;if(va=0,Yt=St=Qe=null,Kh=!1,Iu=0,Yo=null,a)throw Error(r(300));i===null||un||(i=i.dependencies,i!==null&&Fh(i)&&(un=!0))}function Lv(i,a,o,u){Qe=i;var d=0;do{if(Go&&(Yo=null),Iu=0,Go=!1,25<=d)throw Error(r(301));if(d+=1,Yt=St=null,i.updateQueue!=null){var p=i.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}$.H=T1,p=a(o,u)}while(Go);return p}function g1(){var i=$.H,a=i.useState()[0];return a=typeof a.then=="function"?Ru(a):a,i=i.useState()[0],(St!==null?St.memoizedState:null)!==i&&(Qe.flags|=1024),a}function ag(){var i=Qh!==0;return Qh=0,i}function sg(i,a,o){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~o}function og(i){if(Kh){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Kh=!1}va=0,Yt=St=Qe=null,Go=!1,Iu=Qh=0,Yo=null}function qn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Qe.memoizedState=Yt=i:Yt=Yt.next=i,Yt}function Kt(){if(St===null){var i=Qe.alternate;i=i!==null?i.memoizedState:null}else i=St.next;var a=Yt===null?Qe.memoizedState:Yt.next;if(a!==null)Yt=a,St=i;else{if(i===null)throw Qe.alternate===null?Error(r(467)):Error(r(310));St=i,i={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Yt===null?Qe.memoizedState=Yt=i:Yt=Yt.next=i}return Yt}function lg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ru(i){var a=Iu;return Iu+=1,Yo===null&&(Yo=[]),i=xv(Yo,i,a),a=Qe,(Yt===null?a.memoizedState:Yt.next)===null&&(a=a.alternate,$.H=a===null||a.memoizedState===null?_E:vE),i}function $h(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ru(i);if(i.$$typeof===ee)return Rn(i)}throw Error(r(438,String(i)))}function ug(i){var a=null,o=Qe.updateQueue;if(o!==null&&(a=o.memoCache),a==null){var u=Qe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(d){return d.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),o===null&&(o=lg(),Qe.updateQueue=o),o.memoCache=a,o=a.data[a.index],o===void 0)for(o=a.data[a.index]=Array(i),u=0;u<i;u++)o[u]=O;return a.index++,o}function Li(i,a){return typeof a=="function"?a(i):a}function Xh(i){var a=Kt();return cg(a,St,i)}function cg(i,a,o){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var d=i.baseQueue,p=u.pending;if(p!==null){if(d!==null){var T=d.next;d.next=p.next,p.next=T}a.baseQueue=d=p,u.pending=null}if(p=i.baseState,d===null)i.memoizedState=p;else{a=d.next;var b=T=null,C=null,Y=a,re=!1;do{var se=Y.lane&-536870913;if(se!==Y.lane?(st&se)===se:(va&se)===se){var X=Y.revertLane;if(X===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),se===jo&&(re=!0);else if((va&X)===X){Y=Y.next,X===jo&&(re=!0);continue}else se={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},C===null?(b=C=se,T=p):C=C.next=se,Qe.lanes|=X,Ia|=X;se=Y.action,Fs&&o(p,se),p=Y.hasEagerState?Y.eagerState:o(p,se)}else X={lane:se,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},C===null?(b=C=X,T=p):C=C.next=X,Qe.lanes|=se,Ia|=se;Y=Y.next}while(Y!==null&&Y!==a);if(C===null?T=p:C.next=b,!Zn(p,i.memoizedState)&&(un=!0,re&&(o=qo,o!==null)))throw o;i.memoizedState=p,i.baseState=T,i.baseQueue=C,u.lastRenderedState=p}return d===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function hg(i){var a=Kt(),o=a.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var u=o.dispatch,d=o.pending,p=a.memoizedState;if(d!==null){o.pending=null;var T=d=d.next;do p=i(p,T.action),T=T.next;while(T!==d);Zn(p,a.memoizedState)||(un=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),o.lastRenderedState=p}return[p,u]}function Uv(i,a,o){var u=Qe,d=Kt(),p=dt;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=a();var T=!Zn((St||d).memoizedState,o);T&&(d.memoizedState=o,un=!0),d=d.queue;var b=Fv.bind(null,u,d,i);if(Du(2048,8,b,[i]),d.getSnapshot!==a||T||Yt!==null&&Yt.memoizedState.tag&1){if(u.flags|=2048,Ko(9,Wh(),Bv.bind(null,u,d,o,a),null),Ct===null)throw Error(r(349));p||(va&124)!==0||zv(u,a,o)}return o}function zv(i,a,o){i.flags|=16384,i={getSnapshot:a,value:o},a=Qe.updateQueue,a===null?(a=lg(),Qe.updateQueue=a,a.stores=[i]):(o=a.stores,o===null?a.stores=[i]:o.push(i))}function Bv(i,a,o,u){a.value=o,a.getSnapshot=u,jv(a)&&qv(i)}function Fv(i,a,o){return o(function(){jv(a)&&qv(i)})}function jv(i){var a=i.getSnapshot;i=i.value;try{var o=a();return!Zn(i,o)}catch{return!0}}function qv(i){var a=Uo(i,2);a!==null&&ir(a,i,2)}function fg(i){var a=qn();if(typeof i=="function"){var o=i;if(i=o(),Fs){In(!0);try{o()}finally{In(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:i},a}function Hv(i,a,o,u){return i.baseState=o,cg(i,St,typeof u=="function"?u:Li)}function p1(i,a,o,u,d){if(Jh(i))throw Error(r(485));if(i=a.action,i!==null){var p={payload:d,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};$.T!==null?o(!0):p.isTransition=!1,u(p),o=a.pending,o===null?(p.next=a.pending=p,Gv(a,p)):(p.next=o.next,a.pending=o.next=p)}}function Gv(i,a){var o=a.action,u=a.payload,d=i.state;if(a.isTransition){var p=$.T,T={};$.T=T;try{var b=o(d,u),C=$.S;C!==null&&C(T,b),Yv(i,a,b)}catch(Y){dg(i,a,Y)}finally{$.T=p}}else try{p=o(d,u),Yv(i,a,p)}catch(Y){dg(i,a,Y)}}function Yv(i,a,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Kv(i,a,u)},function(u){return dg(i,a,u)}):Kv(i,a,o)}function Kv(i,a,o){a.status="fulfilled",a.value=o,Qv(a),i.state=o,a=i.pending,a!==null&&(o=a.next,o===a?i.pending=null:(o=o.next,a.next=o,Gv(i,o)))}function dg(i,a,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=o,Qv(a),a=a.next;while(a!==u)}i.action=null}function Qv(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function $v(i,a){return a}function Xv(i,a){if(dt){var o=Ct.formState;if(o!==null){e:{var u=Qe;if(dt){if(Ut){t:{for(var d=Ut,p=ai;d.nodeType!==8;){if(!p){d=null;break t}if(d=Br(d.nextSibling),d===null){d=null;break t}}p=d.data,d=p==="F!"||p==="F"?d:null}if(d){Ut=Br(d.nextSibling),u=d.data==="F!";break e}}Ls(u)}u=!1}u&&(a=o[0])}}return o=qn(),o.memoizedState=o.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$v,lastRenderedState:a},o.queue=u,o=gE.bind(null,Qe,u),u.dispatch=o,u=fg(!1),p=_g.bind(null,Qe,!1,u.queue),u=qn(),d={state:a,dispatch:null,action:i,pending:null},u.queue=d,o=p1.bind(null,Qe,d,p,o),d.dispatch=o,u.memoizedState=i,[a,o,!1]}function Wv(i){var a=Kt();return Zv(a,St,i)}function Zv(i,a,o){if(a=cg(i,a,$v)[0],i=Xh(Li)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=Ru(a)}catch(T){throw T===Tu?Hh:T}else u=a;a=Kt();var d=a.queue,p=d.dispatch;return o!==a.memoizedState&&(Qe.flags|=2048,Ko(9,Wh(),y1.bind(null,d,o),null)),[u,p,i]}function y1(i,a){i.action=a}function Jv(i){var a=Kt(),o=St;if(o!==null)return Zv(a,o,i);Kt(),a=a.memoizedState,o=Kt();var u=o.queue.dispatch;return o.memoizedState=i,[a,u,!1]}function Ko(i,a,o,u){return i={tag:i,create:o,deps:u,inst:a,next:null},a=Qe.updateQueue,a===null&&(a=lg(),Qe.updateQueue=a),o=a.lastEffect,o===null?a.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,a.lastEffect=i),i}function Wh(){return{destroy:void 0,resource:void 0}}function eE(){return Kt().memoizedState}function Zh(i,a,o,u){var d=qn();u=u===void 0?null:u,Qe.flags|=i,d.memoizedState=Ko(1|a,Wh(),o,u)}function Du(i,a,o,u){var d=Kt();u=u===void 0?null:u;var p=d.memoizedState.inst;St!==null&&u!==null&&rg(u,St.memoizedState.deps)?d.memoizedState=Ko(a,p,o,u):(Qe.flags|=i,d.memoizedState=Ko(1|a,p,o,u))}function tE(i,a){Zh(8390656,8,i,a)}function nE(i,a){Du(2048,8,i,a)}function rE(i,a){return Du(4,2,i,a)}function iE(i,a){return Du(4,4,i,a)}function aE(i,a){if(typeof a=="function"){i=i();var o=a(i);return function(){typeof o=="function"?o():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function sE(i,a,o){o=o!=null?o.concat([i]):null,Du(4,4,aE.bind(null,a,i),o)}function mg(){}function oE(i,a){var o=Kt();a=a===void 0?null:a;var u=o.memoizedState;return a!==null&&rg(a,u[1])?u[0]:(o.memoizedState=[i,a],i)}function lE(i,a){var o=Kt();a=a===void 0?null:a;var u=o.memoizedState;if(a!==null&&rg(a,u[1]))return u[0];if(u=i(),Fs){In(!0);try{i()}finally{In(!1)}}return o.memoizedState=[u,a],u}function gg(i,a,o){return o===void 0||(va&1073741824)!==0?i.memoizedState=a:(i.memoizedState=o,i=hT(),Qe.lanes|=i,Ia|=i,o)}function uE(i,a,o,u){return Zn(o,a)?o:Ho.current!==null?(i=gg(i,o,u),Zn(i,a)||(un=!0),i):(va&42)===0?(un=!0,i.memoizedState=o):(i=hT(),Qe.lanes|=i,Ia|=i,a)}function cE(i,a,o,u,d){var p=fe.p;fe.p=p!==0&&8>p?p:8;var T=$.T,b={};$.T=b,_g(i,!1,a,o);try{var C=d(),Y=$.S;if(Y!==null&&Y(b,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var re=d1(C,u);Cu(i,a,re,rr(i))}else Cu(i,a,u,rr(i))}catch(se){Cu(i,a,{then:function(){},status:"rejected",reason:se},rr())}finally{fe.p=p,$.T=T}}function _1(){}function pg(i,a,o,u){if(i.tag!==5)throw Error(r(476));var d=hE(i).queue;cE(i,d,a,ve,o===null?_1:function(){return fE(i),o(u)})}function hE(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:ve},next:null};var o={};return a.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:o},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function fE(i){var a=hE(i).next.queue;Cu(i,a,{},rr())}function yg(){return Rn(Ku)}function dE(){return Kt().memoizedState}function mE(){return Kt().memoizedState}function v1(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var o=rr();i=ya(o);var u=_a(a,i,o);u!==null&&(ir(u,a,o),bu(u,a,o)),a={cache:Km()},i.payload=a;return}a=a.return}}function E1(i,a,o){var u=rr();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Jh(i)?pE(a,o):(o=Lm(i,a,o,u),o!==null&&(ir(o,i,u),yE(o,a,u)))}function gE(i,a,o){var u=rr();Cu(i,a,o,u)}function Cu(i,a,o,u){var d={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Jh(i))pE(a,d);else{var p=i.alternate;if(i.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var T=a.lastRenderedState,b=p(T,o);if(d.hasEagerState=!0,d.eagerState=b,Zn(b,T))return kh(i,a,d,0),Ct===null&&Vh(),!1}catch{}finally{}if(o=Lm(i,a,d,u),o!==null)return ir(o,i,u),yE(o,a,u),!0}return!1}function _g(i,a,o,u){if(u={lane:2,revertLane:Xg(),action:u,hasEagerState:!1,eagerState:null,next:null},Jh(i)){if(a)throw Error(r(479))}else a=Lm(i,o,u,2),a!==null&&ir(a,i,2)}function Jh(i){var a=i.alternate;return i===Qe||a!==null&&a===Qe}function pE(i,a){Go=Kh=!0;var o=i.pending;o===null?a.next=a:(a.next=o.next,o.next=a),i.pending=a}function yE(i,a,o){if((o&4194048)!==0){var u=a.lanes;u&=i.pendingLanes,o|=u,a.lanes=o,Xr(i,o)}}var ef={readContext:Rn,use:$h,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useLayoutEffect:Bt,useInsertionEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useSyncExternalStore:Bt,useId:Bt,useHostTransitionStatus:Bt,useFormState:Bt,useActionState:Bt,useOptimistic:Bt,useMemoCache:Bt,useCacheRefresh:Bt},_E={readContext:Rn,use:$h,useCallback:function(i,a){return qn().memoizedState=[i,a===void 0?null:a],i},useContext:Rn,useEffect:tE,useImperativeHandle:function(i,a,o){o=o!=null?o.concat([i]):null,Zh(4194308,4,aE.bind(null,a,i),o)},useLayoutEffect:function(i,a){return Zh(4194308,4,i,a)},useInsertionEffect:function(i,a){Zh(4,2,i,a)},useMemo:function(i,a){var o=qn();a=a===void 0?null:a;var u=i();if(Fs){In(!0);try{i()}finally{In(!1)}}return o.memoizedState=[u,a],u},useReducer:function(i,a,o){var u=qn();if(o!==void 0){var d=o(a);if(Fs){In(!0);try{o(a)}finally{In(!1)}}}else d=a;return u.memoizedState=u.baseState=d,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:d},u.queue=i,i=i.dispatch=E1.bind(null,Qe,i),[u.memoizedState,i]},useRef:function(i){var a=qn();return i={current:i},a.memoizedState=i},useState:function(i){i=fg(i);var a=i.queue,o=gE.bind(null,Qe,a);return a.dispatch=o,[i.memoizedState,o]},useDebugValue:mg,useDeferredValue:function(i,a){var o=qn();return gg(o,i,a)},useTransition:function(){var i=fg(!1);return i=cE.bind(null,Qe,i.queue,!0,!1),qn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,o){var u=Qe,d=qn();if(dt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=a(),Ct===null)throw Error(r(349));(st&124)!==0||zv(u,a,o)}d.memoizedState=o;var p={value:o,getSnapshot:a};return d.queue=p,tE(Fv.bind(null,u,p,i),[i]),u.flags|=2048,Ko(9,Wh(),Bv.bind(null,u,p,o,a),null),o},useId:function(){var i=qn(),a=Ct.identifierPrefix;if(dt){var o=Oi,u=Pi;o=(u&~(1<<32-Ht(u)-1)).toString(32)+o,a="«"+a+"R"+o,o=Qh++,0<o&&(a+="H"+o.toString(32)),a+="»"}else o=m1++,a="«"+a+"r"+o.toString(32)+"»";return i.memoizedState=a},useHostTransitionStatus:yg,useFormState:Xv,useActionState:Xv,useOptimistic:function(i){var a=qn();a.memoizedState=a.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=o,a=_g.bind(null,Qe,!0,o),o.dispatch=a,[i,a]},useMemoCache:ug,useCacheRefresh:function(){return qn().memoizedState=v1.bind(null,Qe)}},vE={readContext:Rn,use:$h,useCallback:oE,useContext:Rn,useEffect:nE,useImperativeHandle:sE,useInsertionEffect:rE,useLayoutEffect:iE,useMemo:lE,useReducer:Xh,useRef:eE,useState:function(){return Xh(Li)},useDebugValue:mg,useDeferredValue:function(i,a){var o=Kt();return uE(o,St.memoizedState,i,a)},useTransition:function(){var i=Xh(Li)[0],a=Kt().memoizedState;return[typeof i=="boolean"?i:Ru(i),a]},useSyncExternalStore:Uv,useId:dE,useHostTransitionStatus:yg,useFormState:Wv,useActionState:Wv,useOptimistic:function(i,a){var o=Kt();return Hv(o,St,i,a)},useMemoCache:ug,useCacheRefresh:mE},T1={readContext:Rn,use:$h,useCallback:oE,useContext:Rn,useEffect:nE,useImperativeHandle:sE,useInsertionEffect:rE,useLayoutEffect:iE,useMemo:lE,useReducer:hg,useRef:eE,useState:function(){return hg(Li)},useDebugValue:mg,useDeferredValue:function(i,a){var o=Kt();return St===null?gg(o,i,a):uE(o,St.memoizedState,i,a)},useTransition:function(){var i=hg(Li)[0],a=Kt().memoizedState;return[typeof i=="boolean"?i:Ru(i),a]},useSyncExternalStore:Uv,useId:dE,useHostTransitionStatus:yg,useFormState:Jv,useActionState:Jv,useOptimistic:function(i,a){var o=Kt();return St!==null?Hv(o,St,i,a):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:ug,useCacheRefresh:mE},Qo=null,xu=0;function tf(i){var a=xu;return xu+=1,Qo===null&&(Qo=[]),xv(Qo,i,a)}function Nu(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function nf(i,a){throw a.$$typeof===E?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function EE(i){var a=i._init;return a(i._payload)}function TE(i){function a(B,V){if(i){var G=B.deletions;G===null?(B.deletions=[V],B.flags|=16):G.push(V)}}function o(B,V){if(!i)return null;for(;V!==null;)a(B,V),V=V.sibling;return null}function u(B){for(var V=new Map;B!==null;)B.key!==null?V.set(B.key,B):V.set(B.index,B),B=B.sibling;return V}function d(B,V){return B=Mi(B,V),B.index=0,B.sibling=null,B}function p(B,V,G){return B.index=G,i?(G=B.alternate,G!==null?(G=G.index,G<V?(B.flags|=67108866,V):G):(B.flags|=67108866,V)):(B.flags|=1048576,V)}function T(B){return i&&B.alternate===null&&(B.flags|=67108866),B}function b(B,V,G,ae){return V===null||V.tag!==6?(V=zm(G,B.mode,ae),V.return=B,V):(V=d(V,G),V.return=B,V)}function C(B,V,G,ae){var be=G.type;return be===P?re(B,V,G.props.children,ae,G.key):V!==null&&(V.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===A&&EE(be)===V.type)?(V=d(V,G.props),Nu(V,G),V.return=B,V):(V=Uh(G.type,G.key,G.props,null,B.mode,ae),Nu(V,G),V.return=B,V)}function Y(B,V,G,ae){return V===null||V.tag!==4||V.stateNode.containerInfo!==G.containerInfo||V.stateNode.implementation!==G.implementation?(V=Bm(G,B.mode,ae),V.return=B,V):(V=d(V,G.children||[]),V.return=B,V)}function re(B,V,G,ae,be){return V===null||V.tag!==7?(V=Ps(G,B.mode,ae,be),V.return=B,V):(V=d(V,G),V.return=B,V)}function se(B,V,G){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=zm(""+V,B.mode,G),V.return=B,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case w:return G=Uh(V.type,V.key,V.props,null,B.mode,G),Nu(G,V),G.return=B,G;case I:return V=Bm(V,B.mode,G),V.return=B,V;case A:var ae=V._init;return V=ae(V._payload),se(B,V,G)}if(nt(V)||U(V))return V=Ps(V,B.mode,G,null),V.return=B,V;if(typeof V.then=="function")return se(B,tf(V),G);if(V.$$typeof===ee)return se(B,jh(B,V),G);nf(B,V)}return null}function X(B,V,G,ae){var be=V!==null?V.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return be!==null?null:b(B,V,""+G,ae);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return G.key===be?C(B,V,G,ae):null;case I:return G.key===be?Y(B,V,G,ae):null;case A:return be=G._init,G=be(G._payload),X(B,V,G,ae)}if(nt(G)||U(G))return be!==null?null:re(B,V,G,ae,null);if(typeof G.then=="function")return X(B,V,tf(G),ae);if(G.$$typeof===ee)return X(B,V,jh(B,G),ae);nf(B,G)}return null}function W(B,V,G,ae,be){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return B=B.get(G)||null,b(V,B,""+ae,be);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case w:return B=B.get(ae.key===null?G:ae.key)||null,C(V,B,ae,be);case I:return B=B.get(ae.key===null?G:ae.key)||null,Y(V,B,ae,be);case A:var Xe=ae._init;return ae=Xe(ae._payload),W(B,V,G,ae,be)}if(nt(ae)||U(ae))return B=B.get(G)||null,re(V,B,ae,be,null);if(typeof ae.then=="function")return W(B,V,G,tf(ae),be);if(ae.$$typeof===ee)return W(B,V,G,jh(V,ae),be);nf(V,ae)}return null}function Ue(B,V,G,ae){for(var be=null,Xe=null,Ne=V,ke=V=0,hn=null;Ne!==null&&ke<G.length;ke++){Ne.index>ke?(hn=Ne,Ne=null):hn=Ne.sibling;var ut=X(B,Ne,G[ke],ae);if(ut===null){Ne===null&&(Ne=hn);break}i&&Ne&&ut.alternate===null&&a(B,Ne),V=p(ut,V,ke),Xe===null?be=ut:Xe.sibling=ut,Xe=ut,Ne=hn}if(ke===G.length)return o(B,Ne),dt&&Vs(B,ke),be;if(Ne===null){for(;ke<G.length;ke++)Ne=se(B,G[ke],ae),Ne!==null&&(V=p(Ne,V,ke),Xe===null?be=Ne:Xe.sibling=Ne,Xe=Ne);return dt&&Vs(B,ke),be}for(Ne=u(Ne);ke<G.length;ke++)hn=W(Ne,B,ke,G[ke],ae),hn!==null&&(i&&hn.alternate!==null&&Ne.delete(hn.key===null?ke:hn.key),V=p(hn,V,ke),Xe===null?be=hn:Xe.sibling=hn,Xe=hn);return i&&Ne.forEach(function(Va){return a(B,Va)}),dt&&Vs(B,ke),be}function Oe(B,V,G,ae){if(G==null)throw Error(r(151));for(var be=null,Xe=null,Ne=V,ke=V=0,hn=null,ut=G.next();Ne!==null&&!ut.done;ke++,ut=G.next()){Ne.index>ke?(hn=Ne,Ne=null):hn=Ne.sibling;var Va=X(B,Ne,ut.value,ae);if(Va===null){Ne===null&&(Ne=hn);break}i&&Ne&&Va.alternate===null&&a(B,Ne),V=p(Va,V,ke),Xe===null?be=Va:Xe.sibling=Va,Xe=Va,Ne=hn}if(ut.done)return o(B,Ne),dt&&Vs(B,ke),be;if(Ne===null){for(;!ut.done;ke++,ut=G.next())ut=se(B,ut.value,ae),ut!==null&&(V=p(ut,V,ke),Xe===null?be=ut:Xe.sibling=ut,Xe=ut);return dt&&Vs(B,ke),be}for(Ne=u(Ne);!ut.done;ke++,ut=G.next())ut=W(Ne,B,ke,ut.value,ae),ut!==null&&(i&&ut.alternate!==null&&Ne.delete(ut.key===null?ke:ut.key),V=p(ut,V,ke),Xe===null?be=ut:Xe.sibling=ut,Xe=ut);return i&&Ne.forEach(function(wD){return a(B,wD)}),dt&&Vs(B,ke),be}function It(B,V,G,ae){if(typeof G=="object"&&G!==null&&G.type===P&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case w:e:{for(var be=G.key;V!==null;){if(V.key===be){if(be=G.type,be===P){if(V.tag===7){o(B,V.sibling),ae=d(V,G.props.children),ae.return=B,B=ae;break e}}else if(V.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===A&&EE(be)===V.type){o(B,V.sibling),ae=d(V,G.props),Nu(ae,G),ae.return=B,B=ae;break e}o(B,V);break}else a(B,V);V=V.sibling}G.type===P?(ae=Ps(G.props.children,B.mode,ae,G.key),ae.return=B,B=ae):(ae=Uh(G.type,G.key,G.props,null,B.mode,ae),Nu(ae,G),ae.return=B,B=ae)}return T(B);case I:e:{for(be=G.key;V!==null;){if(V.key===be)if(V.tag===4&&V.stateNode.containerInfo===G.containerInfo&&V.stateNode.implementation===G.implementation){o(B,V.sibling),ae=d(V,G.children||[]),ae.return=B,B=ae;break e}else{o(B,V);break}else a(B,V);V=V.sibling}ae=Bm(G,B.mode,ae),ae.return=B,B=ae}return T(B);case A:return be=G._init,G=be(G._payload),It(B,V,G,ae)}if(nt(G))return Ue(B,V,G,ae);if(U(G)){if(be=U(G),typeof be!="function")throw Error(r(150));return G=be.call(G),Oe(B,V,G,ae)}if(typeof G.then=="function")return It(B,V,tf(G),ae);if(G.$$typeof===ee)return It(B,V,jh(B,G),ae);nf(B,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,V!==null&&V.tag===6?(o(B,V.sibling),ae=d(V,G),ae.return=B,B=ae):(o(B,V),ae=zm(G,B.mode,ae),ae.return=B,B=ae),T(B)):o(B,V)}return function(B,V,G,ae){try{xu=0;var be=It(B,V,G,ae);return Qo=null,be}catch(Ne){if(Ne===Tu||Ne===Hh)throw Ne;var Xe=Jn(29,Ne,null,B.mode);return Xe.lanes=ae,Xe.return=B,Xe}finally{}}}var $o=TE(!0),wE=TE(!1),Sr=ie(null),si=null;function Ea(i){var a=i.alternate;ue(tn,tn.current&1),ue(Sr,i),si===null&&(a===null||Ho.current!==null||a.memoizedState!==null)&&(si=i)}function bE(i){if(i.tag===22){if(ue(tn,tn.current),ue(Sr,i),si===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(si=i)}}else Ta()}function Ta(){ue(tn,tn.current),ue(Sr,Sr.current)}function Ui(i){me(Sr),si===i&&(si=null),me(tn)}var tn=ie(0);function rf(i){for(var a=i;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||lp(o)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function vg(i,a,o,u){a=i.memoizedState,o=o(u,a),o=o==null?a:_({},a,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var Eg={enqueueSetState:function(i,a,o){i=i._reactInternals;var u=rr(),d=ya(u);d.payload=a,o!=null&&(d.callback=o),a=_a(i,d,u),a!==null&&(ir(a,i,u),bu(a,i,u))},enqueueReplaceState:function(i,a,o){i=i._reactInternals;var u=rr(),d=ya(u);d.tag=1,d.payload=a,o!=null&&(d.callback=o),a=_a(i,d,u),a!==null&&(ir(a,i,u),bu(a,i,u))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var o=rr(),u=ya(o);u.tag=2,a!=null&&(u.callback=a),a=_a(i,u,o),a!==null&&(ir(a,i,o),bu(a,i,o))}};function SE(i,a,o,u,d,p,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,p,T):a.prototype&&a.prototype.isPureReactComponent?!du(o,u)||!du(d,p):!0}function AE(i,a,o,u){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,u),a.state!==i&&Eg.enqueueReplaceState(a,a.state,null)}function js(i,a){var o=a;if("ref"in a){o={};for(var u in a)u!=="ref"&&(o[u]=a[u])}if(i=i.defaultProps){o===a&&(o=_({},o));for(var d in i)o[d]===void 0&&(o[d]=i[d])}return o}var af=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function IE(i){af(i)}function RE(i){console.error(i)}function DE(i){af(i)}function sf(i,a){try{var o=i.onUncaughtError;o(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function CE(i,a,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Tg(i,a,o){return o=ya(o),o.tag=3,o.payload={element:null},o.callback=function(){sf(i,a)},o}function xE(i){return i=ya(i),i.tag=3,i}function NE(i,a,o,u){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var p=u.value;i.payload=function(){return d(p)},i.callback=function(){CE(a,o,u)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){CE(a,o,u),typeof d!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function w1(i,a,o,u,d){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=o.alternate,a!==null&&_u(a,o,d,!0),o=Sr.current,o!==null){switch(o.tag){case 13:return si===null?Gg():o.alternate===null&&zt===0&&(zt=3),o.flags&=-257,o.flags|=65536,o.lanes=d,u===Xm?o.flags|=16384:(a=o.updateQueue,a===null?o.updateQueue=new Set([u]):a.add(u),Kg(i,u,d)),!1;case 22:return o.flags|=65536,u===Xm?o.flags|=16384:(a=o.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=a):(o=a.retryQueue,o===null?a.retryQueue=new Set([u]):o.add(u)),Kg(i,u,d)),!1}throw Error(r(435,o.tag))}return Kg(i,u,d),Gg(),!1}if(dt)return a=Sr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=d,u!==qm&&(i=Error(r(422),{cause:u}),yu(Er(i,o)))):(u!==qm&&(a=Error(r(423),{cause:u}),yu(Er(a,o))),i=i.current.alternate,i.flags|=65536,d&=-d,i.lanes|=d,u=Er(u,o),d=Tg(i.stateNode,u,d),Jm(i,d),zt!==4&&(zt=2)),!1;var p=Error(r(520),{cause:u});if(p=Er(p,o),Uu===null?Uu=[p]:Uu.push(p),zt!==4&&(zt=2),a===null)return!0;u=Er(u,o),o=a;do{switch(o.tag){case 3:return o.flags|=65536,i=d&-d,o.lanes|=i,i=Tg(o.stateNode,u,i),Jm(o,i),!1;case 1:if(a=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ra===null||!Ra.has(p))))return o.flags|=65536,d&=-d,o.lanes|=d,d=xE(d),NE(d,i,o,u),Jm(o,d),!1}o=o.return}while(o!==null);return!1}var ME=Error(r(461)),un=!1;function vn(i,a,o,u){a.child=i===null?wE(a,null,o,u):$o(a,i.child,o,u)}function PE(i,a,o,u,d){o=o.render;var p=a.ref;if("ref"in u){var T={};for(var b in u)b!=="ref"&&(T[b]=u[b])}else T=u;return zs(a),u=ig(i,a,o,T,p,d),b=ag(),i!==null&&!un?(sg(i,a,d),zi(i,a,d)):(dt&&b&&Fm(a),a.flags|=1,vn(i,a,u,d),a.child)}function OE(i,a,o,u,d){if(i===null){var p=o.type;return typeof p=="function"&&!Um(p)&&p.defaultProps===void 0&&o.compare===null?(a.tag=15,a.type=p,VE(i,a,p,u,d)):(i=Uh(o.type,null,u,a,a.mode,d),i.ref=a.ref,i.return=a,a.child=i)}if(p=i.child,!Cg(i,d)){var T=p.memoizedProps;if(o=o.compare,o=o!==null?o:du,o(T,u)&&i.ref===a.ref)return zi(i,a,d)}return a.flags|=1,i=Mi(p,u),i.ref=a.ref,i.return=a,a.child=i}function VE(i,a,o,u,d){if(i!==null){var p=i.memoizedProps;if(du(p,u)&&i.ref===a.ref)if(un=!1,a.pendingProps=u=p,Cg(i,d))(i.flags&131072)!==0&&(un=!0);else return a.lanes=i.lanes,zi(i,a,d)}return wg(i,a,o,u,d)}function kE(i,a,o){var u=a.pendingProps,d=u.children,p=i!==null?i.memoizedState:null;if(u.mode==="hidden"){if((a.flags&128)!==0){if(u=p!==null?p.baseLanes|o:o,i!==null){for(d=a.child=i.child,p=0;d!==null;)p=p|d.lanes|d.childLanes,d=d.sibling;a.childLanes=p&~u}else a.childLanes=0,a.child=null;return LE(i,a,u,o)}if((o&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&qh(a,p!==null?p.cachePool:null),p!==null?Vv(a,p):tg(),bE(a);else return a.lanes=a.childLanes=536870912,LE(i,a,p!==null?p.baseLanes|o:o,o)}else p!==null?(qh(a,p.cachePool),Vv(a,p),Ta(),a.memoizedState=null):(i!==null&&qh(a,null),tg(),Ta());return vn(i,a,d,o),a.child}function LE(i,a,o,u){var d=$m();return d=d===null?null:{parent:en._currentValue,pool:d},a.memoizedState={baseLanes:o,cachePool:d},i!==null&&qh(a,null),tg(),bE(a),i!==null&&_u(i,a,u,!0),null}function of(i,a){var o=a.ref;if(o===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(i===null||i.ref!==o)&&(a.flags|=4194816)}}function wg(i,a,o,u,d){return zs(a),o=ig(i,a,o,u,void 0,d),u=ag(),i!==null&&!un?(sg(i,a,d),zi(i,a,d)):(dt&&u&&Fm(a),a.flags|=1,vn(i,a,o,d),a.child)}function UE(i,a,o,u,d,p){return zs(a),a.updateQueue=null,o=Lv(a,u,o,d),kv(i),u=ag(),i!==null&&!un?(sg(i,a,p),zi(i,a,p)):(dt&&u&&Fm(a),a.flags|=1,vn(i,a,o,p),a.child)}function zE(i,a,o,u,d){if(zs(a),a.stateNode===null){var p=zo,T=o.contextType;typeof T=="object"&&T!==null&&(p=Rn(T)),p=new o(u,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Eg,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=u,p.state=a.memoizedState,p.refs={},Wm(a),T=o.contextType,p.context=typeof T=="object"&&T!==null?Rn(T):zo,p.state=a.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(vg(a,o,T,u),p.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&Eg.enqueueReplaceState(p,p.state,null),Au(a,u,p,d),Su(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(i===null){p=a.stateNode;var b=a.memoizedProps,C=js(o,b);p.props=C;var Y=p.context,re=o.contextType;T=zo,typeof re=="object"&&re!==null&&(T=Rn(re));var se=o.getDerivedStateFromProps;re=typeof se=="function"||typeof p.getSnapshotBeforeUpdate=="function",b=a.pendingProps!==b,re||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b||Y!==T)&&AE(a,p,u,T),pa=!1;var X=a.memoizedState;p.state=X,Au(a,u,p,d),Su(),Y=a.memoizedState,b||X!==Y||pa?(typeof se=="function"&&(vg(a,o,se,u),Y=a.memoizedState),(C=pa||SE(a,o,C,u,X,Y,T))?(re||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=Y),p.props=u,p.state=Y,p.context=T,u=C):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{p=a.stateNode,Zm(i,a),T=a.memoizedProps,re=js(o,T),p.props=re,se=a.pendingProps,X=p.context,Y=o.contextType,C=zo,typeof Y=="object"&&Y!==null&&(C=Rn(Y)),b=o.getDerivedStateFromProps,(Y=typeof b=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==se||X!==C)&&AE(a,p,u,C),pa=!1,X=a.memoizedState,p.state=X,Au(a,u,p,d),Su();var W=a.memoizedState;T!==se||X!==W||pa||i!==null&&i.dependencies!==null&&Fh(i.dependencies)?(typeof b=="function"&&(vg(a,o,b,u),W=a.memoizedState),(re=pa||SE(a,o,re,u,X,W,C)||i!==null&&i.dependencies!==null&&Fh(i.dependencies))?(Y||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,W,C),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,W,C)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===i.memoizedProps&&X===i.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&X===i.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=W),p.props=u,p.state=W,p.context=C,u=re):(typeof p.componentDidUpdate!="function"||T===i.memoizedProps&&X===i.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&X===i.memoizedState||(a.flags|=1024),u=!1)}return p=u,of(i,a),u=(a.flags&128)!==0,p||u?(p=a.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,i!==null&&u?(a.child=$o(a,i.child,null,d),a.child=$o(a,null,o,d)):vn(i,a,o,d),a.memoizedState=p.state,i=a.child):i=zi(i,a,d),i}function BE(i,a,o,u){return pu(),a.flags|=256,vn(i,a,o,u),a.child}var bg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sg(i){return{baseLanes:i,cachePool:Rv()}}function Ag(i,a,o){return i=i!==null?i.childLanes&~o:0,a&&(i|=Ar),i}function FE(i,a,o){var u=a.pendingProps,d=!1,p=(a.flags&128)!==0,T;if((T=p)||(T=i!==null&&i.memoizedState===null?!1:(tn.current&2)!==0),T&&(d=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,i===null){if(dt){if(d?Ea(a):Ta(),dt){var b=Ut,C;if(C=b){e:{for(C=b,b=ai;C.nodeType!==8;){if(!b){b=null;break e}if(C=Br(C.nextSibling),C===null){b=null;break e}}b=C}b!==null?(a.memoizedState={dehydrated:b,treeContext:Os!==null?{id:Pi,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},C=Jn(18,null,null,0),C.stateNode=b,C.return=a,a.child=C,zn=a,Ut=null,C=!0):C=!1}C||Ls(a)}if(b=a.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return lp(b)?a.lanes=32:a.lanes=536870912,null;Ui(a)}return b=u.children,u=u.fallback,d?(Ta(),d=a.mode,b=lf({mode:"hidden",children:b},d),u=Ps(u,d,o,null),b.return=a,u.return=a,b.sibling=u,a.child=b,d=a.child,d.memoizedState=Sg(o),d.childLanes=Ag(i,T,o),a.memoizedState=bg,u):(Ea(a),Ig(a,b))}if(C=i.memoizedState,C!==null&&(b=C.dehydrated,b!==null)){if(p)a.flags&256?(Ea(a),a.flags&=-257,a=Rg(i,a,o)):a.memoizedState!==null?(Ta(),a.child=i.child,a.flags|=128,a=null):(Ta(),d=u.fallback,b=a.mode,u=lf({mode:"visible",children:u.children},b),d=Ps(d,b,o,null),d.flags|=2,u.return=a,d.return=a,u.sibling=d,a.child=u,$o(a,i.child,null,o),u=a.child,u.memoizedState=Sg(o),u.childLanes=Ag(i,T,o),a.memoizedState=bg,a=d);else if(Ea(a),lp(b)){if(T=b.nextSibling&&b.nextSibling.dataset,T)var Y=T.dgst;T=Y,u=Error(r(419)),u.stack="",u.digest=T,yu({value:u,source:null,stack:null}),a=Rg(i,a,o)}else if(un||_u(i,a,o,!1),T=(o&i.childLanes)!==0,un||T){if(T=Ct,T!==null&&(u=o&-o,u=(u&42)!==0?1:Wr(u),u=(u&(T.suspendedLanes|o))!==0?0:u,u!==0&&u!==C.retryLane))throw C.retryLane=u,Uo(i,u),ir(T,i,u),ME;b.data==="$?"||Gg(),a=Rg(i,a,o)}else b.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=C.treeContext,Ut=Br(b.nextSibling),zn=a,dt=!0,ks=null,ai=!1,i!==null&&(wr[br++]=Pi,wr[br++]=Oi,wr[br++]=Os,Pi=i.id,Oi=i.overflow,Os=a),a=Ig(a,u.children),a.flags|=4096);return a}return d?(Ta(),d=u.fallback,b=a.mode,C=i.child,Y=C.sibling,u=Mi(C,{mode:"hidden",children:u.children}),u.subtreeFlags=C.subtreeFlags&65011712,Y!==null?d=Mi(Y,d):(d=Ps(d,b,o,null),d.flags|=2),d.return=a,u.return=a,u.sibling=d,a.child=u,u=d,d=a.child,b=i.child.memoizedState,b===null?b=Sg(o):(C=b.cachePool,C!==null?(Y=en._currentValue,C=C.parent!==Y?{parent:Y,pool:Y}:C):C=Rv(),b={baseLanes:b.baseLanes|o,cachePool:C}),d.memoizedState=b,d.childLanes=Ag(i,T,o),a.memoizedState=bg,u):(Ea(a),o=i.child,i=o.sibling,o=Mi(o,{mode:"visible",children:u.children}),o.return=a,o.sibling=null,i!==null&&(T=a.deletions,T===null?(a.deletions=[i],a.flags|=16):T.push(i)),a.child=o,a.memoizedState=null,o)}function Ig(i,a){return a=lf({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function lf(i,a){return i=Jn(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Rg(i,a,o){return $o(a,i.child,null,o),i=Ig(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function jE(i,a,o){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a),Gm(i.return,a,o)}function Dg(i,a,o,u,d){var p=i.memoizedState;p===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d}:(p.isBackwards=a,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=d)}function qE(i,a,o){var u=a.pendingProps,d=u.revealOrder,p=u.tail;if(vn(i,a,u.children,o),u=tn.current,(u&2)!==0)u=u&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&jE(i,o,a);else if(i.tag===19)jE(i,o,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(ue(tn,u),d){case"forwards":for(o=a.child,d=null;o!==null;)i=o.alternate,i!==null&&rf(i)===null&&(d=o),o=o.sibling;o=d,o===null?(d=a.child,a.child=null):(d=o.sibling,o.sibling=null),Dg(a,!1,d,o,p);break;case"backwards":for(o=null,d=a.child,a.child=null;d!==null;){if(i=d.alternate,i!==null&&rf(i)===null){a.child=d;break}i=d.sibling,d.sibling=o,o=d,d=i}Dg(a,!0,o,null,p);break;case"together":Dg(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function zi(i,a,o){if(i!==null&&(a.dependencies=i.dependencies),Ia|=a.lanes,(o&a.childLanes)===0)if(i!==null){if(_u(i,a,o,!1),(o&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,o=Mi(i,i.pendingProps),a.child=o,o.return=a;i.sibling!==null;)i=i.sibling,o=o.sibling=Mi(i,i.pendingProps),o.return=a;o.sibling=null}return a.child}function Cg(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Fh(i)))}function b1(i,a,o){switch(a.tag){case 3:wt(a,a.stateNode.containerInfo),ga(a,en,i.memoizedState.cache),pu();break;case 27:case 5:xt(a);break;case 4:wt(a,a.stateNode.containerInfo);break;case 10:ga(a,a.type,a.memoizedProps.value);break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Ea(a),a.flags|=128,null):(o&a.child.childLanes)!==0?FE(i,a,o):(Ea(a),i=zi(i,a,o),i!==null?i.sibling:null);Ea(a);break;case 19:var d=(i.flags&128)!==0;if(u=(o&a.childLanes)!==0,u||(_u(i,a,o,!1),u=(o&a.childLanes)!==0),d){if(u)return qE(i,a,o);a.flags|=128}if(d=a.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ue(tn,tn.current),u)break;return null;case 22:case 23:return a.lanes=0,kE(i,a,o);case 24:ga(a,en,i.memoizedState.cache)}return zi(i,a,o)}function HE(i,a,o){if(i!==null)if(i.memoizedProps!==a.pendingProps)un=!0;else{if(!Cg(i,o)&&(a.flags&128)===0)return un=!1,b1(i,a,o);un=(i.flags&131072)!==0}else un=!1,dt&&(a.flags&1048576)!==0&&Ev(a,Bh,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var u=a.elementType,d=u._init;if(u=d(u._payload),a.type=u,typeof u=="function")Um(u)?(i=js(u,i),a.tag=1,a=zE(null,a,u,i,o)):(a.tag=0,a=wg(null,a,u,i,o));else{if(u!=null){if(d=u.$$typeof,d===_e){a.tag=11,a=PE(null,a,u,i,o);break e}else if(d===x){a.tag=14,a=OE(null,a,u,i,o);break e}}throw a=Ge(u)||u,Error(r(306,a,""))}}return a;case 0:return wg(i,a,a.type,a.pendingProps,o);case 1:return u=a.type,d=js(u,a.pendingProps),zE(i,a,u,d,o);case 3:e:{if(wt(a,a.stateNode.containerInfo),i===null)throw Error(r(387));u=a.pendingProps;var p=a.memoizedState;d=p.element,Zm(i,a),Au(a,u,null,o);var T=a.memoizedState;if(u=T.cache,ga(a,en,u),u!==p.cache&&Ym(a,[en],o,!0),Su(),u=T.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=BE(i,a,u,o);break e}else if(u!==d){d=Er(Error(r(424)),a),yu(d),a=BE(i,a,u,o);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Ut=Br(i.firstChild),zn=a,dt=!0,ks=null,ai=!0,o=wE(a,null,u,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(pu(),u===d){a=zi(i,a,o);break e}vn(i,a,u,o)}a=a.child}return a;case 26:return of(i,a),i===null?(o=QT(a.type,null,a.pendingProps,null))?a.memoizedState=o:dt||(o=a.type,i=a.pendingProps,u=wf(Pe.current).createElement(o),u[oe]=a,u[ce]=i,Tn(u,o,i),Be(u),a.stateNode=u):a.memoizedState=QT(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return xt(a),i===null&&dt&&(u=a.stateNode=GT(a.type,a.pendingProps,Pe.current),zn=a,ai=!0,d=Ut,xa(a.type)?(up=d,Ut=Br(u.firstChild)):Ut=d),vn(i,a,a.pendingProps.children,o),of(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&dt&&((d=u=Ut)&&(u=W1(u,a.type,a.pendingProps,ai),u!==null?(a.stateNode=u,zn=a,Ut=Br(u.firstChild),ai=!1,d=!0):d=!1),d||Ls(a)),xt(a),d=a.type,p=a.pendingProps,T=i!==null?i.memoizedProps:null,u=p.children,ap(d,p)?u=null:T!==null&&ap(d,T)&&(a.flags|=32),a.memoizedState!==null&&(d=ig(i,a,g1,null,null,o),Ku._currentValue=d),of(i,a),vn(i,a,u,o),a.child;case 6:return i===null&&dt&&((i=o=Ut)&&(o=Z1(o,a.pendingProps,ai),o!==null?(a.stateNode=o,zn=a,Ut=null,i=!0):i=!1),i||Ls(a)),null;case 13:return FE(i,a,o);case 4:return wt(a,a.stateNode.containerInfo),u=a.pendingProps,i===null?a.child=$o(a,null,u,o):vn(i,a,u,o),a.child;case 11:return PE(i,a,a.type,a.pendingProps,o);case 7:return vn(i,a,a.pendingProps,o),a.child;case 8:return vn(i,a,a.pendingProps.children,o),a.child;case 12:return vn(i,a,a.pendingProps.children,o),a.child;case 10:return u=a.pendingProps,ga(a,a.type,u.value),vn(i,a,u.children,o),a.child;case 9:return d=a.type._context,u=a.pendingProps.children,zs(a),d=Rn(d),u=u(d),a.flags|=1,vn(i,a,u,o),a.child;case 14:return OE(i,a,a.type,a.pendingProps,o);case 15:return VE(i,a,a.type,a.pendingProps,o);case 19:return qE(i,a,o);case 31:return u=a.pendingProps,o=a.mode,u={mode:u.mode,children:u.children},i===null?(o=lf(u,o),o.ref=a.ref,a.child=o,o.return=a,a=o):(o=Mi(i.child,u),o.ref=a.ref,a.child=o,o.return=a,a=o),a;case 22:return kE(i,a,o);case 24:return zs(a),u=Rn(en),i===null?(d=$m(),d===null&&(d=Ct,p=Km(),d.pooledCache=p,p.refCount++,p!==null&&(d.pooledCacheLanes|=o),d=p),a.memoizedState={parent:u,cache:d},Wm(a),ga(a,en,d)):((i.lanes&o)!==0&&(Zm(i,a),Au(a,null,null,o),Su()),d=i.memoizedState,p=a.memoizedState,d.parent!==u?(d={parent:u,cache:u},a.memoizedState=d,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=d),ga(a,en,u)):(u=p.cache,ga(a,en,u),u!==d.cache&&Ym(a,[en],o,!0))),vn(i,a,a.pendingProps.children,o),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function Bi(i){i.flags|=4}function GE(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!JT(a)){if(a=Sr.current,a!==null&&((st&4194048)===st?si!==null:(st&62914560)!==st&&(st&536870912)===0||a!==si))throw wu=Xm,Dv;i.flags|=8192}}function uf(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?vs():536870912,i.lanes|=a,Jo|=a)}function Mu(i,a){if(!dt)switch(i.tailMode){case"hidden":a=i.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function kt(i){var a=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(a)for(var d=i.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=i,d=d.sibling;else for(d=i.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=i,d=d.sibling;return i.subtreeFlags|=u,i.childLanes=o,a}function S1(i,a,o){var u=a.pendingProps;switch(jm(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(a),null;case 1:return kt(a),null;case 3:return o=a.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),ki(en),cr(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(gu(a)?Bi(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,bv())),kt(a),null;case 26:return o=a.memoizedState,i===null?(Bi(a),o!==null?(kt(a),GE(a,o)):(kt(a),a.flags&=-16777217)):o?o!==i.memoizedState?(Bi(a),kt(a),GE(a,o)):(kt(a),a.flags&=-16777217):(i.memoizedProps!==u&&Bi(a),kt(a),a.flags&=-16777217),null;case 27:An(a),o=Pe.current;var d=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==u&&Bi(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return kt(a),null}i=De.current,gu(a)?Tv(a):(i=GT(d,u,o),a.stateNode=i,Bi(a))}return kt(a),null;case 5:if(An(a),o=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==u&&Bi(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return kt(a),null}if(i=De.current,gu(a))Tv(a);else{switch(d=wf(Pe.current),i){case 1:i=d.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=d.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=d.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?d.createElement("select",{is:u.is}):d.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?d.createElement(o,{is:u.is}):d.createElement(o)}}i[oe]=a,i[ce]=u;e:for(d=a.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break e;for(;d.sibling===null;){if(d.return===null||d.return===a)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}a.stateNode=i;e:switch(Tn(i,o,u),o){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Bi(a)}}return kt(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==u&&Bi(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(r(166));if(i=Pe.current,gu(a)){if(i=a.stateNode,o=a.memoizedProps,u=null,d=zn,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}i[oe]=a,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||UT(i.nodeValue,o)),i||Ls(a)}else i=wf(i).createTextNode(u),i[oe]=a,a.stateNode=i}return kt(a),null;case 13:if(u=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(d=gu(a),u!==null&&u.dehydrated!==null){if(i===null){if(!d)throw Error(r(318));if(d=a.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[oe]=a}else pu(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;kt(a),d=!1}else d=bv(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=d),d=!0;if(!d)return a.flags&256?(Ui(a),a):(Ui(a),null)}if(Ui(a),(a.flags&128)!==0)return a.lanes=o,a;if(o=u!==null,i=i!==null&&i.memoizedState!==null,o){u=a.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==d&&(u.flags|=2048)}return o!==i&&o&&(a.child.flags|=8192),uf(a,a.updateQueue),kt(a),null;case 4:return cr(),i===null&&ep(a.stateNode.containerInfo),kt(a),null;case 10:return ki(a.type),kt(a),null;case 19:if(me(tn),d=a.memoizedState,d===null)return kt(a),null;if(u=(a.flags&128)!==0,p=d.rendering,p===null)if(u)Mu(d,!1);else{if(zt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(p=rf(i),p!==null){for(a.flags|=128,Mu(d,!1),i=p.updateQueue,a.updateQueue=i,uf(a,i),a.subtreeFlags=0,i=o,o=a.child;o!==null;)vv(o,i),o=o.sibling;return ue(tn,tn.current&1|2),a.child}i=i.sibling}d.tail!==null&&Pn()>ff&&(a.flags|=128,u=!0,Mu(d,!1),a.lanes=4194304)}else{if(!u)if(i=rf(p),i!==null){if(a.flags|=128,u=!0,i=i.updateQueue,a.updateQueue=i,uf(a,i),Mu(d,!0),d.tail===null&&d.tailMode==="hidden"&&!p.alternate&&!dt)return kt(a),null}else 2*Pn()-d.renderingStartTime>ff&&o!==536870912&&(a.flags|=128,u=!0,Mu(d,!1),a.lanes=4194304);d.isBackwards?(p.sibling=a.child,a.child=p):(i=d.last,i!==null?i.sibling=p:a.child=p,d.last=p)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=Pn(),a.sibling=null,i=tn.current,ue(tn,u?i&1|2:i&1),a):(kt(a),null);case 22:case 23:return Ui(a),ng(),u=a.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(o&536870912)!==0&&(a.flags&128)===0&&(kt(a),a.subtreeFlags&6&&(a.flags|=8192)):kt(a),o=a.updateQueue,o!==null&&uf(a,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==o&&(a.flags|=2048),i!==null&&me(Bs),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),ki(en),kt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function A1(i,a){switch(jm(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return ki(en),cr(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return An(a),null;case 13:if(Ui(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));pu()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return me(tn),null;case 4:return cr(),null;case 10:return ki(a.type),null;case 22:case 23:return Ui(a),ng(),i!==null&&me(Bs),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return ki(en),null;case 25:return null;default:return null}}function YE(i,a){switch(jm(a),a.tag){case 3:ki(en),cr();break;case 26:case 27:case 5:An(a);break;case 4:cr();break;case 13:Ui(a);break;case 19:me(tn);break;case 10:ki(a.type);break;case 22:case 23:Ui(a),ng(),i!==null&&me(Bs);break;case 24:ki(en)}}function Pu(i,a){try{var o=a.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&i)===i){u=void 0;var p=o.create,T=o.inst;u=p(),T.destroy=u}o=o.next}while(o!==d)}}catch(b){Rt(a,a.return,b)}}function wa(i,a,o){try{var u=a.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var p=d.next;u=p;do{if((u.tag&i)===i){var T=u.inst,b=T.destroy;if(b!==void 0){T.destroy=void 0,d=a;var C=o,Y=b;try{Y()}catch(re){Rt(d,C,re)}}}u=u.next}while(u!==p)}}catch(re){Rt(a,a.return,re)}}function KE(i){var a=i.updateQueue;if(a!==null){var o=i.stateNode;try{Ov(a,o)}catch(u){Rt(i,i.return,u)}}}function QE(i,a,o){o.props=js(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){Rt(i,a,u)}}function Ou(i,a){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(d){Rt(i,a,d)}}function oi(i,a){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(d){Rt(i,a,d)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){Rt(i,a,d)}else o.current=null}function $E(i){var a=i.type,o=i.memoizedProps,u=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(d){Rt(i,i.return,d)}}function xg(i,a,o){try{var u=i.stateNode;Y1(u,i.type,o,a),u[ce]=a}catch(d){Rt(i,i.return,d)}}function XE(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&xa(i.type)||i.tag===4}function Ng(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||XE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&xa(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Mg(i,a,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,a?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,a):(a=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,a.appendChild(i),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=Tf));else if(u!==4&&(u===27&&xa(i.type)&&(o=i.stateNode,a=null),i=i.child,i!==null))for(Mg(i,a,o),i=i.sibling;i!==null;)Mg(i,a,o),i=i.sibling}function cf(i,a,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,a?o.insertBefore(i,a):o.appendChild(i);else if(u!==4&&(u===27&&xa(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(cf(i,a,o),i=i.sibling;i!==null;)cf(i,a,o),i=i.sibling}function WE(i){var a=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,d=a.attributes;d.length;)a.removeAttributeNode(d[0]);Tn(a,u,o),a[oe]=i,a[ce]=o}catch(p){Rt(i,i.return,p)}}var Fi=!1,Ft=!1,Pg=!1,ZE=typeof WeakSet=="function"?WeakSet:Set,cn=null;function I1(i,a){if(i=i.containerInfo,rp=Df,i=uv(i),Nm(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var T=0,b=-1,C=-1,Y=0,re=0,se=i,X=null;t:for(;;){for(var W;se!==o||d!==0&&se.nodeType!==3||(b=T+d),se!==p||u!==0&&se.nodeType!==3||(C=T+u),se.nodeType===3&&(T+=se.nodeValue.length),(W=se.firstChild)!==null;)X=se,se=W;for(;;){if(se===i)break t;if(X===o&&++Y===d&&(b=T),X===p&&++re===u&&(C=T),(W=se.nextSibling)!==null)break;se=X,X=se.parentNode}se=W}o=b===-1||C===-1?null:{start:b,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(ip={focusedElem:i,selectionRange:o},Df=!1,cn=a;cn!==null;)if(a=cn,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,cn=i;else for(;cn!==null;){switch(a=cn,p=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&p!==null){i=void 0,o=a,d=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Ue=js(o.type,d,o.elementType===o.type);i=u.getSnapshotBeforeUpdate(Ue,p),u.__reactInternalSnapshotBeforeUpdate=i}catch(Oe){Rt(o,o.return,Oe)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,o=i.nodeType,o===9)op(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":op(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,cn=i;break}cn=a.return}}function JE(i,a,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ba(i,o),u&4&&Pu(5,o);break;case 1:if(ba(i,o),u&4)if(i=o.stateNode,a===null)try{i.componentDidMount()}catch(T){Rt(o,o.return,T)}else{var d=js(o.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(d,a,i.__reactInternalSnapshotBeforeUpdate)}catch(T){Rt(o,o.return,T)}}u&64&&KE(o),u&512&&Ou(o,o.return);break;case 3:if(ba(i,o),u&64&&(i=o.updateQueue,i!==null)){if(a=null,o.child!==null)switch(o.child.tag){case 27:case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}try{Ov(i,a)}catch(T){Rt(o,o.return,T)}}break;case 27:a===null&&u&4&&WE(o);case 26:case 5:ba(i,o),a===null&&u&4&&$E(o),u&512&&Ou(o,o.return);break;case 12:ba(i,o);break;case 13:ba(i,o),u&4&&nT(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=V1.bind(null,o),J1(i,o))));break;case 22:if(u=o.memoizedState!==null||Fi,!u){a=a!==null&&a.memoizedState!==null||Ft,d=Fi;var p=Ft;Fi=u,(Ft=a)&&!p?Sa(i,o,(o.subtreeFlags&8772)!==0):ba(i,o),Fi=d,Ft=p}break;case 30:break;default:ba(i,o)}}function eT(i){var a=i.alternate;a!==null&&(i.alternate=null,eT(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&we(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Mt=null,Hn=!1;function ji(i,a,o){for(o=o.child;o!==null;)tT(i,a,o),o=o.sibling}function tT(i,a,o){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(ct,o)}catch{}switch(o.tag){case 26:Ft||oi(o,a),ji(i,a,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ft||oi(o,a);var u=Mt,d=Hn;xa(o.type)&&(Mt=o.stateNode,Hn=!1),ji(i,a,o),qu(o.stateNode),Mt=u,Hn=d;break;case 5:Ft||oi(o,a);case 6:if(u=Mt,d=Hn,Mt=null,ji(i,a,o),Mt=u,Hn=d,Mt!==null)if(Hn)try{(Mt.nodeType===9?Mt.body:Mt.nodeName==="HTML"?Mt.ownerDocument.body:Mt).removeChild(o.stateNode)}catch(p){Rt(o,a,p)}else try{Mt.removeChild(o.stateNode)}catch(p){Rt(o,a,p)}break;case 18:Mt!==null&&(Hn?(i=Mt,qT(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),Wu(i)):qT(Mt,o.stateNode));break;case 4:u=Mt,d=Hn,Mt=o.stateNode.containerInfo,Hn=!0,ji(i,a,o),Mt=u,Hn=d;break;case 0:case 11:case 14:case 15:Ft||wa(2,o,a),Ft||wa(4,o,a),ji(i,a,o);break;case 1:Ft||(oi(o,a),u=o.stateNode,typeof u.componentWillUnmount=="function"&&QE(o,a,u)),ji(i,a,o);break;case 21:ji(i,a,o);break;case 22:Ft=(u=Ft)||o.memoizedState!==null,ji(i,a,o),Ft=u;break;default:ji(i,a,o)}}function nT(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Wu(i)}catch(o){Rt(a,a.return,o)}}function R1(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new ZE),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new ZE),a;default:throw Error(r(435,i.tag))}}function Og(i,a){var o=R1(i);a.forEach(function(u){var d=k1.bind(null,i,u);o.has(u)||(o.add(u),u.then(d,d))})}function er(i,a){var o=a.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u],p=i,T=a,b=T;e:for(;b!==null;){switch(b.tag){case 27:if(xa(b.type)){Mt=b.stateNode,Hn=!1;break e}break;case 5:Mt=b.stateNode,Hn=!1;break e;case 3:case 4:Mt=b.stateNode.containerInfo,Hn=!0;break e}b=b.return}if(Mt===null)throw Error(r(160));tT(p,T,d),Mt=null,Hn=!1,p=d.alternate,p!==null&&(p.return=null),d.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)rT(a,i),a=a.sibling}var zr=null;function rT(i,a){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:er(a,i),tr(i),u&4&&(wa(3,i,i.return),Pu(3,i),wa(5,i,i.return));break;case 1:er(a,i),tr(i),u&512&&(Ft||o===null||oi(o,o.return)),u&64&&Fi&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var d=zr;if(er(a,i),tr(i),u&512&&(Ft||o===null||oi(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){e:{u=i.type,o=i.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":p=d.getElementsByTagName("title")[0],(!p||p[Ie]||p[oe]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=d.createElement(u),d.head.insertBefore(p,d.querySelector("head > title"))),Tn(p,u,o),p[oe]=i,Be(p),u=p;break e;case"link":var T=WT("link","href",d).get(u+(o.href||""));if(T){for(var b=0;b<T.length;b++)if(p=T[b],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(b,1);break t}}p=d.createElement(u),Tn(p,u,o),d.head.appendChild(p);break;case"meta":if(T=WT("meta","content",d).get(u+(o.content||""))){for(b=0;b<T.length;b++)if(p=T[b],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(b,1);break t}}p=d.createElement(u),Tn(p,u,o),d.head.appendChild(p);break;default:throw Error(r(468,u))}p[oe]=i,Be(p),u=p}i.stateNode=u}else ZT(d,i.type,i.stateNode);else i.stateNode=XT(d,u,i.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?ZT(d,i.type,i.stateNode):XT(d,u,i.memoizedProps)):u===null&&i.stateNode!==null&&xg(i,i.memoizedProps,o.memoizedProps)}break;case 27:er(a,i),tr(i),u&512&&(Ft||o===null||oi(o,o.return)),o!==null&&u&4&&xg(i,i.memoizedProps,o.memoizedProps);break;case 5:if(er(a,i),tr(i),u&512&&(Ft||o===null||oi(o,o.return)),i.flags&32){d=i.stateNode;try{pr(d,"")}catch(W){Rt(i,i.return,W)}}u&4&&i.stateNode!=null&&(d=i.memoizedProps,xg(i,d,o!==null?o.memoizedProps:d)),u&1024&&(Pg=!0);break;case 6:if(er(a,i),tr(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(W){Rt(i,i.return,W)}}break;case 3:if(Af=null,d=zr,zr=bf(a.containerInfo),er(a,i),zr=d,tr(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Wu(a.containerInfo)}catch(W){Rt(i,i.return,W)}Pg&&(Pg=!1,iT(i));break;case 4:u=zr,zr=bf(i.stateNode.containerInfo),er(a,i),tr(i),zr=u;break;case 12:er(a,i),tr(i);break;case 13:er(a,i),tr(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Bg=Pn()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Og(i,u)));break;case 22:d=i.memoizedState!==null;var C=o!==null&&o.memoizedState!==null,Y=Fi,re=Ft;if(Fi=Y||d,Ft=re||C,er(a,i),Ft=re,Fi=Y,tr(i),u&8192)e:for(a=i.stateNode,a._visibility=d?a._visibility&-2:a._visibility|1,d&&(o===null||C||Fi||Ft||qs(i)),o=null,a=i;;){if(a.tag===5||a.tag===26){if(o===null){C=o=a;try{if(p=C.stateNode,d)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{b=C.stateNode;var se=C.memoizedProps.style,X=se!=null&&se.hasOwnProperty("display")?se.display:null;b.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(W){Rt(C,C.return,W)}}}else if(a.tag===6){if(o===null){C=a;try{C.stateNode.nodeValue=d?"":C.memoizedProps}catch(W){Rt(C,C.return,W)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;o===a&&(o=null),a=a.return}o===a&&(o=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Og(i,o))));break;case 19:er(a,i),tr(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Og(i,u)));break;case 30:break;case 21:break;default:er(a,i),tr(i)}}function tr(i){var a=i.flags;if(a&2){try{for(var o,u=i.return;u!==null;){if(XE(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var d=o.stateNode,p=Ng(i);cf(i,p,d);break;case 5:var T=o.stateNode;o.flags&32&&(pr(T,""),o.flags&=-33);var b=Ng(i);cf(i,b,T);break;case 3:case 4:var C=o.stateNode.containerInfo,Y=Ng(i);Mg(i,Y,C);break;default:throw Error(r(161))}}catch(re){Rt(i,i.return,re)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function iT(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;iT(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function ba(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)JE(i,a.alternate,a),a=a.sibling}function qs(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:wa(4,a,a.return),qs(a);break;case 1:oi(a,a.return);var o=a.stateNode;typeof o.componentWillUnmount=="function"&&QE(a,a.return,o),qs(a);break;case 27:qu(a.stateNode);case 26:case 5:oi(a,a.return),qs(a);break;case 22:a.memoizedState===null&&qs(a);break;case 30:qs(a);break;default:qs(a)}i=i.sibling}}function Sa(i,a,o){for(o=o&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,d=i,p=a,T=p.flags;switch(p.tag){case 0:case 11:case 15:Sa(d,p,o),Pu(4,p);break;case 1:if(Sa(d,p,o),u=p,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(Y){Rt(u,u.return,Y)}if(u=p,d=u.updateQueue,d!==null){var b=u.stateNode;try{var C=d.shared.hiddenCallbacks;if(C!==null)for(d.shared.hiddenCallbacks=null,d=0;d<C.length;d++)Pv(C[d],b)}catch(Y){Rt(u,u.return,Y)}}o&&T&64&&KE(p),Ou(p,p.return);break;case 27:WE(p);case 26:case 5:Sa(d,p,o),o&&u===null&&T&4&&$E(p),Ou(p,p.return);break;case 12:Sa(d,p,o);break;case 13:Sa(d,p,o),o&&T&4&&nT(d,p);break;case 22:p.memoizedState===null&&Sa(d,p,o),Ou(p,p.return);break;case 30:break;default:Sa(d,p,o)}a=a.sibling}}function Vg(i,a){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&vu(o))}function kg(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&vu(i))}function li(i,a,o,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)aT(i,a,o,u),a=a.sibling}function aT(i,a,o,u){var d=a.flags;switch(a.tag){case 0:case 11:case 15:li(i,a,o,u),d&2048&&Pu(9,a);break;case 1:li(i,a,o,u);break;case 3:li(i,a,o,u),d&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&vu(i)));break;case 12:if(d&2048){li(i,a,o,u),i=a.stateNode;try{var p=a.memoizedProps,T=p.id,b=p.onPostCommit;typeof b=="function"&&b(T,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(C){Rt(a,a.return,C)}}else li(i,a,o,u);break;case 13:li(i,a,o,u);break;case 23:break;case 22:p=a.stateNode,T=a.alternate,a.memoizedState!==null?p._visibility&2?li(i,a,o,u):Vu(i,a):p._visibility&2?li(i,a,o,u):(p._visibility|=2,Xo(i,a,o,u,(a.subtreeFlags&10256)!==0)),d&2048&&Vg(T,a);break;case 24:li(i,a,o,u),d&2048&&kg(a.alternate,a);break;default:li(i,a,o,u)}}function Xo(i,a,o,u,d){for(d=d&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var p=i,T=a,b=o,C=u,Y=T.flags;switch(T.tag){case 0:case 11:case 15:Xo(p,T,b,C,d),Pu(8,T);break;case 23:break;case 22:var re=T.stateNode;T.memoizedState!==null?re._visibility&2?Xo(p,T,b,C,d):Vu(p,T):(re._visibility|=2,Xo(p,T,b,C,d)),d&&Y&2048&&Vg(T.alternate,T);break;case 24:Xo(p,T,b,C,d),d&&Y&2048&&kg(T.alternate,T);break;default:Xo(p,T,b,C,d)}a=a.sibling}}function Vu(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var o=i,u=a,d=u.flags;switch(u.tag){case 22:Vu(o,u),d&2048&&Vg(u.alternate,u);break;case 24:Vu(o,u),d&2048&&kg(u.alternate,u);break;default:Vu(o,u)}a=a.sibling}}var ku=8192;function Wo(i){if(i.subtreeFlags&ku)for(i=i.child;i!==null;)sT(i),i=i.sibling}function sT(i){switch(i.tag){case 26:Wo(i),i.flags&ku&&i.memoizedState!==null&&fD(zr,i.memoizedState,i.memoizedProps);break;case 5:Wo(i);break;case 3:case 4:var a=zr;zr=bf(i.stateNode.containerInfo),Wo(i),zr=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=ku,ku=16777216,Wo(i),ku=a):Wo(i));break;default:Wo(i)}}function oT(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function Lu(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];cn=u,uT(u,i)}oT(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)lT(i),i=i.sibling}function lT(i){switch(i.tag){case 0:case 11:case 15:Lu(i),i.flags&2048&&wa(9,i,i.return);break;case 3:Lu(i);break;case 12:Lu(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,hf(i)):Lu(i);break;default:Lu(i)}}function hf(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];cn=u,uT(u,i)}oT(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:wa(8,a,a.return),hf(a);break;case 22:o=a.stateNode,o._visibility&2&&(o._visibility&=-3,hf(a));break;default:hf(a)}i=i.sibling}}function uT(i,a){for(;cn!==null;){var o=cn;switch(o.tag){case 0:case 11:case 15:wa(8,o,a);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:vu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,cn=u;else e:for(o=i;cn!==null;){u=cn;var d=u.sibling,p=u.return;if(eT(u),u===o){cn=null;break e}if(d!==null){d.return=p,cn=d;break e}cn=p}}}var D1={getCacheForType:function(i){var a=Rn(en),o=a.data.get(i);return o===void 0&&(o=i(),a.data.set(i,o)),o}},C1=typeof WeakMap=="function"?WeakMap:Map,pt=0,Ct=null,We=null,st=0,yt=0,nr=null,Aa=!1,Zo=!1,Lg=!1,qi=0,zt=0,Ia=0,Hs=0,Ug=0,Ar=0,Jo=0,Uu=null,Gn=null,zg=!1,Bg=0,ff=1/0,df=null,Ra=null,En=0,Da=null,el=null,tl=0,Fg=0,jg=null,cT=null,zu=0,qg=null;function rr(){if((pt&2)!==0&&st!==0)return st&-st;if($.T!==null){var i=jo;return i!==0?i:Xg()}return N()}function hT(){Ar===0&&(Ar=(st&536870912)===0||dt?Si():536870912);var i=Sr.current;return i!==null&&(i.flags|=32),Ar}function ir(i,a,o){(i===Ct&&(yt===2||yt===9)||i.cancelPendingCommit!==null)&&(nl(i,0),Ca(i,st,Ar,!1)),Or(i,o),((pt&2)===0||i!==Ct)&&(i===Ct&&((pt&2)===0&&(Hs|=o),zt===4&&Ca(i,st,Ar,!1)),ui(i))}function fT(i,a,o){if((pt&6)!==0)throw Error(r(327));var u=!o&&(a&124)===0&&(a&i.expiredLanes)===0||dr(i,a),d=u?M1(i,a):Yg(i,a,!0),p=u;do{if(d===0){Zo&&!u&&Ca(i,a,0,!1);break}else{if(o=i.current.alternate,p&&!x1(o)){d=Yg(i,a,!1),p=!1;continue}if(d===2){if(p=a,i.errorRecoveryDisabledLanes&p)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;e:{var b=i;d=Uu;var C=b.current.memoizedState.isDehydrated;if(C&&(nl(b,T).flags|=256),T=Yg(b,T,!1),T!==2){if(Lg&&!C){b.errorRecoveryDisabledLanes|=p,Hs|=p,d=4;break e}p=Gn,Gn=d,p!==null&&(Gn===null?Gn=p:Gn.push.apply(Gn,p))}d=T}if(p=!1,d!==2)continue}}if(d===1){nl(i,0),Ca(i,a,0,!0);break}e:{switch(u=i,p=d,p){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Ca(u,a,Ar,!Aa);break e;case 2:Gn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(d=Bg+300-Pn(),10<d)){if(Ca(u,a,Ar,!Aa),bi(u,0,!0)!==0)break e;u.timeoutHandle=FT(dT.bind(null,u,o,Gn,df,zg,a,Ar,Hs,Jo,Aa,p,2,-0,0),d);break e}dT(u,o,Gn,df,zg,a,Ar,Hs,Jo,Aa,p,0,-0,0)}}break}while(!0);ui(i)}function dT(i,a,o,u,d,p,T,b,C,Y,re,se,X,W){if(i.timeoutHandle=-1,se=a.subtreeFlags,(se&8192||(se&16785408)===16785408)&&(Yu={stylesheets:null,count:0,unsuspend:hD},sT(a),se=dD(),se!==null)){i.cancelPendingCommit=se(ET.bind(null,i,a,p,o,u,d,T,b,C,re,1,X,W)),Ca(i,p,T,!Y);return}ET(i,a,p,o,u,d,T,b,C)}function x1(i){for(var a=i;;){var o=a.tag;if((o===0||o===11||o===15)&&a.flags&16384&&(o=a.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var d=o[u],p=d.getSnapshot;d=d.value;try{if(!Zn(p(),d))return!1}catch{return!1}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ca(i,a,o,u){a&=~Ug,a&=~Hs,i.suspendedLanes|=a,i.pingedLanes&=~a,u&&(i.warmLanes|=a),u=i.expirationTimes;for(var d=a;0<d;){var p=31-Ht(d),T=1<<p;u[p]=-1,d&=~T}o!==0&&On(i,o,a)}function mf(){return(pt&6)===0?(Bu(0),!1):!0}function Hg(){if(We!==null){if(yt===0)var i=We.return;else i=We,Vi=Us=null,og(i),Qo=null,xu=0,i=We;for(;i!==null;)YE(i.alternate,i),i=i.return;We=null}}function nl(i,a){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,Q1(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Hg(),Ct=i,We=o=Mi(i.current,null),st=a,yt=0,nr=null,Aa=!1,Zo=dr(i,a),Lg=!1,Jo=Ar=Ug=Hs=Ia=zt=0,Gn=Uu=null,zg=!1,(a&8)!==0&&(a|=a&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=a;0<u;){var d=31-Ht(u),p=1<<d;a|=i[d],u&=~p}return qi=a,Vh(),o}function mT(i,a){Qe=null,$.H=ef,a===Tu||a===Hh?(a=Nv(),yt=3):a===Dv?(a=Nv(),yt=4):yt=a===ME?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,nr=a,We===null&&(zt=1,sf(i,Er(a,i.current)))}function gT(){var i=$.H;return $.H=ef,i===null?ef:i}function pT(){var i=$.A;return $.A=D1,i}function Gg(){zt=4,Aa||(st&4194048)!==st&&Sr.current!==null||(Zo=!0),(Ia&134217727)===0&&(Hs&134217727)===0||Ct===null||Ca(Ct,st,Ar,!1)}function Yg(i,a,o){var u=pt;pt|=2;var d=gT(),p=pT();(Ct!==i||st!==a)&&(df=null,nl(i,a)),a=!1;var T=zt;e:do try{if(yt!==0&&We!==null){var b=We,C=nr;switch(yt){case 8:Hg(),T=6;break e;case 3:case 2:case 9:case 6:Sr.current===null&&(a=!0);var Y=yt;if(yt=0,nr=null,rl(i,b,C,Y),o&&Zo){T=0;break e}break;default:Y=yt,yt=0,nr=null,rl(i,b,C,Y)}}N1(),T=zt;break}catch(re){mT(i,re)}while(!0);return a&&i.shellSuspendCounter++,Vi=Us=null,pt=u,$.H=d,$.A=p,We===null&&(Ct=null,st=0,Vh()),T}function N1(){for(;We!==null;)yT(We)}function M1(i,a){var o=pt;pt|=2;var u=gT(),d=pT();Ct!==i||st!==a?(df=null,ff=Pn()+500,nl(i,a)):Zo=dr(i,a);e:do try{if(yt!==0&&We!==null){a=We;var p=nr;t:switch(yt){case 1:yt=0,nr=null,rl(i,a,p,1);break;case 2:case 9:if(Cv(p)){yt=0,nr=null,_T(a);break}a=function(){yt!==2&&yt!==9||Ct!==i||(yt=7),ui(i)},p.then(a,a);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:Cv(p)?(yt=0,nr=null,_T(a)):(yt=0,nr=null,rl(i,a,p,7));break;case 5:var T=null;switch(We.tag){case 26:T=We.memoizedState;case 5:case 27:var b=We;if(!T||JT(T)){yt=0,nr=null;var C=b.sibling;if(C!==null)We=C;else{var Y=b.return;Y!==null?(We=Y,gf(Y)):We=null}break t}}yt=0,nr=null,rl(i,a,p,5);break;case 6:yt=0,nr=null,rl(i,a,p,6);break;case 8:Hg(),zt=6;break e;default:throw Error(r(462))}}P1();break}catch(re){mT(i,re)}while(!0);return Vi=Us=null,$.H=u,$.A=d,pt=o,We!==null?0:(Ct=null,st=0,Vh(),zt)}function P1(){for(;We!==null&&!ys();)yT(We)}function yT(i){var a=HE(i.alternate,i,qi);i.memoizedProps=i.pendingProps,a===null?gf(i):We=a}function _T(i){var a=i,o=a.alternate;switch(a.tag){case 15:case 0:a=UE(o,a,a.pendingProps,a.type,void 0,st);break;case 11:a=UE(o,a,a.pendingProps,a.type.render,a.ref,st);break;case 5:og(a);default:YE(o,a),a=We=vv(a,qi),a=HE(o,a,qi)}i.memoizedProps=i.pendingProps,a===null?gf(i):We=a}function rl(i,a,o,u){Vi=Us=null,og(a),Qo=null,xu=0;var d=a.return;try{if(w1(i,d,a,o,st)){zt=1,sf(i,Er(o,i.current)),We=null;return}}catch(p){if(d!==null)throw We=d,p;zt=1,sf(i,Er(o,i.current)),We=null;return}a.flags&32768?(dt||u===1?i=!0:Zo||(st&536870912)!==0?i=!1:(Aa=i=!0,(u===2||u===9||u===3||u===6)&&(u=Sr.current,u!==null&&u.tag===13&&(u.flags|=16384))),vT(a,i)):gf(a)}function gf(i){var a=i;do{if((a.flags&32768)!==0){vT(a,Aa);return}i=a.return;var o=S1(a.alternate,a,qi);if(o!==null){We=o;return}if(a=a.sibling,a!==null){We=a;return}We=a=i}while(a!==null);zt===0&&(zt=5)}function vT(i,a){do{var o=A1(i.alternate,i);if(o!==null){o.flags&=32767,We=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!a&&(i=i.sibling,i!==null)){We=i;return}We=i=o}while(i!==null);zt=6,We=null}function ET(i,a,o,u,d,p,T,b,C){i.cancelPendingCommit=null;do pf();while(En!==0);if((pt&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(p=a.lanes|a.childLanes,p|=km,la(i,o,p,T,b,C),i===Ct&&(We=Ct=null,st=0),el=a,Da=i,tl=o,Fg=p,jg=d,cT=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,L1(wi,function(){return AT(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=$.T,$.T=null,d=fe.p,fe.p=2,T=pt,pt|=4;try{I1(i,a,o)}finally{pt=T,fe.p=d,$.T=u}}En=1,TT(),wT(),bT()}}function TT(){if(En===1){En=0;var i=Da,a=el,o=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||o){o=$.T,$.T=null;var u=fe.p;fe.p=2;var d=pt;pt|=4;try{rT(a,i);var p=ip,T=uv(i.containerInfo),b=p.focusedElem,C=p.selectionRange;if(T!==b&&b&&b.ownerDocument&&lv(b.ownerDocument.documentElement,b)){if(C!==null&&Nm(b)){var Y=C.start,re=C.end;if(re===void 0&&(re=Y),"selectionStart"in b)b.selectionStart=Y,b.selectionEnd=Math.min(re,b.value.length);else{var se=b.ownerDocument||document,X=se&&se.defaultView||window;if(X.getSelection){var W=X.getSelection(),Ue=b.textContent.length,Oe=Math.min(C.start,Ue),It=C.end===void 0?Oe:Math.min(C.end,Ue);!W.extend&&Oe>It&&(T=It,It=Oe,Oe=T);var B=ov(b,Oe),V=ov(b,It);if(B&&V&&(W.rangeCount!==1||W.anchorNode!==B.node||W.anchorOffset!==B.offset||W.focusNode!==V.node||W.focusOffset!==V.offset)){var G=se.createRange();G.setStart(B.node,B.offset),W.removeAllRanges(),Oe>It?(W.addRange(G),W.extend(V.node,V.offset)):(G.setEnd(V.node,V.offset),W.addRange(G))}}}}for(se=[],W=b;W=W.parentNode;)W.nodeType===1&&se.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<se.length;b++){var ae=se[b];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Df=!!rp,ip=rp=null}finally{pt=d,fe.p=u,$.T=o}}i.current=a,En=2}}function wT(){if(En===2){En=0;var i=Da,a=el,o=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||o){o=$.T,$.T=null;var u=fe.p;fe.p=2;var d=pt;pt|=4;try{JE(i,a.alternate,a)}finally{pt=d,fe.p=u,$.T=o}}En=3}}function bT(){if(En===4||En===3){En=0,bo();var i=Da,a=el,o=tl,u=cT;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?En=5:(En=0,el=Da=null,ST(i,i.pendingLanes));var d=i.pendingLanes;if(d===0&&(Ra=null),ua(o),a=a.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(ct,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=$.T,d=fe.p,fe.p=2,$.T=null;try{for(var p=i.onRecoverableError,T=0;T<u.length;T++){var b=u[T];p(b.value,{componentStack:b.stack})}}finally{$.T=a,fe.p=d}}(tl&3)!==0&&pf(),ui(i),d=i.pendingLanes,(o&4194090)!==0&&(d&42)!==0?i===qg?zu++:(zu=0,qg=i):zu=0,Bu(0)}}function ST(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,vu(a)))}function pf(i){return TT(),wT(),bT(),AT()}function AT(){if(En!==5)return!1;var i=Da,a=Fg;Fg=0;var o=ua(tl),u=$.T,d=fe.p;try{fe.p=32>o?32:o,$.T=null,o=jg,jg=null;var p=Da,T=tl;if(En=0,el=Da=null,tl=0,(pt&6)!==0)throw Error(r(331));var b=pt;if(pt|=4,lT(p.current),aT(p,p.current,T,o),pt=b,Bu(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(ct,p)}catch{}return!0}finally{fe.p=d,$.T=u,ST(i,a)}}function IT(i,a,o){a=Er(o,a),a=Tg(i.stateNode,a,2),i=_a(i,a,2),i!==null&&(Or(i,2),ui(i))}function Rt(i,a,o){if(i.tag===3)IT(i,i,o);else for(;a!==null;){if(a.tag===3){IT(a,i,o);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ra===null||!Ra.has(u))){i=Er(o,i),o=xE(2),u=_a(a,o,2),u!==null&&(NE(o,u,a,i),Or(u,2),ui(u));break}}a=a.return}}function Kg(i,a,o){var u=i.pingCache;if(u===null){u=i.pingCache=new C1;var d=new Set;u.set(a,d)}else d=u.get(a),d===void 0&&(d=new Set,u.set(a,d));d.has(o)||(Lg=!0,d.add(o),i=O1.bind(null,i,a,o),a.then(i,i))}function O1(i,a,o){var u=i.pingCache;u!==null&&u.delete(a),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,Ct===i&&(st&o)===o&&(zt===4||zt===3&&(st&62914560)===st&&300>Pn()-Bg?(pt&2)===0&&nl(i,0):Ug|=o,Jo===st&&(Jo=0)),ui(i)}function RT(i,a){a===0&&(a=vs()),i=Uo(i,a),i!==null&&(Or(i,a),ui(i))}function V1(i){var a=i.memoizedState,o=0;a!==null&&(o=a.retryLane),RT(i,o)}function k1(i,a){var o=0;switch(i.tag){case 13:var u=i.stateNode,d=i.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(a),RT(i,o)}function L1(i,a){return Ti(i,a)}var yf=null,il=null,Qg=!1,_f=!1,$g=!1,Gs=0;function ui(i){i!==il&&i.next===null&&(il===null?yf=il=i:il=il.next=i),_f=!0,Qg||(Qg=!0,z1())}function Bu(i,a){if(!$g&&_f){$g=!0;do for(var o=!1,u=yf;u!==null;){if(i!==0){var d=u.pendingLanes;if(d===0)var p=0;else{var T=u.suspendedLanes,b=u.pingedLanes;p=(1<<31-Ht(42|i)+1)-1,p&=d&~(T&~b),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,NT(u,p))}else p=st,p=bi(u,u===Ct?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||dr(u,p)||(o=!0,NT(u,p));u=u.next}while(o);$g=!1}}function U1(){DT()}function DT(){_f=Qg=!1;var i=0;Gs!==0&&(K1()&&(i=Gs),Gs=0);for(var a=Pn(),o=null,u=yf;u!==null;){var d=u.next,p=CT(u,a);p===0?(u.next=null,o===null?yf=d:o.next=d,d===null&&(il=o)):(o=u,(i!==0||(p&3)!==0)&&(_f=!0)),u=d}Bu(i)}function CT(i,a){for(var o=i.suspendedLanes,u=i.pingedLanes,d=i.expirationTimes,p=i.pendingLanes&-62914561;0<p;){var T=31-Ht(p),b=1<<T,C=d[T];C===-1?((b&o)===0||(b&u)!==0)&&(d[T]=oa(b,a)):C<=a&&(i.expiredLanes|=b),p&=~b}if(a=Ct,o=st,o=bi(i,i===a?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===a&&(yt===2||yt===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Mn(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||dr(i,o)){if(a=o&-o,a===i.callbackPriority)return a;switch(u!==null&&Mn(u),ua(o)){case 2:case 8:o=ia;break;case 32:o=wi;break;case 268435456:o=hr;break;default:o=wi}return u=xT.bind(null,i),o=Ti(o,u),i.callbackPriority=a,i.callbackNode=o,a}return u!==null&&u!==null&&Mn(u),i.callbackPriority=2,i.callbackNode=null,2}function xT(i,a){if(En!==0&&En!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(pf()&&i.callbackNode!==o)return null;var u=st;return u=bi(i,i===Ct?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(fT(i,u,a),CT(i,Pn()),i.callbackNode!=null&&i.callbackNode===o?xT.bind(null,i):null)}function NT(i,a){if(pf())return null;fT(i,a,!0)}function z1(){$1(function(){(pt&6)!==0?Ti(_s,U1):DT()})}function Xg(){return Gs===0&&(Gs=Si()),Gs}function MT(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Io(""+i)}function PT(i,a){var o=a.ownerDocument.createElement("input");return o.name=a.name,o.value=a.value,i.id&&o.setAttribute("form",i.id),a.parentNode.insertBefore(o,a),i=new FormData(i),o.parentNode.removeChild(o),i}function B1(i,a,o,u,d){if(a==="submit"&&o&&o.stateNode===d){var p=MT((d[ce]||null).action),T=u.submitter;T&&(a=(a=T[ce]||null)?MT(a.formAction):T.getAttribute("formAction"),a!==null&&(p=a,T=null));var b=new Ro("action","action",null,u,d);i.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Gs!==0){var C=T?PT(d,T):new FormData(d);pg(o,{pending:!0,data:C,method:d.method,action:p},null,C)}}else typeof p=="function"&&(b.preventDefault(),C=T?PT(d,T):new FormData(d),pg(o,{pending:!0,data:C,method:d.method,action:p},p,C))},currentTarget:d}]})}}for(var Wg=0;Wg<Vm.length;Wg++){var Zg=Vm[Wg],F1=Zg.toLowerCase(),j1=Zg[0].toUpperCase()+Zg.slice(1);Ur(F1,"on"+j1)}Ur(fv,"onAnimationEnd"),Ur(dv,"onAnimationIteration"),Ur(mv,"onAnimationStart"),Ur("dblclick","onDoubleClick"),Ur("focusin","onFocus"),Ur("focusout","onBlur"),Ur(a1,"onTransitionRun"),Ur(s1,"onTransitionStart"),Ur(o1,"onTransitionCancel"),Ur(gv,"onTransitionEnd"),sn("onMouseEnter",["mouseout","mouseover"]),sn("onMouseLeave",["mouseout","mouseover"]),sn("onPointerEnter",["pointerout","pointerover"]),sn("onPointerLeave",["pointerout","pointerover"]),pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pn("onBeforeInput",["compositionend","keypress","textInput","paste"]),pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),q1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fu));function OT(i,a){a=(a&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],d=u.event;u=u.listeners;e:{var p=void 0;if(a)for(var T=u.length-1;0<=T;T--){var b=u[T],C=b.instance,Y=b.currentTarget;if(b=b.listener,C!==p&&d.isPropagationStopped())break e;p=b,d.currentTarget=Y;try{p(d)}catch(re){af(re)}d.currentTarget=null,p=C}else for(T=0;T<u.length;T++){if(b=u[T],C=b.instance,Y=b.currentTarget,b=b.listener,C!==p&&d.isPropagationStopped())break e;p=b,d.currentTarget=Y;try{p(d)}catch(re){af(re)}d.currentTarget=null,p=C}}}}function Ze(i,a){var o=a[Ce];o===void 0&&(o=a[Ce]=new Set);var u=i+"__bubble";o.has(u)||(VT(a,i,2,!1),o.add(u))}function Jg(i,a,o){var u=0;a&&(u|=4),VT(o,i,u,a)}var vf="_reactListening"+Math.random().toString(36).slice(2);function ep(i){if(!i[vf]){i[vf]=!0,ft.forEach(function(o){o!=="selectionchange"&&(q1.has(o)||Jg(o,!1,i),Jg(o,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[vf]||(a[vf]=!0,Jg("selectionchange",!1,a))}}function VT(i,a,o,u){switch(a0(a)){case 2:var d=pD;break;case 8:d=yD;break;default:d=mp}o=d.bind(null,a,o,i),d=void 0,!_r||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(d=!0),u?d!==void 0?i.addEventListener(a,o,{capture:!0,passive:d}):i.addEventListener(a,o,!0):d!==void 0?i.addEventListener(a,o,{passive:d}):i.addEventListener(a,o,!1)}function tp(i,a,o,u,d){var p=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var b=u.stateNode.containerInfo;if(b===d)break;if(T===4)for(T=u.return;T!==null;){var C=T.tag;if((C===3||C===4)&&T.stateNode.containerInfo===d)return;T=T.return}for(;b!==null;){if(T=He(b),T===null)return;if(C=T.tag,C===5||C===6||C===26||C===27){u=p=T;continue e}b=b.parentNode}}u=u.return}Eh(function(){var Y=p,re=yr(o),se=[];e:{var X=pv.get(i);if(X!==void 0){var W=Ro,Ue=i;switch(i){case"keypress":if(ei(o)===0)break e;case"keydown":case"keyup":W=Po;break;case"focusin":Ue="focus",W=xo;break;case"focusout":Ue="blur",W=xo;break;case"beforeblur":case"afterblur":W=xo;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=vr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Rm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=Dh;break;case fv:case dv:case mv:W=No;break;case gv:W=xh;break;case"scroll":case"scrollend":W=Th;break;case"wheel":W=Oo;break;case"copy":case"cut":case"paste":W=Mo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=hu;break;case"toggle":case"beforetoggle":W=Mh}var Oe=(a&4)!==0,It=!Oe&&(i==="scroll"||i==="scrollend"),B=Oe?X!==null?X+"Capture":null:X;Oe=[];for(var V=Y,G;V!==null;){var ae=V;if(G=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||G===null||B===null||(ae=Ss(V,B),ae!=null&&Oe.push(ju(V,ae,G))),It)break;V=V.return}0<Oe.length&&(X=new W(X,Ue,null,o,re),se.push({event:X,listeners:Oe}))}}if((a&7)===0){e:{if(X=i==="mouseover"||i==="pointerover",W=i==="mouseout"||i==="pointerout",X&&o!==Ii&&(Ue=o.relatedTarget||o.fromElement)&&(He(Ue)||Ue[Ee]))break e;if((W||X)&&(X=re.window===re?re:(X=re.ownerDocument)?X.defaultView||X.parentWindow:window,W?(Ue=o.relatedTarget||o.toElement,W=Y,Ue=Ue?He(Ue):null,Ue!==null&&(It=l(Ue),Oe=Ue.tag,Ue!==It||Oe!==5&&Oe!==27&&Oe!==6)&&(Ue=null)):(W=null,Ue=Y),W!==Ue)){if(Oe=vr,ae="onMouseLeave",B="onMouseEnter",V="mouse",(i==="pointerout"||i==="pointerover")&&(Oe=hu,ae="onPointerLeave",B="onPointerEnter",V="pointer"),It=W==null?X:gt(W),G=Ue==null?X:gt(Ue),X=new Oe(ae,V+"leave",W,o,re),X.target=It,X.relatedTarget=G,ae=null,He(re)===Y&&(Oe=new Oe(B,V+"enter",Ue,o,re),Oe.target=G,Oe.relatedTarget=It,ae=Oe),It=ae,W&&Ue)t:{for(Oe=W,B=Ue,V=0,G=Oe;G;G=al(G))V++;for(G=0,ae=B;ae;ae=al(ae))G++;for(;0<V-G;)Oe=al(Oe),V--;for(;0<G-V;)B=al(B),G--;for(;V--;){if(Oe===B||B!==null&&Oe===B.alternate)break t;Oe=al(Oe),B=al(B)}Oe=null}else Oe=null;W!==null&&kT(se,X,W,Oe,!1),Ue!==null&&It!==null&&kT(se,It,Ue,Oe,!0)}}e:{if(X=Y?gt(Y):window,W=X.nodeName&&X.nodeName.toLowerCase(),W==="select"||W==="input"&&X.type==="file")var be=tv;else if(Jt(X))if(nv)be=n1;else{be=e1;var Xe=JR}else W=X.nodeName,!W||W.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Y&&iu(Y.elementType)&&(be=tv):be=t1;if(be&&(be=be(i,Y))){Ni(se,be,o,re);break e}Xe&&Xe(i,X,Y),i==="focusout"&&Y&&X.type==="number"&&Y.memoizedProps.value!=null&&da(X,"number",X.value)}switch(Xe=Y?gt(Y):window,i){case"focusin":(Jt(Xe)||Xe.contentEditable==="true")&&(Vo=Xe,Mm=Y,mu=null);break;case"focusout":mu=Mm=Vo=null;break;case"mousedown":Pm=!0;break;case"contextmenu":case"mouseup":case"dragend":Pm=!1,cv(se,o,re);break;case"selectionchange":if(i1)break;case"keydown":case"keyup":cv(se,o,re)}var Ne;if(ri)e:{switch(i){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else it?Z(i,o)&&(ke="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(ke="onCompositionStart");ke&&(v&&o.locale!=="ko"&&(it||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&it&&(Ne=su()):(Jr=re,ma="value"in Jr?Jr.value:Jr.textContent,it=!0)),Xe=Ef(Y,ke),0<Xe.length&&(ke=new uu(ke,i,null,o,re),se.push({event:ke,listeners:Xe}),Ne?ke.data=Ne:(Ne=ge(o),Ne!==null&&(ke.data=Ne)))),(Ne=y?Zt(i,o):at(i,o))&&(ke=Ef(Y,"onBeforeInput"),0<ke.length&&(Xe=new uu("onBeforeInput","beforeinput",null,o,re),se.push({event:Xe,listeners:ke}),Xe.data=Ne)),B1(se,i,Y,o,re)}OT(se,a)})}function ju(i,a,o){return{instance:i,listener:a,currentTarget:o}}function Ef(i,a){for(var o=a+"Capture",u=[];i!==null;){var d=i,p=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||p===null||(d=Ss(i,o),d!=null&&u.unshift(ju(i,d,p)),d=Ss(i,a),d!=null&&u.push(ju(i,d,p))),i.tag===3)return u;i=i.return}return[]}function al(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function kT(i,a,o,u,d){for(var p=a._reactName,T=[];o!==null&&o!==u;){var b=o,C=b.alternate,Y=b.stateNode;if(b=b.tag,C!==null&&C===u)break;b!==5&&b!==26&&b!==27||Y===null||(C=Y,d?(Y=Ss(o,p),Y!=null&&T.unshift(ju(o,Y,C))):d||(Y=Ss(o,p),Y!=null&&T.push(ju(o,Y,C)))),o=o.return}T.length!==0&&i.push({event:a,listeners:T})}var H1=/\r\n?/g,G1=/\u0000|\uFFFD/g;function LT(i){return(typeof i=="string"?i:""+i).replace(H1,`
`).replace(G1,"")}function UT(i,a){return a=LT(a),LT(i)===a}function Tf(){}function At(i,a,o,u,d,p){switch(o){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||pr(i,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&pr(i,""+u);break;case"className":kn(i,"class",u);break;case"tabIndex":kn(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":kn(i,o,u);break;case"style":ru(i,u,p);break;case"data":if(a!=="object"){kn(i,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Io(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(a!=="input"&&At(i,a,"name",d.name,d,null),At(i,a,"formEncType",d.formEncType,d,null),At(i,a,"formMethod",d.formMethod,d,null),At(i,a,"formTarget",d.formTarget,d,null)):(At(i,a,"encType",d.encType,d,null),At(i,a,"method",d.method,d,null),At(i,a,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Io(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=Tf);break;case"onScroll":u!=null&&Ze("scroll",i);break;case"onScrollEnd":u!=null&&Ze("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=Io(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":Ze("beforetoggle",i),Ze("toggle",i),Xn(i,"popover",u);break;case"xlinkActuate":Ve(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ve(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ve(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ve(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ve(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ve(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ve(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ve(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ve(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Xn(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Am.get(o)||o,Xn(i,o,u))}}function np(i,a,o,u,d,p){switch(o){case"style":ru(i,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"children":typeof u=="string"?pr(i,u):(typeof u=="number"||typeof u=="bigint")&&pr(i,""+u);break;case"onScroll":u!=null&&Ze("scroll",i);break;case"onScrollEnd":u!=null&&Ze("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Tf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jn.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),a=o.slice(2,d?o.length-7:void 0),p=i[ce]||null,p=p!=null?p[o]:null,typeof p=="function"&&i.removeEventListener(a,p,d),typeof u=="function")){typeof p!="function"&&p!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(a,u,d);break e}o in i?i[o]=u:u===!0?i.setAttribute(o,""):Xn(i,o,u)}}}function Tn(i,a,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",i),Ze("load",i);var u=!1,d=!1,p;for(p in o)if(o.hasOwnProperty(p)){var T=o[p];if(T!=null)switch(p){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:At(i,a,p,T,o,null)}}d&&At(i,a,"srcSet",o.srcSet,o,null),u&&At(i,a,"src",o.src,o,null);return;case"input":Ze("invalid",i);var b=p=T=d=null,C=null,Y=null;for(u in o)if(o.hasOwnProperty(u)){var re=o[u];if(re!=null)switch(u){case"name":d=re;break;case"type":T=re;break;case"checked":C=re;break;case"defaultChecked":Y=re;break;case"value":p=re;break;case"defaultValue":b=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,a));break;default:At(i,a,u,re,o,null)}}Ts(i,p,b,C,Y,T,d,!1),Ao(i);return;case"select":Ze("invalid",i),u=T=p=null;for(d in o)if(o.hasOwnProperty(d)&&(b=o[d],b!=null))switch(d){case"value":p=b;break;case"defaultValue":T=b;break;case"multiple":u=b;default:At(i,a,d,b,o,null)}a=p,o=T,i.multiple=!!u,a!=null?Ai(i,!!u,a,!1):o!=null&&Ai(i,!!u,o,!0);return;case"textarea":Ze("invalid",i),p=d=u=null;for(T in o)if(o.hasOwnProperty(T)&&(b=o[T],b!=null))switch(T){case"value":u=b;break;case"defaultValue":d=b;break;case"children":p=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:At(i,a,T,b,o,null)}ws(i,u,d,p),Ao(i);return;case"option":for(C in o)if(o.hasOwnProperty(C)&&(u=o[C],u!=null))switch(C){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:At(i,a,C,u,o,null)}return;case"dialog":Ze("beforetoggle",i),Ze("toggle",i),Ze("cancel",i),Ze("close",i);break;case"iframe":case"object":Ze("load",i);break;case"video":case"audio":for(u=0;u<Fu.length;u++)Ze(Fu[u],i);break;case"image":Ze("error",i),Ze("load",i);break;case"details":Ze("toggle",i);break;case"embed":case"source":case"link":Ze("error",i),Ze("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in o)if(o.hasOwnProperty(Y)&&(u=o[Y],u!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:At(i,a,Y,u,o,null)}return;default:if(iu(a)){for(re in o)o.hasOwnProperty(re)&&(u=o[re],u!==void 0&&np(i,a,re,u,o,void 0));return}}for(b in o)o.hasOwnProperty(b)&&(u=o[b],u!=null&&At(i,a,b,u,o,null))}function Y1(i,a,o,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,p=null,T=null,b=null,C=null,Y=null,re=null;for(W in o){var se=o[W];if(o.hasOwnProperty(W)&&se!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":C=se;default:u.hasOwnProperty(W)||At(i,a,W,null,u,se)}}for(var X in u){var W=u[X];if(se=o[X],u.hasOwnProperty(X)&&(W!=null||se!=null))switch(X){case"type":p=W;break;case"name":d=W;break;case"checked":Y=W;break;case"defaultChecked":re=W;break;case"value":T=W;break;case"defaultValue":b=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,a));break;default:W!==se&&At(i,a,X,W,u,se)}}Wn(i,T,b,C,Y,re,p,d);return;case"select":W=T=b=X=null;for(p in o)if(C=o[p],o.hasOwnProperty(p)&&C!=null)switch(p){case"value":break;case"multiple":W=C;default:u.hasOwnProperty(p)||At(i,a,p,null,u,C)}for(d in u)if(p=u[d],C=o[d],u.hasOwnProperty(d)&&(p!=null||C!=null))switch(d){case"value":X=p;break;case"defaultValue":b=p;break;case"multiple":T=p;default:p!==C&&At(i,a,d,p,u,C)}a=b,o=T,u=W,X!=null?Ai(i,!!o,X,!1):!!u!=!!o&&(a!=null?Ai(i,!!o,a,!0):Ai(i,!!o,o?[]:"",!1));return;case"textarea":W=X=null;for(b in o)if(d=o[b],o.hasOwnProperty(b)&&d!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:At(i,a,b,null,u,d)}for(T in u)if(d=u[T],p=o[T],u.hasOwnProperty(T)&&(d!=null||p!=null))switch(T){case"value":X=d;break;case"defaultValue":W=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==p&&At(i,a,T,d,u,p)}bt(i,X,W);return;case"option":for(var Ue in o)if(X=o[Ue],o.hasOwnProperty(Ue)&&X!=null&&!u.hasOwnProperty(Ue))switch(Ue){case"selected":i.selected=!1;break;default:At(i,a,Ue,null,u,X)}for(C in u)if(X=u[C],W=o[C],u.hasOwnProperty(C)&&X!==W&&(X!=null||W!=null))switch(C){case"selected":i.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:At(i,a,C,X,u,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in o)X=o[Oe],o.hasOwnProperty(Oe)&&X!=null&&!u.hasOwnProperty(Oe)&&At(i,a,Oe,null,u,X);for(Y in u)if(X=u[Y],W=o[Y],u.hasOwnProperty(Y)&&X!==W&&(X!=null||W!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,a));break;default:At(i,a,Y,X,u,W)}return;default:if(iu(a)){for(var It in o)X=o[It],o.hasOwnProperty(It)&&X!==void 0&&!u.hasOwnProperty(It)&&np(i,a,It,void 0,u,X);for(re in u)X=u[re],W=o[re],!u.hasOwnProperty(re)||X===W||X===void 0&&W===void 0||np(i,a,re,X,u,W);return}}for(var B in o)X=o[B],o.hasOwnProperty(B)&&X!=null&&!u.hasOwnProperty(B)&&At(i,a,B,null,u,X);for(se in u)X=u[se],W=o[se],!u.hasOwnProperty(se)||X===W||X==null&&W==null||At(i,a,se,X,u,W)}var rp=null,ip=null;function wf(i){return i.nodeType===9?i:i.ownerDocument}function zT(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function BT(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function ap(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var sp=null;function K1(){var i=window.event;return i&&i.type==="popstate"?i===sp?!1:(sp=i,!0):(sp=null,!1)}var FT=typeof setTimeout=="function"?setTimeout:void 0,Q1=typeof clearTimeout=="function"?clearTimeout:void 0,jT=typeof Promise=="function"?Promise:void 0,$1=typeof queueMicrotask=="function"?queueMicrotask:typeof jT<"u"?function(i){return jT.resolve(null).then(i).catch(X1)}:FT;function X1(i){setTimeout(function(){throw i})}function xa(i){return i==="head"}function qT(i,a){var o=a,u=0,d=0;do{var p=o.nextSibling;if(i.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(0<u&&8>u){o=u;var T=i.ownerDocument;if(o&1&&qu(T.documentElement),o&2&&qu(T.body),o&4)for(o=T.head,qu(o),T=o.firstChild;T;){var b=T.nextSibling,C=T.nodeName;T[Ie]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&T.rel.toLowerCase()==="stylesheet"||o.removeChild(T),T=b}}if(d===0){i.removeChild(p),Wu(a);return}d--}else o==="$"||o==="$?"||o==="$!"?d++:u=o.charCodeAt(0)-48;else u=0;o=p}while(o);Wu(a)}function op(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var o=a;switch(a=a.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":op(o),we(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function W1(i,a,o,u){for(;i.nodeType===1;){var d=o;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Ie])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(p=i.getAttribute("rel"),p==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(p!==d.rel||i.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||i.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||i.getAttribute("title")!==(d.title==null?null:d.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(p=i.getAttribute("src"),(p!==(d.src==null?null:d.src)||i.getAttribute("type")!==(d.type==null?null:d.type)||i.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&p&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var p=d.name==null?null:""+d.name;if(d.type==="hidden"&&i.getAttribute("name")===p)return i}else return i;if(i=Br(i.nextSibling),i===null)break}return null}function Z1(i,a,o){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Br(i.nextSibling),i===null))return null;return i}function lp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function J1(i,a){var o=i.ownerDocument;if(i.data!=="$?"||o.readyState==="complete")a();else{var u=function(){a(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Br(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var up=null;function HT(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(a===0)return i;a--}else o==="/$"&&a++}i=i.previousSibling}return null}function GT(i,a,o){switch(a=wf(o),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function qu(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);we(i)}var Ir=new Map,YT=new Set;function bf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Hi=fe.d;fe.d={f:eD,r:tD,D:nD,C:rD,L:iD,m:aD,X:oD,S:sD,M:lD};function eD(){var i=Hi.f(),a=mf();return i||a}function tD(i){var a=rt(i);a!==null&&a.tag===5&&a.type==="form"?fE(a):Hi.r(i)}var sl=typeof document>"u"?null:document;function KT(i,a,o){var u=sl;if(u&&typeof a=="string"&&a){var d=Gt(a);d='link[rel="'+i+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),YT.has(d)||(YT.add(d),i={rel:i,crossOrigin:o,href:a},u.querySelector(d)===null&&(a=u.createElement("link"),Tn(a,"link",i),Be(a),u.head.appendChild(a)))}}function nD(i){Hi.D(i),KT("dns-prefetch",i,null)}function rD(i,a){Hi.C(i,a),KT("preconnect",i,a)}function iD(i,a,o){Hi.L(i,a,o);var u=sl;if(u&&i&&a){var d='link[rel="preload"][as="'+Gt(a)+'"]';a==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+Gt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+Gt(o.imageSizes)+'"]')):d+='[href="'+Gt(i)+'"]';var p=d;switch(a){case"style":p=ol(i);break;case"script":p=ll(i)}Ir.has(p)||(i=_({rel:"preload",href:a==="image"&&o&&o.imageSrcSet?void 0:i,as:a},o),Ir.set(p,i),u.querySelector(d)!==null||a==="style"&&u.querySelector(Hu(p))||a==="script"&&u.querySelector(Gu(p))||(a=u.createElement("link"),Tn(a,"link",i),Be(a),u.head.appendChild(a)))}}function aD(i,a){Hi.m(i,a);var o=sl;if(o&&i){var u=a&&typeof a.as=="string"?a.as:"script",d='link[rel="modulepreload"][as="'+Gt(u)+'"][href="'+Gt(i)+'"]',p=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=ll(i)}if(!Ir.has(p)&&(i=_({rel:"modulepreload",href:i},a),Ir.set(p,i),o.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Gu(p)))return}u=o.createElement("link"),Tn(u,"link",i),Be(u),o.head.appendChild(u)}}}function sD(i,a,o){Hi.S(i,a,o);var u=sl;if(u&&i){var d=ht(u).hoistableStyles,p=ol(i);a=a||"default";var T=d.get(p);if(!T){var b={loading:0,preload:null};if(T=u.querySelector(Hu(p)))b.loading=5;else{i=_({rel:"stylesheet",href:i,"data-precedence":a},o),(o=Ir.get(p))&&cp(i,o);var C=T=u.createElement("link");Be(C),Tn(C,"link",i),C._p=new Promise(function(Y,re){C.onload=Y,C.onerror=re}),C.addEventListener("load",function(){b.loading|=1}),C.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Sf(T,a,u)}T={type:"stylesheet",instance:T,count:1,state:b},d.set(p,T)}}}function oD(i,a){Hi.X(i,a);var o=sl;if(o&&i){var u=ht(o).hoistableScripts,d=ll(i),p=u.get(d);p||(p=o.querySelector(Gu(d)),p||(i=_({src:i,async:!0},a),(a=Ir.get(d))&&hp(i,a),p=o.createElement("script"),Be(p),Tn(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(d,p))}}function lD(i,a){Hi.M(i,a);var o=sl;if(o&&i){var u=ht(o).hoistableScripts,d=ll(i),p=u.get(d);p||(p=o.querySelector(Gu(d)),p||(i=_({src:i,async:!0,type:"module"},a),(a=Ir.get(d))&&hp(i,a),p=o.createElement("script"),Be(p),Tn(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(d,p))}}function QT(i,a,o,u){var d=(d=Pe.current)?bf(d):null;if(!d)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(a=ol(o.href),o=ht(d).hoistableStyles,u=o.get(a),u||(u={type:"style",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=ol(o.href);var p=ht(d).hoistableStyles,T=p.get(i);if(T||(d=d.ownerDocument||d,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(i,T),(p=d.querySelector(Hu(i)))&&!p._p&&(T.instance=p,T.state.loading=5),Ir.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ir.set(i,o),p||uD(d,i,o,T.state))),a&&u===null)throw Error(r(528,""));return T}if(a&&u!==null)throw Error(r(529,""));return null;case"script":return a=o.async,o=o.src,typeof o=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ll(o),o=ht(d).hoistableScripts,u=o.get(a),u||(u={type:"script",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function ol(i){return'href="'+Gt(i)+'"'}function Hu(i){return'link[rel="stylesheet"]['+i+"]"}function $T(i){return _({},i,{"data-precedence":i.precedence,precedence:null})}function uD(i,a,o,u){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=i.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),Tn(a,"link",o),Be(a),i.head.appendChild(a))}function ll(i){return'[src="'+Gt(i)+'"]'}function Gu(i){return"script[async]"+i}function XT(i,a,o){if(a.count++,a.instance===null)switch(a.type){case"style":var u=i.querySelector('style[data-href~="'+Gt(o.href)+'"]');if(u)return a.instance=u,Be(u),u;var d=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Be(u),Tn(u,"style",d),Sf(u,o.precedence,i),a.instance=u;case"stylesheet":d=ol(o.href);var p=i.querySelector(Hu(d));if(p)return a.state.loading|=4,a.instance=p,Be(p),p;u=$T(o),(d=Ir.get(d))&&cp(u,d),p=(i.ownerDocument||i).createElement("link"),Be(p);var T=p;return T._p=new Promise(function(b,C){T.onload=b,T.onerror=C}),Tn(p,"link",u),a.state.loading|=4,Sf(p,o.precedence,i),a.instance=p;case"script":return p=ll(o.src),(d=i.querySelector(Gu(p)))?(a.instance=d,Be(d),d):(u=o,(d=Ir.get(p))&&(u=_({},o),hp(u,d)),i=i.ownerDocument||i,d=i.createElement("script"),Be(d),Tn(d,"link",u),i.head.appendChild(d),a.instance=d);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Sf(u,o.precedence,i));return a.instance}function Sf(i,a,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,p=d,T=0;T<u.length;T++){var b=u[T];if(b.dataset.precedence===a)p=b;else if(p!==d)break}p?p.parentNode.insertBefore(i,p.nextSibling):(a=o.nodeType===9?o.head:o,a.insertBefore(i,a.firstChild))}function cp(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function hp(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Af=null;function WT(i,a,o){if(Af===null){var u=new Map,d=Af=new Map;d.set(o,u)}else d=Af,u=d.get(o),u||(u=new Map,d.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),d=0;d<o.length;d++){var p=o[d];if(!(p[Ie]||p[oe]||i==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(a)||"";T=i+T;var b=u.get(T);b?b.push(p):u.set(T,[p])}}return u}function ZT(i,a,o){i=i.ownerDocument||i,i.head.insertBefore(o,a==="title"?i.querySelector("head > title"):null)}function cD(i,a,o){if(o===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function JT(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Yu=null;function hD(){}function fD(i,a,o){if(Yu===null)throw Error(r(475));var u=Yu;if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=ol(o.href),p=i.querySelector(Hu(d));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=If.bind(u),i.then(u,u)),a.state.loading|=4,a.instance=p,Be(p);return}p=i.ownerDocument||i,o=$T(o),(d=Ir.get(d))&&cp(o,d),p=p.createElement("link"),Be(p);var T=p;T._p=new Promise(function(b,C){T.onload=b,T.onerror=C}),Tn(p,"link",o),a.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(u.count++,a=If.bind(u),i.addEventListener("load",a),i.addEventListener("error",a))}}function dD(){if(Yu===null)throw Error(r(475));var i=Yu;return i.stylesheets&&i.count===0&&fp(i,i.stylesheets),0<i.count?function(a){var o=setTimeout(function(){if(i.stylesheets&&fp(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(o)}}:null}function If(){if(this.count--,this.count===0){if(this.stylesheets)fp(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Rf=null;function fp(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Rf=new Map,a.forEach(mD,i),Rf=null,If.call(i))}function mD(i,a){if(!(a.state.loading&4)){var o=Rf.get(i);if(o)var u=o.get(null);else{o=new Map,Rf.set(i,o);for(var d=i.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<d.length;p++){var T=d[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),u=T)}u&&o.set(null,u)}d=a.instance,T=d.getAttribute("data-precedence"),p=o.get(T)||u,p===u&&o.set(null,d),o.set(T,d),this.count++,u=If.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),p?p.parentNode.insertBefore(d,p.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(d,i.firstChild)),a.state.loading|=4}}var Ku={$$typeof:ee,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function gD(i,a,o,u,d,p,T,b){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mr(0),this.hiddenUpdates=mr(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function e0(i,a,o,u,d,p,T,b,C,Y,re,se){return i=new gD(i,a,o,T,b,C,Y,se),a=1,p===!0&&(a|=24),p=Jn(3,null,null,a),i.current=p,p.stateNode=i,a=Km(),a.refCount++,i.pooledCache=a,a.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:a},Wm(p),i}function t0(i){return i?(i=zo,i):zo}function n0(i,a,o,u,d,p){d=t0(d),u.context===null?u.context=d:u.pendingContext=d,u=ya(a),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=_a(i,u,a),o!==null&&(ir(o,i,a),bu(o,i,a))}function r0(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<a?o:a}}function dp(i,a){r0(i,a),(i=i.alternate)&&r0(i,a)}function i0(i){if(i.tag===13){var a=Uo(i,67108864);a!==null&&ir(a,i,67108864),dp(i,67108864)}}var Df=!0;function pD(i,a,o,u){var d=$.T;$.T=null;var p=fe.p;try{fe.p=2,mp(i,a,o,u)}finally{fe.p=p,$.T=d}}function yD(i,a,o,u){var d=$.T;$.T=null;var p=fe.p;try{fe.p=8,mp(i,a,o,u)}finally{fe.p=p,$.T=d}}function mp(i,a,o,u){if(Df){var d=gp(u);if(d===null)tp(i,a,u,Cf,o),s0(i,u);else if(vD(d,i,a,o,u))u.stopPropagation();else if(s0(i,u),a&4&&-1<_D.indexOf(i)){for(;d!==null;){var p=rt(d);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=Qn(p.pendingLanes);if(T!==0){var b=p;for(b.pendingLanes|=2,b.entangledLanes|=2;T;){var C=1<<31-Ht(T);b.entanglements[1]|=C,T&=~C}ui(p),(pt&6)===0&&(ff=Pn()+500,Bu(0))}}break;case 13:b=Uo(p,2),b!==null&&ir(b,p,2),mf(),dp(p,2)}if(p=gp(u),p===null&&tp(i,a,u,Cf,o),p===d)break;d=p}d!==null&&u.stopPropagation()}else tp(i,a,u,null,o)}}function gp(i){return i=yr(i),pp(i)}var Cf=null;function pp(i){if(Cf=null,i=He(i),i!==null){var a=l(i);if(a===null)i=null;else{var o=a.tag;if(o===13){if(i=c(a),i!==null)return i;i=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Cf=i,null}function a0(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(eu()){case _s:return 2;case ia:return 8;case wi:case Pr:return 32;case hr:return 268435456;default:return 32}default:return 32}}var yp=!1,Na=null,Ma=null,Pa=null,Qu=new Map,$u=new Map,Oa=[],_D="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function s0(i,a){switch(i){case"focusin":case"focusout":Na=null;break;case"dragenter":case"dragleave":Ma=null;break;case"mouseover":case"mouseout":Pa=null;break;case"pointerover":case"pointerout":Qu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":$u.delete(a.pointerId)}}function Xu(i,a,o,u,d,p){return i===null||i.nativeEvent!==p?(i={blockedOn:a,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[d]},a!==null&&(a=rt(a),a!==null&&i0(a)),i):(i.eventSystemFlags|=u,a=i.targetContainers,d!==null&&a.indexOf(d)===-1&&a.push(d),i)}function vD(i,a,o,u,d){switch(a){case"focusin":return Na=Xu(Na,i,a,o,u,d),!0;case"dragenter":return Ma=Xu(Ma,i,a,o,u,d),!0;case"mouseover":return Pa=Xu(Pa,i,a,o,u,d),!0;case"pointerover":var p=d.pointerId;return Qu.set(p,Xu(Qu.get(p)||null,i,a,o,u,d)),!0;case"gotpointercapture":return p=d.pointerId,$u.set(p,Xu($u.get(p)||null,i,a,o,u,d)),!0}return!1}function o0(i){var a=He(i.target);if(a!==null){var o=l(a);if(o!==null){if(a=o.tag,a===13){if(a=c(o),a!==null){i.blockedOn=a,j(i.priority,function(){if(o.tag===13){var u=rr();u=Wr(u);var d=Uo(o,u);d!==null&&ir(d,o,u),dp(o,u)}});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function xf(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var o=gp(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);Ii=u,o.target.dispatchEvent(u),Ii=null}else return a=rt(o),a!==null&&i0(a),i.blockedOn=o,!1;a.shift()}return!0}function l0(i,a,o){xf(i)&&o.delete(a)}function ED(){yp=!1,Na!==null&&xf(Na)&&(Na=null),Ma!==null&&xf(Ma)&&(Ma=null),Pa!==null&&xf(Pa)&&(Pa=null),Qu.forEach(l0),$u.forEach(l0)}function Nf(i,a){i.blockedOn===a&&(i.blockedOn=null,yp||(yp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,ED)))}var Mf=null;function u0(i){Mf!==i&&(Mf=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Mf===i&&(Mf=null);for(var a=0;a<i.length;a+=3){var o=i[a],u=i[a+1],d=i[a+2];if(typeof u!="function"){if(pp(u||o)===null)continue;break}var p=rt(o);p!==null&&(i.splice(a,3),a-=3,pg(p,{pending:!0,data:d,method:o.method,action:u},u,d))}}))}function Wu(i){function a(C){return Nf(C,i)}Na!==null&&Nf(Na,i),Ma!==null&&Nf(Ma,i),Pa!==null&&Nf(Pa,i),Qu.forEach(a),$u.forEach(a);for(var o=0;o<Oa.length;o++){var u=Oa[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Oa.length&&(o=Oa[0],o.blockedOn===null);)o0(o),o.blockedOn===null&&Oa.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var d=o[u],p=o[u+1],T=d[ce]||null;if(typeof p=="function")T||u0(o);else if(T){var b=null;if(p&&p.hasAttribute("formAction")){if(d=p,T=p[ce]||null)b=T.formAction;else if(pp(d)!==null)continue}else b=T.action;typeof b=="function"?o[u+1]=b:(o.splice(u,3),u-=3),u0(o)}}}function _p(i){this._internalRoot=i}Pf.prototype.render=_p.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var o=a.current,u=rr();n0(o,u,i,a,null,null)},Pf.prototype.unmount=_p.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;n0(i.current,2,null,i,null,null),mf(),a[Ee]=null}};function Pf(i){this._internalRoot=i}Pf.prototype.unstable_scheduleHydration=function(i){if(i){var a=N();i={blockedOn:null,target:i,priority:a};for(var o=0;o<Oa.length&&a!==0&&a<Oa[o].priority;o++);Oa.splice(o,0,i),o===0&&o0(i)}};var c0=e.version;if(c0!=="19.1.1")throw Error(r(527,c0,"19.1.1"));fe.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=m(a),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var TD={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Of=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Of.isDisabled&&Of.supportsFiber)try{ct=Of.inject(TD),Ke=Of}catch{}}return Ju.createRoot=function(i,a){if(!s(i))throw Error(r(299));var o=!1,u="",d=IE,p=RE,T=DE,b=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(b=a.unstable_transitionCallbacks)),a=e0(i,1,!1,null,null,o,u,d,p,T,b,null),i[Ee]=a.current,ep(i),new _p(a)},Ju.hydrateRoot=function(i,a,o){if(!s(i))throw Error(r(299));var u=!1,d="",p=IE,T=RE,b=DE,C=null,Y=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(C=o.unstable_transitionCallbacks),o.formState!==void 0&&(Y=o.formState)),a=e0(i,1,!0,a,o??null,u,d,p,T,b,C,Y),a.context=t0(null),o=a.current,u=rr(),u=Wr(u),d=ya(u),d.callback=null,_a(o,d,u),o=u,a.current.lanes=o,Or(a,o),ui(a),i[Ee]=a.current,ep(i),new Pf(a)},Ju.version="19.1.1",Ju}var E0;function xD(){if(E0)return Tp.exports;E0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Tp.exports=CD(),Tp.exports}var ND=xD();/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var sS=n=>{throw TypeError(n)},MD=(n,e,t)=>e.has(n)||sS("Cannot "+t),Ap=(n,e,t)=>(MD(n,e,"read from private field"),t?t.call(n):e.get(n)),PD=(n,e,t)=>e.has(n)?sS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),T0="popstate";function OD(n={}){function e(r,s){let{pathname:l,search:c,hash:f}=r.location;return Cc("",{pathname:l,search:c,hash:f},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:as(s)}return kD(e,t,null,n)}function Je(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Xt(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VD(){return Math.random().toString(36).substring(2,10)}function w0(n,e){return{usr:n.state,key:n.key,idx:e}}function Cc(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?hs(e):e,state:t,key:e&&e.key||r||VD()}}function as({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function hs(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function kD(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:l=!1}=r,c=s.history,f="POP",m=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function E(){f="POP";let L=_(),ne=L==null?null:L-g;g=L,m&&m({action:f,location:F.location,delta:ne})}function w(L,ne){f="PUSH";let te=Cc(F.location,L,ne);g=_()+1;let ee=w0(te,g),_e=F.createHref(te);try{c.pushState(ee,"",_e)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;s.location.assign(_e)}l&&m&&m({action:f,location:F.location,delta:1})}function I(L,ne){f="REPLACE";let te=Cc(F.location,L,ne);g=_();let ee=w0(te,g),_e=F.createHref(te);c.replaceState(ee,"",_e),l&&m&&m({action:f,location:F.location,delta:0})}function P(L){return oS(L)}let F={get action(){return f},get location(){return n(s,c)},listen(L){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(T0,E),m=L,()=>{s.removeEventListener(T0,E),m=null}},createHref(L){return e(s,L)},createURL:P,encodeLocation(L){let ne=P(L);return{pathname:ne.pathname,search:ne.search,hash:ne.hash}},push:w,replace:I,go(L){return c.go(L)}};return F}function oS(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Je(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:as(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}var cc,b0=class{constructor(n){if(PD(this,cc,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(Ap(this,cc).has(n))return Ap(this,cc).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){Ap(this,cc).set(n,e)}};cc=new WeakMap;var LD=new Set(["lazy","caseSensitive","path","id","index","children"]);function UD(n){return LD.has(n)}var zD=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function BD(n){return zD.has(n)}function FD(n){return n.index===!0}function xc(n,e,t=[],r={},s=!1){return n.map((l,c)=>{let f=[...t,String(c)],m=typeof l.id=="string"?l.id:f.join("-");if(Je(l.index!==!0||!l.children,"Cannot specify children on an index route"),Je(s||!r[m],`Found a route id collision on id "${m}".  Route id's must be globally unique within Data Router usages`),FD(l)){let g={...l,...e(l),id:m};return r[m]=g,g}else{let g={...l,...e(l),id:m,children:void 0};return r[m]=g,l.children&&(g.children=xc(l.children,e,f,r,s)),g}})}function ja(n,e,t="/"){return Yf(n,e,t,!1)}function Yf(n,e,t,r){let s=typeof e=="string"?hs(e):e,l=Mr(s.pathname||"/",t);if(l==null)return null;let c=lS(n);qD(c);let f=null;for(let m=0;f==null&&m<c.length;++m){let g=eC(l);f=ZD(c[m],g,r)}return f}function jD(n,e){let{route:t,pathname:r,params:s}=n;return{id:t.id,pathname:r,params:s,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function lS(n,e=[],t=[],r="",s=!1){let l=(c,f,m=s,g)=>{let _={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(r)&&m)return;Je(_.relativePath.startsWith(r),`Absolute route path "${_.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(r.length)}let E=di([r,_.relativePath]),w=t.concat(_);c.children&&c.children.length>0&&(Je(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),lS(c.children,e,w,E,m)),!(c.path==null&&!c.index)&&e.push({path:E,score:XD(E,c.index),routesMeta:w})};return n.forEach((c,f)=>{if(c.path===""||!c.path?.includes("?"))l(c,f);else for(let m of uS(c.path))l(c,f,!0,m)}),e}function uS(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let c=uS(r.join("/")),f=[];return f.push(...c.map(m=>m===""?l:[l,m].join("/"))),s&&f.push(...c),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function qD(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:WD(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var HD=/^:[\w-]+$/,GD=3,YD=2,KD=1,QD=10,$D=-2,S0=n=>n==="*";function XD(n,e){let t=n.split("/"),r=t.length;return t.some(S0)&&(r+=$D),e&&(r+=YD),t.filter(s=>!S0(s)).reduce((s,l)=>s+(HD.test(l)?GD:l===""?KD:QD),r)}function WD(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function ZD(n,e,t=!1){let{routesMeta:r}=n,s={},l="/",c=[];for(let f=0;f<r.length;++f){let m=r[f],g=f===r.length-1,_=l==="/"?e:e.slice(l.length)||"/",E=gd({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},_),w=m.route;if(!E&&g&&t&&!r[r.length-1].route.index&&(E=gd({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!E)return null;Object.assign(s,E.params),c.push({params:s,pathname:di([l,E.pathname]),pathnameBase:iC(di([l,E.pathnameBase])),route:w}),E.pathnameBase!=="/"&&(l=di([l,E.pathnameBase]))}return c}function gd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=JD(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),f=s.slice(1);return{params:r.reduce((g,{paramName:_,isOptional:E},w)=>{if(_==="*"){let P=f[w]||"";c=l.slice(0,l.length-P.length).replace(/(.)\/+$/,"$1")}const I=f[w];return E&&!I?g[_]=void 0:g[_]=(I||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function JD(n,e=!1,t=!0){Xt(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,m)=>(r.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function eC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xt(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Mr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function tC({basename:n,pathname:e}){return e==="/"?n:di([n,e])}function nC(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?hs(n):n;return{pathname:t?t.startsWith("/")?t:rC(t,e):e,search:aC(r),hash:sC(s)}}function rC(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Ip(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function cS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Uy(n){let e=cS(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function zy(n,e,t,r=!1){let s;typeof n=="string"?s=hs(n):(s={...n},Je(!s.pathname||!s.pathname.includes("?"),Ip("?","pathname","search",s)),Je(!s.pathname||!s.pathname.includes("#"),Ip("#","pathname","hash",s)),Je(!s.search||!s.search.includes("#"),Ip("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,f;if(c==null)f=t;else{let E=e.length-1;if(!r&&c.startsWith("..")){let w=c.split("/");for(;w[0]==="..";)w.shift(),E-=1;s.pathname=w.join("/")}f=E>=0?e[E]:"/"}let m=nC(s,f),g=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||_)&&(m.pathname+="/"),m}var di=n=>n.join("/").replace(/\/\/+/g,"/"),iC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),aC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,sC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,pd=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Nc(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var hS=["POST","PUT","PATCH","DELETE"],oC=new Set(hS),lC=["GET",...hS],uC=new Set(lC),cC=new Set([301,302,303,307,308]),hC=new Set([307,308]),Rp={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},fC={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ec={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},dC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,By=n=>dC.test(n),mC=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),fS="remix-router-transitions",dS=Symbol("ResetLoaderData");function gC(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Je(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=n.hydrationRouteProperties||[],s=n.mapRouteProperties||mC,l={},c=xc(n.routes,s,void 0,l),f,m=n.basename||"/";m.startsWith("/")||(m=`/${m}`);let g=n.dataStrategy||EC,_={...n.future},E=null,w=new Set,I=null,P=null,F=null,L=n.hydrationData!=null,ne=ja(c,n.history.location,m),te=!1,ee=null,_e;if(ne==null&&!n.patchRoutesOnNavigation){let N=Rr(404,{pathname:n.history.location.pathname}),{matches:j,route:K}=Vf(c);_e=!0,ne=j,ee={[K.id]:N}}else if(ne&&!n.hydrationData&&On(ne,c,n.history.location.pathname).active&&(ne=null),ne)if(ne.some(N=>N.route.lazy))_e=!1;else if(!ne.some(N=>N.route.loader))_e=!0;else{let N=n.hydrationData?n.hydrationData.loaderData:null,j=n.hydrationData?n.hydrationData.errors:null;if(j){let K=ne.findIndex(oe=>j[oe.route.id]!==void 0);_e=ne.slice(0,K+1).every(oe=>!Wp(oe.route,N,j))}else _e=ne.every(K=>!Wp(K.route,N,j))}else{_e=!1,ne=[];let N=On(null,c,n.history.location.pathname);N.active&&N.matches&&(te=!0,ne=N.matches)}let le,z={historyAction:n.history.action,location:n.history.location,matches:ne,initialized:_e,navigation:Rp,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||ee,fetchers:new Map,blockers:new Map},x="POP",A=!1,R,O=!1,k=new Map,U=null,D=!1,Ge=!1,nt=new Set,$=new Map,fe=0,ve=-1,je=new Map,M=new Set,ie=new Map,me=new Map,ue=new Set,De=new Map,qe,Pe=null;function qt(){if(E=n.history.listen(({action:N,location:j,delta:K})=>{if(qe){qe(),qe=void 0;return}Xt(De.size===0||K!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let oe=oa({currentLocation:z.location,nextLocation:j,historyAction:N});if(oe&&K!=null){let ce=new Promise(Ee=>{qe=Ee});n.history.go(K*-1),dr(oe,{state:"blocked",location:j,proceed(){dr(oe,{state:"proceeding",proceed:void 0,reset:void 0,location:j}),ce.then(()=>n.history.go(K))},reset(){let Ee=new Map(z.blockers);Ee.set(oe,ec),xt({blockers:Ee})}});return}return Mn(N,j)}),t){VC(e,k);let N=()=>kC(e,k);e.addEventListener("pagehide",N),U=()=>e.removeEventListener("pagehide",N)}return z.initialized||Mn("POP",z.location,{initialHydration:!0}),le}function wt(){E&&E(),U&&U(),w.clear(),R&&R.abort(),z.fetchers.forEach((N,j)=>Ht(j)),z.blockers.forEach((N,j)=>bi(j))}function cr(N){return w.add(N),()=>w.delete(N)}function xt(N,j={}){N.matches&&(N.matches=N.matches.map(ce=>{let Ee=l[ce.route.id],Ce=ce.route;return Ce.element!==Ee.element||Ce.errorElement!==Ee.errorElement||Ce.hydrateFallbackElement!==Ee.hydrateFallbackElement?{...ce,route:Ee}:ce})),z={...z,...N};let K=[],oe=[];z.fetchers.forEach((ce,Ee)=>{ce.state==="idle"&&(ue.has(Ee)?K.push(Ee):oe.push(Ee))}),ue.forEach(ce=>{!z.fetchers.has(ce)&&!$.has(ce)&&K.push(ce)}),[...w].forEach(ce=>ce(z,{deletedFetchers:K,viewTransitionOpts:j.viewTransitionOpts,flushSync:j.flushSync===!0})),K.forEach(ce=>Ht(ce)),oe.forEach(ce=>z.fetchers.delete(ce))}function An(N,j,{flushSync:K}={}){let oe=z.actionData!=null&&z.navigation.formMethod!=null&&Yn(z.navigation.formMethod)&&z.navigation.state==="loading"&&N.state?._isRedirect!==!0,ce;j.actionData?Object.keys(j.actionData).length>0?ce=j.actionData:ce=null:oe?ce=z.actionData:ce=null;let Ee=j.loaderData?O0(z.loaderData,j.loaderData,j.matches||[],j.errors):z.loaderData,Ce=z.blockers;Ce.size>0&&(Ce=new Map(Ce),Ce.forEach((Ie,we)=>Ce.set(we,ec)));let Se=D?!1:la(N,j.matches||z.matches),Ae=A===!0||z.navigation.formMethod!=null&&Yn(z.navigation.formMethod)&&N.state?._isRedirect!==!0;f&&(c=f,f=void 0),D||x==="POP"||(x==="PUSH"?n.history.push(N,N.state):x==="REPLACE"&&n.history.replace(N,N.state));let Me;if(x==="POP"){let Ie=k.get(z.location.pathname);Ie&&Ie.has(N.pathname)?Me={currentLocation:z.location,nextLocation:N}:k.has(N.pathname)&&(Me={currentLocation:N,nextLocation:z.location})}else if(O){let Ie=k.get(z.location.pathname);Ie?Ie.add(N.pathname):(Ie=new Set([N.pathname]),k.set(z.location.pathname,Ie)),Me={currentLocation:z.location,nextLocation:N}}xt({...j,actionData:ce,loaderData:Ee,historyAction:x,location:N,initialized:!0,navigation:Rp,revalidation:"idle",restoreScrollPosition:Se,preventScrollReset:Ae,blockers:Ce},{viewTransitionOpts:Me,flushSync:K===!0}),x="POP",A=!1,O=!1,D=!1,Ge=!1,Pe?.resolve(),Pe=null}async function Yr(N,j){if(typeof N=="number"){n.history.go(N);return}let K=Xp(z.location,z.matches,m,N,j?.fromRouteId,j?.relative),{path:oe,submission:ce,error:Ee}=A0(!1,K,j),Ce=z.location,Se=Cc(z.location,oe,j&&j.state);Se={...Se,...n.history.encodeLocation(Se)};let Ae=j&&j.replace!=null?j.replace:void 0,Me="PUSH";Ae===!0?Me="REPLACE":Ae===!1||ce!=null&&Yn(ce.formMethod)&&ce.formAction===z.location.pathname+z.location.search&&(Me="REPLACE");let Ie=j&&"preventScrollReset"in j?j.preventScrollReset===!0:void 0,we=(j&&j.flushSync)===!0,He=oa({currentLocation:Ce,nextLocation:Se,historyAction:Me});if(He){dr(He,{state:"blocked",location:Se,proceed(){dr(He,{state:"proceeding",proceed:void 0,reset:void 0,location:Se}),Yr(N,j)},reset(){let rt=new Map(z.blockers);rt.set(He,ec),xt({blockers:rt})}});return}await Mn(Me,Se,{submission:ce,pendingError:Ee,preventScrollReset:Ie,replace:j&&j.replace,enableViewTransition:j&&j.viewTransition,flushSync:we})}function Ti(){Pe||(Pe=LC()),sa(),xt({revalidation:"loading"});let N=Pe.promise;return z.navigation.state==="submitting"?N:z.navigation.state==="idle"?(Mn(z.historyAction,z.location,{startUninterruptedRevalidation:!0}),N):(Mn(x||z.historyAction,z.navigation.location,{overrideNavigation:z.navigation,enableViewTransition:O===!0}),N)}async function Mn(N,j,K){R&&R.abort(),R=null,x=N,D=(K&&K.startUninterruptedRevalidation)===!0,Or(z.location,z.matches),A=(K&&K.preventScrollReset)===!0,O=(K&&K.enableViewTransition)===!0;let oe=f||c,ce=K&&K.overrideNavigation,Ee=K?.initialHydration&&z.matches&&z.matches.length>0&&!te?z.matches:ja(oe,j,m),Ce=(K&&K.flushSync)===!0;if(Ee&&z.initialized&&!Ge&&DC(z.location,j)&&!(K&&K.submission&&Yn(K.submission.formMethod))){An(j,{matches:Ee},{flushSync:Ce});return}let Se=On(Ee,oe,j.pathname);if(Se.active&&Se.matches&&(Ee=Se.matches),!Ee){let{error:ht,notFoundMatches:Be,route:ft}=Si(j.pathname);An(j,{matches:Be,loaderData:{},errors:{[ft.id]:ht}},{flushSync:Ce});return}R=new AbortController;let Ae=pl(n.history,j,R.signal,K&&K.submission),Me=n.unstable_getContext?await n.unstable_getContext():new b0,Ie;if(K&&K.pendingError)Ie=[qa(Ee).route.id,{type:"error",error:K.pendingError}];else if(K&&K.submission&&Yn(K.submission.formMethod)){let ht=await ys(Ae,j,K.submission,Ee,Me,Se.active,K&&K.initialHydration===!0,{replace:K.replace,flushSync:Ce});if(ht.shortCircuited)return;if(ht.pendingActionResult){let[Be,ft]=ht.pendingActionResult;if(ar(ft)&&Nc(ft.error)&&ft.error.status===404){R=null,An(j,{matches:ht.matches,loaderData:{},errors:{[Be]:ft.error}});return}}Ee=ht.matches||Ee,Ie=ht.pendingActionResult,ce=Dp(j,K.submission),Ce=!1,Se.active=!1,Ae=pl(n.history,Ae.url,Ae.signal)}let{shortCircuited:we,matches:He,loaderData:rt,errors:gt}=await bo(Ae,j,Ee,Me,Se.active,ce,K&&K.submission,K&&K.fetcherSubmission,K&&K.replace,K&&K.initialHydration===!0,Ce,Ie);we||(R=null,An(j,{matches:He||Ee,...V0(Ie),loaderData:rt,errors:gt}))}async function ys(N,j,K,oe,ce,Ee,Ce,Se={}){sa();let Ae=PC(j,K);if(xt({navigation:Ae},{flushSync:Se.flushSync===!0}),Ee){let we=await Xr(oe,j.pathname,N.signal);if(we.type==="aborted")return{shortCircuited:!0};if(we.type==="error"){if(we.partialMatches.length===0){let{matches:rt,route:gt}=Vf(c);return{matches:rt,pendingActionResult:[gt.id,{type:"error",error:we.error}]}}let He=qa(we.partialMatches).route.id;return{matches:we.partialMatches,pendingActionResult:[He,{type:"error",error:we.error}]}}else if(we.matches)oe=we.matches;else{let{notFoundMatches:He,error:rt,route:gt}=Si(j.pathname);return{matches:He,pendingActionResult:[gt.id,{type:"error",error:rt}]}}}let Me,Ie=Kf(oe,j);if(!Ie.route.action&&!Ie.route.lazy)Me={type:"error",error:Rr(405,{method:N.method,pathname:j.pathname,routeId:Ie.route.id})};else{let we=Al(s,l,N,oe,Ie,Ce?[]:r,ce),He=await hr(N,we,ce,null);if(Me=He[Ie.route.id],!Me){for(let rt of oe)if(He[rt.route.id]){Me=He[rt.route.id];break}}if(N.signal.aborted)return{shortCircuited:!0}}if(to(Me)){let we;return Se&&Se.replace!=null?we=Se.replace:we=N0(Me.response.headers.get("Location"),new URL(N.url),m)===z.location.pathname+z.location.search,await Pr(N,Me,!0,{submission:K,replace:we}),{shortCircuited:!0}}if(ar(Me)){let we=qa(oe,Ie.route.id);return(Se&&Se.replace)!==!0&&(x="PUSH"),{matches:oe,pendingActionResult:[we.route.id,Me,Ie.route.id]}}return{matches:oe,pendingActionResult:[Ie.route.id,Me]}}async function bo(N,j,K,oe,ce,Ee,Ce,Se,Ae,Me,Ie,we){let He=Ee||Dp(j,Ce),rt=Ce||Se||L0(He),gt=!D&&!Me;if(ce){if(gt){let Nt=Pn(we);xt({navigation:He,...Nt!==void 0?{actionData:Nt}:{}},{flushSync:Ie})}let Ve=await Xr(K,j.pathname,N.signal);if(Ve.type==="aborted")return{shortCircuited:!0};if(Ve.type==="error"){if(Ve.partialMatches.length===0){let{matches:Vr,route:yn}=Vf(c);return{matches:Vr,loaderData:{},errors:{[yn.id]:Ve.error}}}let Nt=qa(Ve.partialMatches).route.id;return{matches:Ve.partialMatches,loaderData:{},errors:{[Nt]:Ve.error}}}else if(Ve.matches)K=Ve.matches;else{let{error:Nt,notFoundMatches:Vr,route:yn}=Si(j.pathname);return{matches:Vr,loaderData:{},errors:{[yn.id]:Nt}}}}let ht=f||c,{dsMatches:Be,revalidatingFetchers:ft}=I0(N,oe,s,l,n.history,z,K,rt,j,Me?[]:r,Me===!0,Ge,nt,ue,ie,M,ht,m,n.patchRoutesOnNavigation!=null,we);if(ve=++fe,!n.dataStrategy&&!Be.some(Ve=>Ve.shouldLoad)&&!Be.some(Ve=>Ve.route.unstable_middleware)&&ft.length===0){let Ve=Qr();return An(j,{matches:K,loaderData:{},errors:we&&ar(we[1])?{[we[0]]:we[1].error}:null,...V0(we),...Ve?{fetchers:new Map(z.fetchers)}:{}},{flushSync:Ie}),{shortCircuited:!0}}if(gt){let Ve={};if(!ce){Ve.navigation=He;let Nt=Pn(we);Nt!==void 0&&(Ve.actionData=Nt)}ft.length>0&&(Ve.fetchers=eu(ft)),xt(Ve,{flushSync:Ie})}ft.forEach(Ve=>{fr(Ve.key),Ve.controller&&$.set(Ve.key,Ve.controller)});let jn=()=>ft.forEach(Ve=>fr(Ve.key));R&&R.signal.addEventListener("abort",jn);let{loaderResults:pn,fetcherResults:sn}=await aa(Be,ft,N,oe);if(N.signal.aborted)return{shortCircuited:!0};R&&R.signal.removeEventListener("abort",jn),ft.forEach(Ve=>$.delete(Ve.key));let Vn=kf(pn);if(Vn)return await Pr(N,Vn.result,!0,{replace:Ae}),{shortCircuited:!0};if(Vn=kf(sn),Vn)return M.add(Vn.key),await Pr(N,Vn.result,!0,{replace:Ae}),{shortCircuited:!0};let{loaderData:ca,errors:$n}=P0(z,K,pn,we,ft,sn);Me&&z.errors&&($n={...z.errors,...$n});let gr=Qr(),Xn=$r(ve),kn=gr||Xn||ft.length>0;return{matches:K,loaderData:ca,errors:$n,...kn?{fetchers:new Map(z.fetchers)}:{}}}function Pn(N){if(N&&!ar(N[1]))return{[N[0]]:N[1].data};if(z.actionData)return Object.keys(z.actionData).length===0?null:z.actionData}function eu(N){return N.forEach(j=>{let K=z.fetchers.get(j.key),oe=tc(void 0,K?K.data:void 0);z.fetchers.set(j.key,oe)}),new Map(z.fetchers)}async function _s(N,j,K,oe){fr(N);let ce=(oe&&oe.flushSync)===!0,Ee=f||c,Ce=Xp(z.location,z.matches,m,K,j,oe?.relative),Se=ja(Ee,Ce,m),Ae=On(Se,Ee,Ce);if(Ae.active&&Ae.matches&&(Se=Ae.matches),!Se){Ke(N,j,Rr(404,{pathname:Ce}),{flushSync:ce});return}let{path:Me,submission:Ie,error:we}=A0(!0,Ce,oe);if(we){Ke(N,j,we,{flushSync:ce});return}let He=n.unstable_getContext?await n.unstable_getContext():new b0,rt=(oe&&oe.preventScrollReset)===!0;if(Ie&&Yn(Ie.formMethod)){await ia(N,j,Me,Se,He,Ae.active,ce,rt,Ie);return}ie.set(N,{routeId:j,path:Me}),await wi(N,j,Me,Se,He,Ae.active,ce,rt,Ie)}async function ia(N,j,K,oe,ce,Ee,Ce,Se,Ae){sa(),ie.delete(N);let Me=z.fetchers.get(N);ct(N,OC(Ae,Me),{flushSync:Ce});let Ie=new AbortController,we=pl(n.history,K,Ie.signal,Ae);if(Ee){let Dt=await Xr(oe,new URL(we.url).pathname,we.signal,N);if(Dt.type==="aborted")return;if(Dt.type==="error"){Ke(N,j,Dt.error,{flushSync:Ce});return}else if(Dt.matches)oe=Dt.matches;else{Ke(N,j,Rr(404,{pathname:K}),{flushSync:Ce});return}}let He=Kf(oe,K);if(!He.route.action&&!He.route.lazy){let Dt=Rr(405,{method:Ae.formMethod,pathname:K,routeId:j});Ke(N,j,Dt,{flushSync:Ce});return}$.set(N,Ie);let rt=fe,gt=Al(s,l,we,oe,He,r,ce),Be=(await hr(we,gt,ce,N))[He.route.id];if(we.signal.aborted){$.get(N)===Ie&&$.delete(N);return}if(ue.has(N)){if(to(Be)||ar(Be)){ct(N,Fa(void 0));return}}else{if(to(Be))if($.delete(N),ve>rt){ct(N,Fa(void 0));return}else return M.add(N),ct(N,tc(Ae)),Pr(we,Be,!1,{fetcherSubmission:Ae,preventScrollReset:Se});if(ar(Be)){Ke(N,j,Be.error);return}}let ft=z.navigation.location||z.location,jn=pl(n.history,ft,Ie.signal),pn=f||c,sn=z.navigation.state!=="idle"?ja(pn,z.navigation.location,m):z.matches;Je(sn,"Didn't find any matches after fetcher action");let Vn=++fe;je.set(N,Vn);let ca=tc(Ae,Be.data);z.fetchers.set(N,ca);let{dsMatches:$n,revalidatingFetchers:gr}=I0(jn,ce,s,l,n.history,z,sn,Ae,ft,r,!1,Ge,nt,ue,ie,M,pn,m,n.patchRoutesOnNavigation!=null,[He.route.id,Be]);gr.filter(Dt=>Dt.key!==N).forEach(Dt=>{let kr=Dt.key,ha=z.fetchers.get(kr),fa=tc(void 0,ha?ha.data:void 0);z.fetchers.set(kr,fa),fr(kr),Dt.controller&&$.set(kr,Dt.controller)}),xt({fetchers:new Map(z.fetchers)});let Xn=()=>gr.forEach(Dt=>fr(Dt.key));Ie.signal.addEventListener("abort",Xn);let{loaderResults:kn,fetcherResults:Ve}=await aa($n,gr,jn,ce);if(Ie.signal.aborted)return;if(Ie.signal.removeEventListener("abort",Xn),je.delete(N),$.delete(N),gr.forEach(Dt=>$.delete(Dt.key)),z.fetchers.has(N)){let Dt=Fa(Be.data);z.fetchers.set(N,Dt)}let Nt=kf(kn);if(Nt)return Pr(jn,Nt.result,!1,{preventScrollReset:Se});if(Nt=kf(Ve),Nt)return M.add(Nt.key),Pr(jn,Nt.result,!1,{preventScrollReset:Se});let{loaderData:Vr,errors:yn}=P0(z,sn,kn,void 0,gr,Ve);$r(Vn),z.navigation.state==="loading"&&Vn>ve?(Je(x,"Expected pending action"),R&&R.abort(),An(z.navigation.location,{matches:sn,loaderData:Vr,errors:yn,fetchers:new Map(z.fetchers)})):(xt({errors:yn,loaderData:O0(z.loaderData,Vr,sn,yn),fetchers:new Map(z.fetchers)}),Ge=!1)}async function wi(N,j,K,oe,ce,Ee,Ce,Se,Ae){let Me=z.fetchers.get(N);ct(N,tc(Ae,Me?Me.data:void 0),{flushSync:Ce});let Ie=new AbortController,we=pl(n.history,K,Ie.signal);if(Ee){let ft=await Xr(oe,new URL(we.url).pathname,we.signal,N);if(ft.type==="aborted")return;if(ft.type==="error"){Ke(N,j,ft.error,{flushSync:Ce});return}else if(ft.matches)oe=ft.matches;else{Ke(N,j,Rr(404,{pathname:K}),{flushSync:Ce});return}}let He=Kf(oe,K);$.set(N,Ie);let rt=fe,gt=Al(s,l,we,oe,He,r,ce),Be=(await hr(we,gt,ce,N))[He.route.id];if($.get(N)===Ie&&$.delete(N),!we.signal.aborted){if(ue.has(N)){ct(N,Fa(void 0));return}if(to(Be))if(ve>rt){ct(N,Fa(void 0));return}else{M.add(N),await Pr(we,Be,!1,{preventScrollReset:Se});return}if(ar(Be)){Ke(N,j,Be.error);return}ct(N,Fa(Be.data))}}async function Pr(N,j,K,{submission:oe,fetcherSubmission:ce,preventScrollReset:Ee,replace:Ce}={}){j.response.headers.has("X-Remix-Revalidate")&&(Ge=!0);let Se=j.response.headers.get("Location");Je(Se,"Expected a Location header on the redirect Response"),Se=N0(Se,new URL(N.url),m);let Ae=Cc(z.location,Se,{_isRedirect:!0});if(t){let gt=!1;if(j.response.headers.has("X-Remix-Reload-Document"))gt=!0;else if(By(Se)){const ht=oS(Se,!0);gt=ht.origin!==e.location.origin||Mr(ht.pathname,m)==null}if(gt){Ce?e.location.replace(Se):e.location.assign(Se);return}}R=null;let Me=Ce===!0||j.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Ie,formAction:we,formEncType:He}=z.navigation;!oe&&!ce&&Ie&&we&&He&&(oe=L0(z.navigation));let rt=oe||ce;if(hC.has(j.response.status)&&rt&&Yn(rt.formMethod))await Mn(Me,Ae,{submission:{...rt,formAction:Se},preventScrollReset:Ee||A,enableViewTransition:K?O:void 0});else{let gt=Dp(Ae,oe);await Mn(Me,Ae,{overrideNavigation:gt,fetcherSubmission:ce,preventScrollReset:Ee||A,enableViewTransition:K?O:void 0})}}async function hr(N,j,K,oe){let ce,Ee={};try{ce=await wC(g,N,j,oe,K,!1)}catch(Ce){return j.filter(Se=>Se.shouldLoad).forEach(Se=>{Ee[Se.route.id]={type:"error",error:Ce}}),Ee}if(N.signal.aborted)return Ee;for(let[Ce,Se]of Object.entries(ce))if(NC(Se)){let Ae=Se.result;Ee[Ce]={type:"redirect",response:IC(Ae,N,Ce,j,m)}}else Ee[Ce]=await AC(Se);return Ee}async function aa(N,j,K,oe){let ce=hr(K,N,oe,null),Ee=Promise.all(j.map(async Ae=>{if(Ae.matches&&Ae.match&&Ae.request&&Ae.controller){let Ie=(await hr(Ae.request,Ae.matches,oe,Ae.key))[Ae.match.route.id];return{[Ae.key]:Ie}}else return Promise.resolve({[Ae.key]:{type:"error",error:Rr(404,{pathname:Ae.path})}})})),Ce=await ce,Se=(await Ee).reduce((Ae,Me)=>Object.assign(Ae,Me),{});return{loaderResults:Ce,fetcherResults:Se}}function sa(){Ge=!0,ie.forEach((N,j)=>{$.has(j)&&nt.add(j),fr(j)})}function ct(N,j,K={}){z.fetchers.set(N,j),xt({fetchers:new Map(z.fetchers)},{flushSync:(K&&K.flushSync)===!0})}function Ke(N,j,K,oe={}){let ce=qa(z.matches,j);Ht(N),xt({errors:{[ce.route.id]:K},fetchers:new Map(z.fetchers)},{flushSync:(oe&&oe.flushSync)===!0})}function In(N){return me.set(N,(me.get(N)||0)+1),ue.has(N)&&ue.delete(N),z.fetchers.get(N)||fC}function Ht(N){let j=z.fetchers.get(N);$.has(N)&&!(j&&j.state==="loading"&&je.has(N))&&fr(N),ie.delete(N),je.delete(N),M.delete(N),ue.delete(N),nt.delete(N),z.fetchers.delete(N)}function So(N){let j=(me.get(N)||0)-1;j<=0?(me.delete(N),ue.add(N)):me.set(N,j),xt({fetchers:new Map(z.fetchers)})}function fr(N){let j=$.get(N);j&&(j.abort(),$.delete(N))}function Kr(N){for(let j of N){let K=In(j),oe=Fa(K.data);z.fetchers.set(j,oe)}}function Qr(){let N=[],j=!1;for(let K of M){let oe=z.fetchers.get(K);Je(oe,`Expected fetcher: ${K}`),oe.state==="loading"&&(M.delete(K),N.push(K),j=!0)}return Kr(N),j}function $r(N){let j=[];for(let[K,oe]of je)if(oe<N){let ce=z.fetchers.get(K);Je(ce,`Expected fetcher: ${K}`),ce.state==="loading"&&(fr(K),je.delete(K),j.push(K))}return Kr(j),j.length>0}function Qn(N,j){let K=z.blockers.get(N)||ec;return De.get(N)!==j&&De.set(N,j),K}function bi(N){z.blockers.delete(N),De.delete(N)}function dr(N,j){let K=z.blockers.get(N)||ec;Je(K.state==="unblocked"&&j.state==="blocked"||K.state==="blocked"&&j.state==="blocked"||K.state==="blocked"&&j.state==="proceeding"||K.state==="blocked"&&j.state==="unblocked"||K.state==="proceeding"&&j.state==="unblocked",`Invalid blocker state transition: ${K.state} -> ${j.state}`);let oe=new Map(z.blockers);oe.set(N,j),xt({blockers:oe})}function oa({currentLocation:N,nextLocation:j,historyAction:K}){if(De.size===0)return;De.size>1&&Xt(!1,"A router only supports one blocker at a time");let oe=Array.from(De.entries()),[ce,Ee]=oe[oe.length-1],Ce=z.blockers.get(ce);if(!(Ce&&Ce.state==="proceeding")&&Ee({currentLocation:N,nextLocation:j,historyAction:K}))return ce}function Si(N){let j=Rr(404,{pathname:N}),K=f||c,{matches:oe,route:ce}=Vf(K);return{notFoundMatches:oe,route:ce,error:j}}function vs(N,j,K){if(I=N,F=j,P=K||null,!L&&z.navigation===Rp){L=!0;let oe=la(z.location,z.matches);oe!=null&&xt({restoreScrollPosition:oe})}return()=>{I=null,F=null,P=null}}function mr(N,j){return P&&P(N,j.map(oe=>jD(oe,z.loaderData)))||N.key}function Or(N,j){if(I&&F){let K=mr(N,j);I[K]=F()}}function la(N,j){if(I){let K=mr(N,j),oe=I[K];if(typeof oe=="number")return oe}return null}function On(N,j,K){if(n.patchRoutesOnNavigation)if(N){if(Object.keys(N[0].params).length>0)return{active:!0,matches:Yf(j,K,m,!0)}}else return{active:!0,matches:Yf(j,K,m,!0)||[]};return{active:!1,matches:null}}async function Xr(N,j,K,oe){if(!n.patchRoutesOnNavigation)return{type:"success",matches:N};let ce=N;for(;;){let Ee=f==null,Ce=f||c,Se=l;try{await n.patchRoutesOnNavigation({signal:K,path:j,matches:ce,fetcherKey:oe,patch:(Ie,we)=>{K.aborted||R0(Ie,we,Ce,Se,s,!1)}})}catch(Ie){return{type:"error",error:Ie,partialMatches:ce}}finally{Ee&&!K.aborted&&(c=[...c])}if(K.aborted)return{type:"aborted"};let Ae=ja(Ce,j,m);if(Ae)return{type:"success",matches:Ae};let Me=Yf(Ce,j,m,!0);if(!Me||ce.length===Me.length&&ce.every((Ie,we)=>Ie.route.id===Me[we].route.id))return{type:"success",matches:null};ce=Me}}function Wr(N){l={},f=xc(N,s,void 0,l)}function ua(N,j,K=!1){let oe=f==null;R0(N,j,f||c,l,s,K),oe&&(c=[...c],xt({}))}return le={get basename(){return m},get future(){return _},get state(){return z},get routes(){return c},get window(){return e},initialize:qt,subscribe:cr,enableScrollRestoration:vs,navigate:Yr,fetch:_s,revalidate:Ti,createHref:N=>n.history.createHref(N),encodeLocation:N=>n.history.encodeLocation(N),getFetcher:In,deleteFetcher:So,dispose:wt,getBlocker:Qn,deleteBlocker:bi,patchRoutes:ua,_internalFetchControllers:$,_internalSetRoutes:Wr,_internalSetStateDoNotUseOrYouWillBreakYourApp(N){xt(N)}},le}function pC(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Xp(n,e,t,r,s,l){let c,f;if(s){c=[];for(let g of e)if(c.push(g),g.route.id===s){f=g;break}}else c=e,f=e[e.length-1];let m=zy(r||".",Uy(c),Mr(n.pathname,t)||n.pathname,l==="path");if(r==null&&(m.search=n.search,m.hash=n.hash),(r==null||r===""||r===".")&&f){let g=Fy(m.search);if(f.route.index&&!g)m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index";else if(!f.route.index&&g){let _=new URLSearchParams(m.search),E=_.getAll("index");_.delete("index"),E.filter(I=>I).forEach(I=>_.append("index",I));let w=_.toString();m.search=w?`?${w}`:""}}return t!=="/"&&(m.pathname=tC({basename:t,pathname:m.pathname})),as(m)}function A0(n,e,t){if(!t||!pC(t))return{path:e};if(t.formMethod&&!MC(t.formMethod))return{path:e,error:Rr(405,{method:t.formMethod})};let r=()=>({path:e,error:Rr(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),c=vS(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!Yn(l))return r();let E=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((w,[I,P])=>`${w}${I}=${P}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:E}}}else if(t.formEncType==="application/json"){if(!Yn(l))return r();try{let E=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:E,text:void 0}}}catch{return r()}}}Je(typeof FormData=="function","FormData is not available in this environment");let f,m;if(t.formData)f=Jp(t.formData),m=t.formData;else if(t.body instanceof FormData)f=Jp(t.body),m=t.body;else if(t.body instanceof URLSearchParams)f=t.body,m=M0(f);else if(t.body==null)f=new URLSearchParams,m=new FormData;else try{f=new URLSearchParams(t.body),m=M0(f)}catch{return r()}let g={formMethod:l,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:m,json:void 0,text:void 0};if(Yn(g.formMethod))return{path:e,submission:g};let _=hs(e);return n&&_.search&&Fy(_.search)&&f.append("index",""),_.search=`?${f}`,{path:as(_),submission:g}}function I0(n,e,t,r,s,l,c,f,m,g,_,E,w,I,P,F,L,ne,te,ee){let _e=ee?ar(ee[1])?ee[1].error:ee[1].data:void 0,le=s.createURL(l.location),z=s.createURL(m),x;if(_&&l.errors){let D=Object.keys(l.errors)[0];x=c.findIndex(Ge=>Ge.route.id===D)}else if(ee&&ar(ee[1])){let D=ee[0];x=c.findIndex(Ge=>Ge.route.id===D)-1}let A=ee?ee[1].statusCode:void 0,R=A&&A>=400,O={currentUrl:le,currentParams:l.matches[0]?.params||{},nextUrl:z,nextParams:c[0].params,...f,actionResult:_e,actionStatus:A},k=c.map((D,Ge)=>{let{route:nt}=D,$=null;if(x!=null&&Ge>x?$=!1:nt.lazy?$=!0:nt.loader==null?$=!1:_?$=Wp(nt,l.loaderData,l.errors):yC(l.loaderData,l.matches[Ge],D)&&($=!0),$!==null)return Zp(t,r,n,D,g,e,$);let fe=R?!1:E||le.pathname+le.search===z.pathname+z.search||le.search!==z.search||_C(l.matches[Ge],D),ve={...O,defaultShouldRevalidate:fe},je=yd(D,ve);return Zp(t,r,n,D,g,e,je,ve)}),U=[];return P.forEach((D,Ge)=>{if(_||!c.some(me=>me.route.id===D.routeId)||I.has(Ge))return;let nt=l.fetchers.get(Ge),$=nt&&nt.state!=="idle"&&nt.data===void 0,fe=ja(L,D.path,ne);if(!fe){if(te&&$)return;U.push({key:Ge,routeId:D.routeId,path:D.path,matches:null,match:null,request:null,controller:null});return}if(F.has(Ge))return;let ve=Kf(fe,D.path),je=new AbortController,M=pl(s,D.path,je.signal),ie=null;if(w.has(Ge))w.delete(Ge),ie=Al(t,r,M,fe,ve,g,e);else if($)E&&(ie=Al(t,r,M,fe,ve,g,e));else{let me={...O,defaultShouldRevalidate:R?!1:E};yd(ve,me)&&(ie=Al(t,r,M,fe,ve,g,e,me))}ie&&U.push({key:Ge,routeId:D.routeId,path:D.path,matches:ie,match:ve,request:M,controller:je})}),{dsMatches:k,revalidatingFetchers:U}}function Wp(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let r=e!=null&&n.id in e,s=t!=null&&t[n.id]!==void 0;return!r&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!s}function yC(n,e,t){let r=!e||t.route.id!==e.route.id,s=!n.hasOwnProperty(t.route.id);return r||s}function _C(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function yd(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function R0(n,e,t,r,s,l){let c;if(n){let g=r[n];Je(g,`No route found to patch children into: routeId = ${n}`),g.children||(g.children=[]),c=g.children}else c=t;let f=[],m=[];if(e.forEach(g=>{let _=c.find(E=>mS(g,E));_?m.push({existingRoute:_,newRoute:g}):f.push(g)}),f.length>0){let g=xc(f,s,[n||"_","patch",String(c?.length||"0")],r);c.push(...g)}if(l&&m.length>0)for(let g=0;g<m.length;g++){let{existingRoute:_,newRoute:E}=m[g],w=_,[I]=xc([E],s,[],{},!0);Object.assign(w,{element:I.element?I.element:w.element,errorElement:I.errorElement?I.errorElement:w.errorElement,hydrateFallbackElement:I.hydrateFallbackElement?I.hydrateFallbackElement:w.hydrateFallbackElement})}}function mS(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>e.children?.some(s=>mS(t,s))):!1}var D0=new WeakMap,gS=({key:n,route:e,manifest:t,mapRouteProperties:r})=>{let s=t[e.id];if(Je(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let l=s.lazy[n];if(!l)return;let c=D0.get(s);c||(c={},D0.set(s,c));let f=c[n];if(f)return f;let m=(async()=>{let g=UD(n),E=s[n]!==void 0&&n!=="hasErrorBoundary";if(g)Xt(!g,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),c[n]=Promise.resolve();else if(E)Xt(!1,`Route "${s.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let w=await l();w!=null&&(Object.assign(s,{[n]:w}),Object.assign(s,r(s)))}typeof s.lazy=="object"&&(s.lazy[n]=void 0,Object.values(s.lazy).every(w=>w===void 0)&&(s.lazy=void 0))})();return c[n]=m,m},C0=new WeakMap;function vC(n,e,t,r,s){let l=t[n.id];if(Je(l,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let _=C0.get(l);if(_)return{lazyRoutePromise:_,lazyHandlerPromise:_};let E=(async()=>{Je(typeof n.lazy=="function","No lazy route function found");let w=await n.lazy(),I={};for(let P in w){let F=w[P];if(F===void 0)continue;let L=BD(P),te=l[P]!==void 0&&P!=="hasErrorBoundary";L?Xt(!L,"Route property "+P+" is not a supported property to be returned from a lazy route function. This property will be ignored."):te?Xt(!te,`Route "${l.id}" has a static property "${P}" defined but its lazy function is also returning a value for this property. The lazy route property "${P}" will be ignored.`):I[P]=F}Object.assign(l,I),Object.assign(l,{...r(l),lazy:void 0})})();return C0.set(l,E),E.catch(()=>{}),{lazyRoutePromise:E,lazyHandlerPromise:E}}let c=Object.keys(n.lazy),f=[],m;for(let _ of c){if(s&&s.includes(_))continue;let E=gS({key:_,route:n,manifest:t,mapRouteProperties:r});E&&(f.push(E),_===e&&(m=E))}let g=f.length>0?Promise.all(f).then(()=>{}):void 0;return g?.catch(()=>{}),m?.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:m}}async function x0(n){let e=n.matches.filter(s=>s.shouldLoad),t={};return(await Promise.all(e.map(s=>s.resolve()))).forEach((s,l)=>{t[e[l].route.id]=s}),t}async function EC(n){return n.matches.some(e=>e.route.unstable_middleware)?pS(n,()=>x0(n)):x0(n)}function pS(n,e){return TC(n,e,r=>r,CC,t);function t(r,s,l){if(l)return Promise.resolve(Object.assign(l.value,{[s]:{type:"error",result:r}}));{let{matches:c}=n,f=Math.min(c.findIndex(g=>g.route.id===s)||0,c.findIndex(g=>g.unstable_shouldCallHandler())||0),m=qa(c,c[f].route.id).route.id;return Promise.resolve({[m]:{type:"error",result:r}})}}}async function TC(n,e,t,r,s){let{matches:l,request:c,params:f,context:m}=n,g=l.flatMap(E=>E.route.unstable_middleware?E.route.unstable_middleware.map(w=>[E.route.id,w]):[]);return await yS({request:c,params:f,context:m},g,e,t,r,s)}async function yS(n,e,t,r,s,l,c=0){let{request:f}=n;if(f.signal.aborted)throw f.signal.reason??new Error(`Request aborted: ${f.method} ${f.url}`);let m=e[c];if(!m)return await t();let[g,_]=m,E,w=async()=>{if(E)throw new Error("You may only call `next()` once per middleware");try{return E={value:await yS(n,e,t,r,s,l,c+1)},E.value}catch(I){return E={value:await l(I,g,E)},E.value}};try{let I=await _(n,w),P=I!=null?r(I):void 0;return s(P)?P:E?P??E.value:(E={value:await w()},E.value)}catch(I){return await l(I,g,E)}}function _S(n,e,t,r,s){let l=gS({key:"unstable_middleware",route:r.route,manifest:e,mapRouteProperties:n}),c=vC(r.route,Yn(t.method)?"action":"loader",e,n,s);return{middleware:l,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function Zp(n,e,t,r,s,l,c,f=null){let m=!1,g=_S(n,e,t,r,s);return{...r,_lazyPromises:g,shouldLoad:c,unstable_shouldRevalidateArgs:f,unstable_shouldCallHandler(_){return m=!0,f?typeof _=="boolean"?yd(r,{...f,defaultShouldRevalidate:_}):yd(r,f):c},resolve(_){return m||c||_&&!Yn(t.method)&&(r.route.lazy||r.route.loader)?bC({request:t,match:r,lazyHandlerPromise:g?.handler,lazyRoutePromise:g?.route,handlerOverride:_,scopedContext:l}):Promise.resolve({type:"data",result:void 0})}}}function Al(n,e,t,r,s,l,c,f=null){return r.map(m=>m.route.id!==s.route.id?{...m,shouldLoad:!1,unstable_shouldRevalidateArgs:f,unstable_shouldCallHandler:()=>!1,_lazyPromises:_S(n,e,t,m,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Zp(n,e,t,m,l,c,!0,f))}async function wC(n,e,t,r,s,l){t.some(g=>g._lazyPromises?.middleware)&&await Promise.all(t.map(g=>g._lazyPromises?.middleware));let c={request:e,params:t[0].params,context:s,matches:t},m=await n({...c,fetcherKey:r,unstable_runClientMiddleware:g=>{let _=c;return pS(_,()=>g({..._,fetcherKey:r,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(g=>[g._lazyPromises?.handler,g._lazyPromises?.route]))}catch{}return m}async function bC({request:n,match:e,lazyHandlerPromise:t,lazyRoutePromise:r,handlerOverride:s,scopedContext:l}){let c,f,m=Yn(n.method),g=m?"action":"loader",_=E=>{let w,I=new Promise((L,ne)=>w=ne);f=()=>w(),n.signal.addEventListener("abort",f);let P=L=>typeof E!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${g}" [routeId: ${e.route.id}]`)):E({request:n,params:e.params,context:l},...L!==void 0?[L]:[]),F=(async()=>{try{return{type:"data",result:await(s?s(ne=>P(ne)):P())}}catch(L){return{type:"error",result:L}}})();return Promise.race([F,I])};try{let E=m?e.route.action:e.route.loader;if(t||r)if(E){let w,[I]=await Promise.all([_(E).catch(P=>{w=P}),t,r]);if(w!==void 0)throw w;c=I}else{await t;let w=m?e.route.action:e.route.loader;if(w)[c]=await Promise.all([_(w),r]);else if(g==="action"){let I=new URL(n.url),P=I.pathname+I.search;throw Rr(405,{method:n.method,pathname:P,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(E)c=await _(E);else{let w=new URL(n.url),I=w.pathname+w.search;throw Rr(404,{pathname:I})}}catch(E){return{type:"error",result:E}}finally{f&&n.signal.removeEventListener("abort",f)}return c}async function SC(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function AC(n){let{result:e,type:t}=n;if(ES(e)){let r;try{r=await SC(e)}catch(s){return{type:"error",error:s}}return t==="error"?{type:"error",error:new pd(e.status,e.statusText,r),statusCode:e.status,headers:e.headers}:{type:"data",data:r,statusCode:e.status,headers:e.headers}}return t==="error"?k0(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new pd(e.init?.status||500,void 0,e.data),statusCode:Nc(e)?e.status:void 0,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Nc(e)?e.status:void 0}:k0(e)?{type:"data",data:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function IC(n,e,t,r,s){let l=n.headers.get("Location");if(Je(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!By(l)){let c=r.slice(0,r.findIndex(f=>f.route.id===t)+1);l=Xp(new URL(e.url),c,s,l),n.headers.set("Location",l)}return n}function N0(n,e,t){if(By(n)){let r=n,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),l=Mr(s.pathname,t)!=null;if(s.origin===e.origin&&l)return s.pathname+s.search+s.hash}return n}function pl(n,e,t,r){let s=n.createURL(vS(e)).toString(),l={signal:t};if(r&&Yn(r.formMethod)){let{formMethod:c,formEncType:f}=r;l.method=c.toUpperCase(),f==="application/json"?(l.headers=new Headers({"Content-Type":f}),l.body=JSON.stringify(r.json)):f==="text/plain"?l.body=r.text:f==="application/x-www-form-urlencoded"&&r.formData?l.body=Jp(r.formData):l.body=r.formData}return new Request(s,l)}function Jp(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function M0(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function RC(n,e,t,r=!1,s=!1){let l={},c=null,f,m=!1,g={},_=t&&ar(t[1])?t[1].error:void 0;return n.forEach(E=>{if(!(E.route.id in e))return;let w=E.route.id,I=e[w];if(Je(!to(I),"Cannot handle redirect results in processLoaderData"),ar(I)){let P=I.error;if(_!==void 0&&(P=_,_=void 0),c=c||{},s)c[w]=P;else{let F=qa(n,w);c[F.route.id]==null&&(c[F.route.id]=P)}r||(l[w]=dS),m||(m=!0,f=Nc(I.error)?I.error.status:500),I.headers&&(g[w]=I.headers)}else l[w]=I.data,I.statusCode&&I.statusCode!==200&&!m&&(f=I.statusCode),I.headers&&(g[w]=I.headers)}),_!==void 0&&t&&(c={[t[0]]:_},t[2]&&(l[t[2]]=void 0)),{loaderData:l,errors:c,statusCode:f||200,loaderHeaders:g}}function P0(n,e,t,r,s,l){let{loaderData:c,errors:f}=RC(e,t,r);return s.filter(m=>!m.matches||m.matches.some(g=>g.shouldLoad)).forEach(m=>{let{key:g,match:_,controller:E}=m;if(E&&E.signal.aborted)return;let w=l[g];if(Je(w,"Did not find corresponding fetcher result"),ar(w)){let I=qa(n.matches,_?.route.id);f&&f[I.route.id]||(f={...f,[I.route.id]:w.error}),n.fetchers.delete(g)}else if(to(w))Je(!1,"Unhandled fetcher revalidation redirect");else{let I=Fa(w.data);n.fetchers.set(g,I)}}),{loaderData:c,errors:f}}function O0(n,e,t,r){let s=Object.entries(e).filter(([,l])=>l!==dS).reduce((l,[c,f])=>(l[c]=f,l),{});for(let l of t){let c=l.route.id;if(!e.hasOwnProperty(c)&&n.hasOwnProperty(c)&&l.route.loader&&(s[c]=n[c]),r&&r.hasOwnProperty(c))break}return s}function V0(n){return n?ar(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function qa(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function Vf(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Rr(n,{pathname:e,routeId:t,method:r,type:s,message:l}={}){let c="Unknown Server Error",f="Unknown @remix-run/router error";return n===400?(c="Bad Request",r&&e&&t?f=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(f="Unable to encode submission body")):n===403?(c="Forbidden",f=`Route "${t}" does not match URL "${e}"`):n===404?(c="Not Found",f=`No route matches URL "${e}"`):n===405&&(c="Method Not Allowed",r&&e&&t?f=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(f=`Invalid request method "${r.toUpperCase()}"`)),new pd(n||500,c,new Error(f),!0)}function kf(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,s]=e[t];if(to(s))return{key:r,result:s}}}function vS(n){let e=typeof n=="string"?hs(n):n;return as({...e,hash:""})}function DC(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function CC(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&xC(t))}function xC(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function NC(n){return ES(n.result)&&cC.has(n.result.status)}function ar(n){return n.type==="error"}function to(n){return(n&&n.type)==="redirect"}function k0(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function ES(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function MC(n){return uC.has(n.toUpperCase())}function Yn(n){return oC.has(n.toUpperCase())}function Fy(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Kf(n,e){let t=typeof e=="string"?hs(e).search:e.search;if(n[n.length-1].route.index&&Fy(t||""))return n[n.length-1];let r=cS(n);return r[r.length-1]}function L0(n){let{formMethod:e,formAction:t,formEncType:r,text:s,formData:l,json:c}=n;if(!(!e||!t||!r)){if(s!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:s};if(l!=null)return{formMethod:e,formAction:t,formEncType:r,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:c,text:void 0}}}function Dp(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function PC(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function tc(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function OC(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Fa(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function VC(n,e){try{let t=n.sessionStorage.getItem(fS);if(t){let r=JSON.parse(t);for(let[s,l]of Object.entries(r||{}))l&&Array.isArray(l)&&e.set(s,new Set(l||[]))}}catch{}}function kC(n,e){if(e.size>0){let t={};for(let[r,s]of e)t[r]=[...s];try{n.sessionStorage.setItem(fS,JSON.stringify(t))}catch(r){Xt(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function LC(){let n,e,t=new Promise((r,s)=>{n=async l=>{r(l);try{await t}catch{}},e=async l=>{s(l);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var _o=Q.createContext(null);_o.displayName="DataRouter";var Zc=Q.createContext(null);Zc.displayName="DataRouterState";Q.createContext(!1);var jy=Q.createContext({isTransitioning:!1});jy.displayName="ViewTransition";var TS=Q.createContext(new Map);TS.displayName="Fetchers";var UC=Q.createContext(null);UC.displayName="Await";var vi=Q.createContext(null);vi.displayName="Navigation";var Hd=Q.createContext(null);Hd.displayName="Location";var Ei=Q.createContext({outlet:null,matches:[],isDataRoute:!1});Ei.displayName="Route";var qy=Q.createContext(null);qy.displayName="RouteError";function zC(n,{relative:e}={}){Je(Jc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=Q.useContext(vi),{hash:s,pathname:l,search:c}=th(n,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:di([t,l])),r.createHref({pathname:f,search:c,hash:s})}function Jc(){return Q.useContext(Hd)!=null}function vo(){return Je(Jc(),"useLocation() may be used only in the context of a <Router> component."),Q.useContext(Hd).location}var wS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bS(n){Q.useContext(vi).static||Q.useLayoutEffect(n)}function eh(){let{isDataRoute:n}=Q.useContext(Ei);return n?JC():BC()}function BC(){Je(Jc(),"useNavigate() may be used only in the context of a <Router> component.");let n=Q.useContext(_o),{basename:e,navigator:t}=Q.useContext(vi),{matches:r}=Q.useContext(Ei),{pathname:s}=vo(),l=JSON.stringify(Uy(r)),c=Q.useRef(!1);return bS(()=>{c.current=!0}),Q.useCallback((m,g={})=>{if(Xt(c.current,wS),!c.current)return;if(typeof m=="number"){t.go(m);return}let _=zy(m,JSON.parse(l),s,g.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:di([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,l,s,n])}Q.createContext(null);function FC(){let{matches:n}=Q.useContext(Ei),e=n[n.length-1];return e?e.params:{}}function th(n,{relative:e}={}){let{matches:t}=Q.useContext(Ei),{pathname:r}=vo(),s=JSON.stringify(Uy(t));return Q.useMemo(()=>zy(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function jC(n,e,t,r,s){Je(Jc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=Q.useContext(vi),{matches:c}=Q.useContext(Ei),f=c[c.length-1],m=f?f.params:{},g=f?f.pathname:"/",_=f?f.pathnameBase:"/",E=f&&f.route;{let te=E&&E.path||"";SS(g,!E||te.endsWith("*")||te.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${te}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${te}"> to <Route path="${te==="/"?"*":`${te}/*`}">.`)}let w=vo(),I;I=w;let P=I.pathname||"/",F=P;if(_!=="/"){let te=_.replace(/^\//,"").split("/");F="/"+P.replace(/^\//,"").split("/").slice(te.length).join("/")}let L=ja(n,{pathname:F});return Xt(E||L!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),Xt(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),KC(L&&L.map(te=>Object.assign({},te,{params:Object.assign({},m,te.params),pathname:di([_,l.encodeLocation?l.encodeLocation(te.pathname).pathname:te.pathname]),pathnameBase:te.pathnameBase==="/"?_:di([_,l.encodeLocation?l.encodeLocation(te.pathnameBase).pathname:te.pathnameBase])})),c,t,r,s)}function qC(){let n=ZC(),e=Nc(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=Q.createElement(Q.Fragment,null,Q.createElement("p",null,"💿 Hey developer 👋"),Q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Q.createElement("code",{style:l},"ErrorBoundary")," or"," ",Q.createElement("code",{style:l},"errorElement")," prop on your route.")),Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),t?Q.createElement("pre",{style:s},t):null,c)}var HC=Q.createElement(qC,null),GC=class extends Q.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?Q.createElement(Ei.Provider,{value:this.props.routeContext},Q.createElement(qy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function YC({routeContext:n,match:e,children:t}){let r=Q.useContext(_o);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),Q.createElement(Ei.Provider,{value:n},t)}function KC(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t?.errors;if(c!=null){let g=l.findIndex(_=>_.route.id&&c?.[_.route.id]!==void 0);Je(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let f=!1,m=-1;if(t)for(let g=0;g<l.length;g++){let _=l[g];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(m=g),_.route.id){let{loaderData:E,errors:w}=t,I=_.route.loader&&!E.hasOwnProperty(_.route.id)&&(!w||w[_.route.id]===void 0);if(_.route.lazy||I){f=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}return l.reduceRight((g,_,E)=>{let w,I=!1,P=null,F=null;t&&(w=c&&_.route.id?c[_.route.id]:void 0,P=_.route.errorElement||HC,f&&(m<0&&E===0?(SS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,F=null):m===E&&(I=!0,F=_.route.hydrateFallbackElement||null)));let L=e.concat(l.slice(0,E+1)),ne=()=>{let te;return w?te=P:I?te=F:_.route.Component?te=Q.createElement(_.route.Component,null):_.route.element?te=_.route.element:te=g,Q.createElement(YC,{match:_,routeContext:{outlet:g,matches:L,isDataRoute:t!=null},children:te})};return t&&(_.route.ErrorBoundary||_.route.errorElement||E===0)?Q.createElement(GC,{location:t.location,revalidation:t.revalidation,component:P,error:w,children:ne(),routeContext:{outlet:null,matches:L,isDataRoute:!0},unstable_onError:r}):ne()},null)}function Hy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QC(n){let e=Q.useContext(_o);return Je(e,Hy(n)),e}function $C(n){let e=Q.useContext(Zc);return Je(e,Hy(n)),e}function XC(n){let e=Q.useContext(Ei);return Je(e,Hy(n)),e}function Gy(n){let e=XC(n),t=e.matches[e.matches.length-1];return Je(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function WC(){return Gy("useRouteId")}function ZC(){let n=Q.useContext(qy),e=$C("useRouteError"),t=Gy("useRouteError");return n!==void 0?n:e.errors?.[t]}function JC(){let{router:n}=QC("useNavigate"),e=Gy("useNavigate"),t=Q.useRef(!1);return bS(()=>{t.current=!0}),Q.useCallback(async(s,l={})=>{Xt(t.current,wS),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...l}))},[n,e])}var U0={};function SS(n,e,t){!e&&!U0[n]&&(U0[n]=!0,Xt(!1,t))}var z0={};function B0(n,e){!n&&!z0[e]&&(z0[e]=!0,console.warn(e))}function ex(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&Xt(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:Q.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&Xt(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:Q.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&Xt(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:Q.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var tx=["HydrateFallback","hydrateFallbackElement"],nx=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function rx({router:n,flushSync:e,unstable_onError:t}){let[r,s]=Q.useState(n.state),[l,c]=Q.useState(),[f,m]=Q.useState({isTransitioning:!1}),[g,_]=Q.useState(),[E,w]=Q.useState(),[I,P]=Q.useState(),F=Q.useRef(new Map),L=Q.useCallback(le=>{s(z=>(le.errors&&t&&Object.entries(le.errors).forEach(([x,A])=>{z.errors?.[x]!==A&&t(A)}),le))},[t]),ne=Q.useCallback((le,{deletedFetchers:z,flushSync:x,viewTransitionOpts:A})=>{le.fetchers.forEach((O,k)=>{O.data!==void 0&&F.current.set(k,O.data)}),z.forEach(O=>F.current.delete(O)),B0(x===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let R=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(B0(A==null||R,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!A||!R){e&&x?e(()=>L(le)):Q.startTransition(()=>L(le));return}if(e&&x){e(()=>{E&&(g&&g.resolve(),E.skipTransition()),m({isTransitioning:!0,flushSync:!0,currentLocation:A.currentLocation,nextLocation:A.nextLocation})});let O=n.window.document.startViewTransition(()=>{e(()=>L(le))});O.finished.finally(()=>{e(()=>{_(void 0),w(void 0),c(void 0),m({isTransitioning:!1})})}),e(()=>w(O));return}E?(g&&g.resolve(),E.skipTransition(),P({state:le,currentLocation:A.currentLocation,nextLocation:A.nextLocation})):(c(le),m({isTransitioning:!0,flushSync:!1,currentLocation:A.currentLocation,nextLocation:A.nextLocation}))},[n.window,e,E,g,L]);Q.useLayoutEffect(()=>n.subscribe(ne),[n,ne]),Q.useEffect(()=>{f.isTransitioning&&!f.flushSync&&_(new nx)},[f]),Q.useEffect(()=>{if(g&&l&&n.window){let le=l,z=g.promise,x=n.window.document.startViewTransition(async()=>{Q.startTransition(()=>L(le)),await z});x.finished.finally(()=>{_(void 0),w(void 0),c(void 0),m({isTransitioning:!1})}),w(x)}},[l,g,n.window,L]),Q.useEffect(()=>{g&&l&&r.location.key===l.location.key&&g.resolve()},[g,E,r.location,l]),Q.useEffect(()=>{!f.isTransitioning&&I&&(c(I.state),m({isTransitioning:!0,flushSync:!1,currentLocation:I.currentLocation,nextLocation:I.nextLocation}),P(void 0))},[f.isTransitioning,I]);let te=Q.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:le=>n.navigate(le),push:(le,z,x)=>n.navigate(le,{state:z,preventScrollReset:x?.preventScrollReset}),replace:(le,z,x)=>n.navigate(le,{replace:!0,state:z,preventScrollReset:x?.preventScrollReset})}),[n]),ee=n.basename||"/",_e=Q.useMemo(()=>({router:n,navigator:te,static:!1,basename:ee,unstable_onError:t}),[n,te,ee,t]);return Q.createElement(Q.Fragment,null,Q.createElement(_o.Provider,{value:_e},Q.createElement(Zc.Provider,{value:r},Q.createElement(TS.Provider,{value:F.current},Q.createElement(jy.Provider,{value:f},Q.createElement(sx,{basename:ee,location:r.location,navigationType:r.historyAction,navigator:te},Q.createElement(ix,{routes:n.routes,future:n.future,state:r,unstable_onError:t})))))),null)}var ix=Q.memo(ax);function ax({routes:n,future:e,state:t,unstable_onError:r}){return jC(n,void 0,t,r,e)}function sx({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:l=!1}){Je(!Jc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),f=Q.useMemo(()=>({basename:c,navigator:s,static:l,future:{}}),[c,s,l]);typeof t=="string"&&(t=hs(t));let{pathname:m="/",search:g="",hash:_="",state:E=null,key:w="default"}=t,I=Q.useMemo(()=>{let P=Mr(m,c);return P==null?null:{location:{pathname:P,search:g,hash:_,state:E,key:w},navigationType:r}},[c,m,g,_,E,w,r]);return Xt(I!=null,`<Router basename="${c}"> is not able to match the URL "${m}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:Q.createElement(vi.Provider,{value:f},Q.createElement(Hd.Provider,{children:e,value:I}))}var Qf="get",$f="application/x-www-form-urlencoded";function Gd(n){return n!=null&&typeof n.tagName=="string"}function ox(n){return Gd(n)&&n.tagName.toLowerCase()==="button"}function lx(n){return Gd(n)&&n.tagName.toLowerCase()==="form"}function ux(n){return Gd(n)&&n.tagName.toLowerCase()==="input"}function cx(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function hx(n,e){return n.button===0&&(!e||e==="_self")&&!cx(n)}var Lf=null;function fx(){if(Lf===null)try{new FormData(document.createElement("form"),0),Lf=!1}catch{Lf=!0}return Lf}var dx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Cp(n){return n!=null&&!dx.has(n)?(Xt(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${$f}"`),null):n}function mx(n,e){let t,r,s,l,c;if(lx(n)){let f=n.getAttribute("action");r=f?Mr(f,e):null,t=n.getAttribute("method")||Qf,s=Cp(n.getAttribute("enctype"))||$f,l=new FormData(n)}else if(ox(n)||ux(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||f.getAttribute("action");if(r=m?Mr(m,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||Qf,s=Cp(n.getAttribute("formenctype"))||Cp(f.getAttribute("enctype"))||$f,l=new FormData(f,n),!fx()){let{name:g,type:_,value:E}=n;if(_==="image"){let w=g?`${g}.`:"";l.append(`${w}x`,"0"),l.append(`${w}y`,"0")}else g&&l.append(g,E)}}else{if(Gd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Qf,r=null,s=$f,c=n}return l&&s==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Yy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function gx(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Mr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function px(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yx(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function _x(n,e,t){let r=await Promise.all(n.map(async s=>{let l=e.routes[s.route.id];if(l){let c=await px(l,t);return c.links?c.links():[]}return[]}));return wx(r.flat(1).filter(yx).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function F0(n,e,t,r,s,l){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,f=(m,g)=>t[g].pathname!==m.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==m.params["*"];return l==="assets"?e.filter((m,g)=>c(m,g)||f(m,g)):l==="data"?e.filter((m,g)=>{let _=r.routes[m.route.id];if(!_||!_.hasLoader)return!1;if(c(m,g)||f(m,g))return!0;if(m.route.shouldRevalidate){let E=m.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function vx(n,e,{includeHydrateFallback:t}={}){return Ex(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function Ex(n){return[...new Set(n)]}function Tx(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function wx(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let l=JSON.stringify(Tx(s));return t.has(l)||(t.add(l),r.push({key:l,link:s})),r},[])}function AS(){let n=Q.useContext(_o);return Yy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function bx(){let n=Q.useContext(Zc);return Yy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ky=Q.createContext(void 0);Ky.displayName="FrameworkContext";function IS(){let n=Q.useContext(Ky);return Yy(n,"You must render this element inside a <HydratedRouter> element"),n}function Sx(n,e){let t=Q.useContext(Ky),[r,s]=Q.useState(!1),[l,c]=Q.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:g,onMouseLeave:_,onTouchStart:E}=e,w=Q.useRef(null);Q.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let F=ne=>{ne.forEach(te=>{c(te.isIntersecting)})},L=new IntersectionObserver(F,{threshold:.5});return w.current&&L.observe(w.current),()=>{L.disconnect()}}},[n]),Q.useEffect(()=>{if(r){let F=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(F)}}},[r]);let I=()=>{s(!0)},P=()=>{s(!1),c(!1)};return t?n!=="intent"?[l,w,{}]:[l,w,{onFocus:nc(f,I),onBlur:nc(m,P),onMouseEnter:nc(g,I),onMouseLeave:nc(_,P),onTouchStart:nc(E,I)}]:[!1,w,{}]}function nc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Ax({page:n,...e}){let{router:t}=AS(),r=Q.useMemo(()=>ja(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?Q.createElement(Rx,{page:n,matches:r,...e}):null}function Ix(n){let{manifest:e,routeModules:t}=IS(),[r,s]=Q.useState([]);return Q.useEffect(()=>{let l=!1;return _x(n,e,t).then(c=>{l||s(c)}),()=>{l=!0}},[n,e,t]),r}function Rx({page:n,matches:e,...t}){let r=vo(),{manifest:s,routeModules:l}=IS(),{basename:c}=AS(),{loaderData:f,matches:m}=bx(),g=Q.useMemo(()=>F0(n,e,m,s,r,"data"),[n,e,m,s,r]),_=Q.useMemo(()=>F0(n,e,m,s,r,"assets"),[n,e,m,s,r]),E=Q.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let P=new Set,F=!1;if(e.forEach(ne=>{let te=s.routes[ne.route.id];!te||!te.hasLoader||(!g.some(ee=>ee.route.id===ne.route.id)&&ne.route.id in f&&l[ne.route.id]?.shouldRevalidate||te.hasClientLoader?F=!0:P.add(ne.route.id))}),P.size===0)return[];let L=gx(n,c,"data");return F&&P.size>0&&L.searchParams.set("_routes",e.filter(ne=>P.has(ne.route.id)).map(ne=>ne.route.id).join(",")),[L.pathname+L.search]},[c,f,r,s,g,e,n,l]),w=Q.useMemo(()=>vx(_,s),[_,s]),I=Ix(_);return Q.createElement(Q.Fragment,null,E.map(P=>Q.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...t})),w.map(P=>Q.createElement("link",{key:P,rel:"modulepreload",href:P,...t})),I.map(({key:P,link:F})=>Q.createElement("link",{key:P,nonce:t.nonce,...F})))}function Dx(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var RS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{RS&&(window.__reactRouterVersion="7.8.2")}catch{}function Cx(n,e){return gC({basename:e?.basename,unstable_getContext:e?.unstable_getContext,future:e?.future,history:OD({window:e?.window}),hydrationData:xx(),routes:n,mapRouteProperties:ex,hydrationRouteProperties:tx,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window}).initialize()}function xx(){let n=window?.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:Nx(n.errors)}),n}function Nx(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")t[r]=new pd(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let l=window[s.__subType];if(typeof l=="function")try{let c=new l(s.message);c.stack="",t[r]=c}catch{}}if(t[r]==null){let l=new Error(s.message);l.stack="",t[r]=l}}else t[r]=s;return t}var DS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$a=Q.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:l,replace:c,state:f,target:m,to:g,preventScrollReset:_,viewTransition:E,...w},I){let{basename:P}=Q.useContext(vi),F=typeof g=="string"&&DS.test(g),L,ne=!1;if(typeof g=="string"&&F&&(L=g,RS))try{let R=new URL(window.location.href),O=g.startsWith("//")?new URL(R.protocol+g):new URL(g),k=Mr(O.pathname,P);O.origin===R.origin&&k!=null?g=k+O.search+O.hash:ne=!0}catch{Xt(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let te=zC(g,{relative:s}),[ee,_e,le]=Sx(r,w),z=Vx(g,{replace:c,state:f,target:m,preventScrollReset:_,relative:s,viewTransition:E});function x(R){e&&e(R),R.defaultPrevented||z(R)}let A=Q.createElement("a",{...w,...le,href:L||te,onClick:ne||l?e:x,ref:Dx(I,_e),target:m,"data-discover":!F&&t==="render"?"true":void 0});return ee&&!F?Q.createElement(Q.Fragment,null,A,Q.createElement(Ax,{page:te})):A});$a.displayName="Link";var Mx=Q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:l,to:c,viewTransition:f,children:m,...g},_){let E=th(c,{relative:g.relative}),w=vo(),I=Q.useContext(Zc),{navigator:P,basename:F}=Q.useContext(vi),L=I!=null&&Bx(E)&&f===!0,ne=P.encodeLocation?P.encodeLocation(E).pathname:E.pathname,te=w.pathname,ee=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;t||(te=te.toLowerCase(),ee=ee?ee.toLowerCase():null,ne=ne.toLowerCase()),ee&&F&&(ee=Mr(ee,F)||ee);const _e=ne!=="/"&&ne.endsWith("/")?ne.length-1:ne.length;let le=te===ne||!s&&te.startsWith(ne)&&te.charAt(_e)==="/",z=ee!=null&&(ee===ne||!s&&ee.startsWith(ne)&&ee.charAt(ne.length)==="/"),x={isActive:le,isPending:z,isTransitioning:L},A=le?e:void 0,R;typeof r=="function"?R=r(x):R=[r,le?"active":null,z?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let O=typeof l=="function"?l(x):l;return Q.createElement($a,{...g,"aria-current":A,className:R,ref:_,style:O,to:c,viewTransition:f},typeof m=="function"?m(x):m)});Mx.displayName="NavLink";var Px=Q.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:l,method:c=Qf,action:f,onSubmit:m,relative:g,preventScrollReset:_,viewTransition:E,...w},I)=>{let P=Ux(),F=zx(f,{relative:g}),L=c.toLowerCase()==="get"?"get":"post",ne=typeof f=="string"&&DS.test(f),te=ee=>{if(m&&m(ee),ee.defaultPrevented)return;ee.preventDefault();let _e=ee.nativeEvent.submitter,le=_e?.getAttribute("formmethod")||c;P(_e||ee.currentTarget,{fetcherKey:e,method:le,navigate:t,replace:s,state:l,relative:g,preventScrollReset:_,viewTransition:E})};return Q.createElement("form",{ref:I,method:L,action:F,onSubmit:r?m:te,...w,"data-discover":!ne&&n==="render"?"true":void 0})});Px.displayName="Form";function Ox(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function CS(n){let e=Q.useContext(_o);return Je(e,Ox(n)),e}function Vx(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:l,viewTransition:c}={}){let f=eh(),m=vo(),g=th(n,{relative:l});return Q.useCallback(_=>{if(hx(_,e)){_.preventDefault();let E=t!==void 0?t:as(m)===as(g);f(n,{replace:E,state:r,preventScrollReset:s,relative:l,viewTransition:c})}},[m,f,g,t,r,e,n,s,l,c])}var kx=0,Lx=()=>`__${String(++kx)}__`;function Ux(){let{router:n}=CS("useSubmit"),{basename:e}=Q.useContext(vi),t=WC();return Q.useCallback(async(r,s={})=>{let{action:l,method:c,encType:f,formData:m,body:g}=mx(r,e);if(s.navigate===!1){let _=s.fetcherKey||Lx();await n.fetch(_,t,s.action||l,{preventScrollReset:s.preventScrollReset,formData:m,body:g,formMethod:s.method||c,formEncType:s.encType||f,flushSync:s.flushSync})}else await n.navigate(s.action||l,{preventScrollReset:s.preventScrollReset,formData:m,body:g,formMethod:s.method||c,formEncType:s.encType||f,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function zx(n,{relative:e}={}){let{basename:t}=Q.useContext(vi),r=Q.useContext(Ei);Je(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),l={...th(n||".",{relative:e})},c=vo();if(n==null){l.search=c.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(_=>_==="")){f.delete("index"),m.filter(E=>E).forEach(E=>f.append("index",E));let _=f.toString();l.search=_?`?${_}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:di([t,l.pathname])),as(l)}function Bx(n,{relative:e}={}){let t=Q.useContext(jy);Je(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=CS("useViewTransitionState"),s=th(n,{relative:e});if(!t.isTransitioning)return!1;let l=Mr(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Mr(t.nextLocation.pathname,r)||t.nextLocation.pathname;return gd(s.pathname,c)!=null||gd(s.pathname,l)!=null}var Fx=aS();function jx(n){return Q.createElement(rx,{flushSync:Fx.flushSync,...n})}function qx(){return pe.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:pe.jsxs("div",{className:"text-center",children:[pe.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Streaks for Anything"}),pe.jsx("p",{className:"mb-8",children:"Build habits with friends or solo. Track your daily streaks!"}),pe.jsx("div",{className:"space-x-4",children:pe.jsx($a,{to:"/auth",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Sign Up / Sign In"})})]})})}const Hx=()=>{};var j0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Gx=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[r++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],c=n[t++],f=n[t++],m=((s&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return e.join("")},NS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const l=n[s],c=s+1<n.length,f=c?n[s+1]:0,m=s+2<n.length,g=m?n[s+2]:0,_=l>>2,E=(l&3)<<4|f>>4;let w=(f&15)<<2|g>>6,I=g&63;m||(I=64,c||(w=64)),r.push(t[_],t[E],t[w],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(xS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Gx(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],f=s<n.length?t[n.charAt(s)]:0;++s;const g=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||f==null||g==null||E==null)throw new Yx;const w=l<<2|f>>4;if(r.push(w),g!==64){const I=f<<4&240|g>>2;if(r.push(I),E!==64){const P=g<<6&192|E;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Yx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Kx=function(n){const e=xS(n);return NS.encodeByteArray(e,!0)},_d=function(n){return Kx(n).replace(/\./g,"")},MS=function(n){try{return NS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=()=>PS().__FIREBASE_DEFAULTS__,$x=()=>{if(typeof process>"u"||typeof j0>"u")return;const n=j0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Xx=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&MS(n[1]);return e&&JSON.parse(e)},Yd=()=>{try{return Hx()||Qx()||$x()||Xx()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},OS=n=>Yd()?.emulatorHosts?.[n],Wx=n=>{const e=OS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},VS=()=>Yd()?.config,kS=n=>Yd()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function LS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[_d(JSON.stringify(t)),_d(JSON.stringify(c)),""].join(".")}const _c={};function eN(){const n={prod:[],emulator:[]};for(const e of Object.keys(_c))_c[e]?n.emulator.push(e):n.prod.push(e);return n}function tN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let q0=!1;function US(n,e){if(typeof window>"u"||typeof document>"u"||!Yl(window.location.host)||_c[n]===e||_c[n]||q0)return;_c[n]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",l=eN().prod.length>0;function c(){const w=document.getElementById(r);w&&w.remove()}function f(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function m(w,I){w.setAttribute("width","24"),w.setAttribute("id",I),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function g(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{q0=!0,c()},w}function _(w,I){w.setAttribute("id",I),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function E(){const w=tN(r),I=t("text"),P=document.getElementById(I)||document.createElement("span"),F=t("learnmore"),L=document.getElementById(F)||document.createElement("a"),ne=t("preprendIcon"),te=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const ee=w.element;f(ee),_(L,F);const _e=g();m(te,ne),ee.append(te,P,L,_e),document.body.appendChild(ee)}l?(P.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function zS(){const n=Yd()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function aN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sN(){const n=nn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function BS(){return!zS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FS(){return!zS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function jS(){try{return typeof indexedDB=="object"}catch{return!1}}function oN(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN="FirebaseError";class ta extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=lN,Object.setPrototypeOf(this,ta.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nh.prototype.create)}}class nh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],c=l?uN(l,r):"Error",f=`${this.serviceName}: ${c} (${s}).`;return new ta(s,f,r)}}function uN(n,e){return n.replace(cN,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const cN=/\{\$([^}]+)}/g;function hN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ao(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const l=n[s],c=e[s];if(H0(l)&&H0(c)){if(!ao(l,c))return!1}else if(l!==c)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function H0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,l]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(l)}}),e}function fc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function fN(n,e){const t=new dN(n,e);return t.subscribe.bind(t)}class dN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");mN(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=xp),s.error===void 0&&(s.error=xp),s.complete===void 0&&(s.complete=xp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function xp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(n){return n&&n._delegate?n._delegate:n}class so{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Zx;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yN(e))try{this.getOrInitializeService({instanceIdentifier:Ks})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});r.resolve(l)}catch{}}}}clearInstance(e=Ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ks){return this.instances.has(e)}getOptions(e=Ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);r===f&&c.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const l=this.instances.get(r);return l&&e(l,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pN(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ks){return this.component?this.component.multipleInstances?e:Ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pN(n){return n===Ks?void 0:n}function yN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(et||(et={}));const vN={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},EN=et.INFO,TN={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},wN=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=TN[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qy{constructor(e){this.name=e,this._logLevel=EN,this._logHandler=wN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const bN=(n,e)=>e.some(t=>n instanceof t);let G0,Y0;function SN(){return G0||(G0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AN(){return Y0||(Y0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qS=new WeakMap,ey=new WeakMap,HS=new WeakMap,Np=new WeakMap,$y=new WeakMap;function IN(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Za(n.result)),s()},c=()=>{r(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&qS.set(t,n)}).catch(()=>{}),$y.set(e,n),e}function RN(n){if(ey.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),s()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});ey.set(n,e)}let ty={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ey.get(n);if(e==="objectStoreNames")return n.objectStoreNames||HS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Za(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function DN(n){ty=n(ty)}function CN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Mp(this),e,...t);return HS.set(r,e.sort?e.sort():[e]),Za(r)}:AN().includes(n)?function(...e){return n.apply(Mp(this),e),Za(qS.get(this))}:function(...e){return Za(n.apply(Mp(this),e))}}function xN(n){return typeof n=="function"?CN(n):(n instanceof IDBTransaction&&RN(n),bN(n,SN())?new Proxy(n,ty):n)}function Za(n){if(n instanceof IDBRequest)return IN(n);if(Np.has(n))return Np.get(n);const e=xN(n);return e!==n&&(Np.set(n,e),$y.set(e,n)),e}const Mp=n=>$y.get(n);function NN(n,e,{blocked:t,upgrade:r,blocking:s,terminated:l}={}){const c=indexedDB.open(n,e),f=Za(c);return r&&c.addEventListener("upgradeneeded",m=>{r(Za(c.result),m.oldVersion,m.newVersion,Za(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),s&&m.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const MN=["get","getKey","getAll","getAllKeys","count"],PN=["put","add","delete","clear"],Pp=new Map;function K0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Pp.get(e))return Pp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=PN.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||MN.includes(t)))return;const l=async function(c,...f){const m=this.transaction(c,s?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(f.shift())),(await Promise.all([g[t](...f),s&&m.done]))[0]};return Pp.set(e,l),l}DN(n=>({...n,get:(e,t,r)=>K0(e,t)||n.get(e,t,r),has:(e,t)=>!!K0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(VN(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function VN(n){return n.getComponent()?.type==="VERSION"}const ny="@firebase/app",Q0="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=new Qy("@firebase/app"),kN="@firebase/app-compat",LN="@firebase/analytics-compat",UN="@firebase/analytics",zN="@firebase/app-check-compat",BN="@firebase/app-check",FN="@firebase/auth",jN="@firebase/auth-compat",qN="@firebase/database",HN="@firebase/data-connect",GN="@firebase/database-compat",YN="@firebase/functions",KN="@firebase/functions-compat",QN="@firebase/installations",$N="@firebase/installations-compat",XN="@firebase/messaging",WN="@firebase/messaging-compat",ZN="@firebase/performance",JN="@firebase/performance-compat",e2="@firebase/remote-config",t2="@firebase/remote-config-compat",n2="@firebase/storage",r2="@firebase/storage-compat",i2="@firebase/firestore",a2="@firebase/ai",s2="@firebase/firestore-compat",o2="firebase",l2="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="[DEFAULT]",u2={[ny]:"fire-core",[kN]:"fire-core-compat",[UN]:"fire-analytics",[LN]:"fire-analytics-compat",[BN]:"fire-app-check",[zN]:"fire-app-check-compat",[FN]:"fire-auth",[jN]:"fire-auth-compat",[qN]:"fire-rtdb",[HN]:"fire-data-connect",[GN]:"fire-rtdb-compat",[YN]:"fire-fn",[KN]:"fire-fn-compat",[QN]:"fire-iid",[$N]:"fire-iid-compat",[XN]:"fire-fcm",[WN]:"fire-fcm-compat",[ZN]:"fire-perf",[JN]:"fire-perf-compat",[e2]:"fire-rc",[t2]:"fire-rc-compat",[n2]:"fire-gcs",[r2]:"fire-gcs-compat",[i2]:"fire-fst",[s2]:"fire-fst-compat",[a2]:"fire-vertex","fire-js":"fire-js",[o2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=new Map,c2=new Map,iy=new Map;function $0(n,e){try{n.container.addComponent(e)}catch(t){Xi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Nl(n){const e=n.name;if(iy.has(e))return Xi.debug(`There were multiple attempts to register component ${e}.`),!1;iy.set(e,n);for(const t of vd.values())$0(t,n);for(const t of c2.values())$0(t,n);return!0}function Xy(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Dr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ja=new nh("app","Firebase",h2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new so("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ja.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=l2;function GS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:ry,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Ja.create("bad-app-name",{appName:String(s)});if(t||(t=VS()),!t)throw Ja.create("no-options");const l=vd.get(s);if(l){if(ao(t,l.options)&&ao(r,l.config))return l;throw Ja.create("duplicate-app",{appName:s})}const c=new _N(s);for(const m of iy.values())c.addComponent(m);const f=new f2(t,r,c);return vd.set(s,f),f}function YS(n=ry){const e=vd.get(n);if(!e&&n===ry&&VS())return GS();if(!e)throw Ja.create("no-app",{appName:n});return e}function es(n,e,t){let r=u2[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xi.warn(c.join(" "));return}Nl(new so(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2="firebase-heartbeat-database",m2=1,Mc="firebase-heartbeat-store";let Op=null;function KS(){return Op||(Op=NN(d2,m2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Mc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ja.create("idb-open",{originalErrorMessage:n.message})})),Op}async function g2(n){try{const t=(await KS()).transaction(Mc),r=await t.objectStore(Mc).get(QS(n));return await t.done,r}catch(e){if(e instanceof ta)Xi.warn(e.message);else{const t=Ja.create("idb-get",{originalErrorMessage:e?.message});Xi.warn(t.message)}}}async function X0(n,e){try{const r=(await KS()).transaction(Mc,"readwrite");await r.objectStore(Mc).put(e,QS(n)),await r.done}catch(t){if(t instanceof ta)Xi.warn(t.message);else{const r=Ja.create("idb-set",{originalErrorMessage:t?.message});Xi.warn(r.message)}}}function QS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=1024,y2=30;class _2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new E2(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=W0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>y2){const s=T2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Xi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=W0(),{heartbeatsToSend:t,unsentEntries:r}=v2(this._heartbeatsCache.heartbeats),s=_d(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Xi.warn(e),""}}}function W0(){return new Date().toISOString().substring(0,10)}function v2(n,e=p2){const t=[];let r=n.slice();for(const s of n){const l=t.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),Z0(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Z0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class E2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jS()?oN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await g2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return X0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return X0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Z0(n){return _d(JSON.stringify({version:2,heartbeats:n})).length}function T2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(n){Nl(new so("platform-logger",e=>new ON(e),"PRIVATE")),Nl(new so("heartbeat",e=>new _2(e),"PRIVATE")),es(ny,Q0,n),es(ny,Q0,"esm2020"),es("fire-js","")}w2("");function $S(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const b2=$S,XS=new nh("auth","Firebase",$S());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=new Qy("@firebase/auth");function S2(n,...e){Ed.logLevel<=et.WARN&&Ed.warn(`Auth (${Kl}): ${n}`,...e)}function Xf(n,...e){Ed.logLevel<=et.ERROR&&Ed.error(`Auth (${Kl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(n,...e){throw Wy(n,...e)}function mi(n,...e){return Wy(n,...e)}function WS(n,e,t){const r={...b2(),[e]:t};return new nh("auth","Firebase",r).create(e,{appName:n.name})}function Qi(n){return WS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wy(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return XS.create(n,...e)}function Le(n,e,...t){if(!n)throw Wy(e,...t)}function Gi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Xf(e),new Error(e)}function Wi(n,e){n||Gi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(){return typeof self<"u"&&self.location?.href||""}function A2(){return J0()==="http:"||J0()==="https:"}function J0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(A2()||iN()||"connection"in navigator)?navigator.onLine:!0}function R2(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wi(t>e,"Short delay should be less than long delay!"),this.isMobile=nN()||aN()}get(){return I2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(n,e){Wi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],x2=new ih(3e4,6e4);function fs(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ds(n,e,t,r,s={}){return JS(n,s,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const f=rh({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:m,...l};return rN()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Yl(n.emulatorConfig.host)&&(g.credentials="include"),ZS.fetch()(await eA(n,n.config.apiHost,t,f),g)})}async function JS(n,e,t){n._canInitEmulator=!1;const r={...D2,...e};try{const s=new M2(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Uf(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[m,g]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uf(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Uf(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw Uf(n,"user-disabled",c);const _=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw WS(n,_,g);Hr(n,_)}}catch(s){if(s instanceof ta)throw s;Hr(n,"network-request-failed",{message:String(s)})}}async function ah(n,e,t,r,s={}){const l=await ds(n,e,t,r,s);return"mfaPendingCredential"in l&&Hr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function eA(n,e,t,r){const s=`${e}${t}?${r}`,l=n,c=l.config.emulator?Zy(n.config,s):`${n.config.apiScheme}://${s}`;return C2.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function N2(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class M2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(mi(this.auth,"network-request-failed")),x2.get())})}}function Uf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=mi(n,e,r);return s.customData._tokenResponse=t,s}function ew(n){return n!==void 0&&n.enterprise!==void 0}class P2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return N2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function O2(n,e){return ds(n,"GET","/v2/recaptchaConfig",fs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V2(n,e){return ds(n,"POST","/v1/accounts:delete",e)}async function Td(n,e){return ds(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function k2(n,e=!1){const t=rn(n),r=await t.getIdToken(e),s=Jy(r);Le(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l?.sign_in_provider;return{claims:s,token:r,authTime:vc(Vp(s.auth_time)),issuedAtTime:vc(Vp(s.iat)),expirationTime:vc(Vp(s.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Vp(n){return Number(n)*1e3}function Jy(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Xf("JWT malformed, contained fewer than 3 sections"),null;try{const s=MS(t);return s?JSON.parse(s):(Xf("Failed to decode base64 JWT payload"),null)}catch(s){return Xf("Caught error parsing JWT payload as JSON",s?.toString()),null}}function tw(n){const e=Jy(n);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ta&&L2(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function L2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=vc(this.lastLoginAt),this.creationTime=vc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wd(n){const e=n.auth,t=await n.getIdToken(),r=await Pc(n,Td(e,{idToken:t}));Le(r?.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const l=s.providerUserInfo?.length?tA(s.providerUserInfo):[],c=B2(n.providerData,l),f=n.isAnonymous,m=!(n.email&&s.passwordHash)&&!c?.length,g=f?m:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new sy(s.createdAt,s.lastLoginAt),isAnonymous:g};Object.assign(n,_)}async function z2(n){const e=rn(n);await wd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function B2(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function tA(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F2(n,e){const t=await JS(n,{},async()=>{const r=rh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,c=await eA(n,s,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:r};return n.emulatorConfig&&Yl(n.emulatorConfig.host)&&(m.credentials="include"),ZS.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function j2(n,e){return ds(n,"POST","/v2/accounts:revokeToken",fs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const t=tw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:l}=await F2(e,t);this.updateTokensAndExpiration(r,s,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:l}=t,c=new Il;return r&&(Le(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(Le(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),l&&(Le(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Il,this.toJSON())}_performRefresh(){return Gi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ka(n,e){Le(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class jr{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new U2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new sy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Pc(this,this.stsTokenManager.getToken(this.auth,e));return Le(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return k2(this,e)}reload(){return z2(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new jr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await wd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dr(this.auth.app))return Promise.reject(Qi(this.auth));const e=await this.getIdToken();return await Pc(this,V2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:w,isAnonymous:I,providerData:P,stsTokenManager:F}=t;Le(E&&F,e,"internal-error");const L=Il.fromJSON(this.name,F);Le(typeof E=="string",e,"internal-error"),ka(r,e.name),ka(s,e.name),Le(typeof w=="boolean",e,"internal-error"),Le(typeof I=="boolean",e,"internal-error"),ka(l,e.name),ka(c,e.name),ka(f,e.name),ka(m,e.name),ka(g,e.name),ka(_,e.name);const ne=new jr({uid:E,auth:e,email:s,emailVerified:w,displayName:r,isAnonymous:I,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:L,createdAt:g,lastLoginAt:_});return P&&Array.isArray(P)&&(ne.providerData=P.map(te=>({...te}))),m&&(ne._redirectEventId=m),ne}static async _fromIdTokenResponse(e,t,r=!1){const s=new Il;s.updateFromServerResponse(t);const l=new jr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await wd(l),l}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Le(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?tA(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!l?.length,f=new Il;f.updateFromIdToken(r);const m=new jr({uid:s.localId,auth:e,stsTokenManager:f,isAnonymous:c}),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new sy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!l?.length};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=new Map;function Yi(n){Wi(n instanceof Function,"Expected a class definition");let e=nw.get(n);return e?(Wi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,nw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}nA.type="NONE";const rw=nA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(n,e,t){return`firebase:${n}:${e}:${t}`}class Rl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:l}=this.auth;this.fullUserKey=Wf(this.userKey,s.apiKey,l),this.fullPersistenceKey=Wf("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Td(this.auth,{idToken:e}).catch(()=>{});return t?jr._fromGetAccountInfoResponse(this.auth,t,e):null}return jr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Rl(Yi(rw),e,r);const s=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=s[0]||Yi(rw);const c=Wf(r,e.config.apiKey,e.name);let f=null;for(const g of t)try{const _=await g._get(c);if(_){let E;if(typeof _=="string"){const w=await Td(e,{idToken:_}).catch(()=>{});if(!w)break;E=await jr._fromGetAccountInfoResponse(e,w,_)}else E=jr._fromJSON(e,_);g!==l&&(f=E),l=g;break}}catch{}const m=s.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Rl(l,e,r):(l=m[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Rl(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lA(e))return"Blackberry";if(uA(e))return"Webos";if(iA(e))return"Safari";if((e.includes("chrome/")||aA(e))&&!e.includes("edge/"))return"Chrome";if(oA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function rA(n=nn()){return/firefox\//i.test(n)}function iA(n=nn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aA(n=nn()){return/crios\//i.test(n)}function sA(n=nn()){return/iemobile/i.test(n)}function oA(n=nn()){return/android/i.test(n)}function lA(n=nn()){return/blackberry/i.test(n)}function uA(n=nn()){return/webos/i.test(n)}function e_(n=nn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function q2(n=nn()){return e_(n)&&!!window.navigator?.standalone}function H2(){return sN()&&document.documentMode===10}function cA(n=nn()){return e_(n)||oA(n)||uA(n)||lA(n)||/windows phone/i.test(n)||sA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(n,e=[]){let t;switch(n){case"Browser":t=iw(nn());break;case"Worker":t=`${iw(nn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Kl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,f)=>{try{const m=e(l);c(m)}catch(m){f(m)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y2(n,e={}){return ds(n,"GET","/v2/passwordPolicy",fs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=6;class Q2{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??K2,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aw(this),this.idTokenSubscription=new aw(this),this.beforeStateQueue=new G2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Yi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Rl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Td(this,{idToken:e}),r=await jr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Dr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=r?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===c)&&f?.user&&(r=f.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=R2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dr(this.app))return Promise.reject(Qi(this));const t=e?rn(e):null;return t&&Le(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dr(this.app)?Promise.reject(Qi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dr(this.app)?Promise.reject(Qi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Y2(this),t=new Q2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new nh("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await j2(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Yi(e)||this._popupRedirectResolver;Le(t,this,"argument-error"),this.redirectPersistenceManager=await Rl.create(this,[Yi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,s);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&S2(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Eo(n){return rn(n)}class aw{constructor(e){this.auth=e,this.observer=null,this.addObserver=fN(t=>this.observer=t)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function X2(n){Kd=n}function fA(n){return Kd.loadJS(n)}function W2(){return Kd.recaptchaEnterpriseScript}function Z2(){return Kd.gapiScript}function J2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class eM{constructor(){this.enterprise=new tM}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class tM{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const nM="recaptcha-enterprise",dA="NO_RECAPTCHA";class rM{constructor(e){this.type=nM,this.auth=Eo(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{O2(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new P2(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(m=>{f(m)})})}function s(l,c,f){const m=window.grecaptcha;ew(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(dA)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eM().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(f=>{if(!t&&ew(window.grecaptcha))s(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=W2();m.length!==0&&(m+=f),fA(m).then(()=>{s(f,l,c)}).catch(g=>{c(g)})}}).catch(f=>{c(f)})})}}async function sw(n,e,t,r=!1,s=!1){const l=new rM(n);let c;if(s)c=dA;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return r?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function oy(n,e,t,r,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await sw(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await sw(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(n,e){const t=Xy(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(ao(l,e??{}))return s;Hr(s,"already-initialized")}return t.initialize({options:e})}function aM(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Yi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function sM(n,e,t){const r=Eo(n);Le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,l=mA(e),{host:c,port:f}=oM(e),m=f===null?"":`:${f}`,g={url:`${l}//${c}${m}/`},_=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Le(ao(g,r.config.emulator)&&ao(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,Yl(c)?(LS(`${l}//${c}${m}`),US("Auth",!0)):lM()}function mA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function oM(n){const e=mA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const l=s[1];return{host:l,port:ow(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:ow(c)}}}function ow(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function lM(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Gi("not implemented")}_getIdTokenResponse(e){return Gi("not implemented")}_linkToIdToken(e,t){return Gi("not implemented")}_getReauthenticationResolver(e){return Gi("not implemented")}}async function uM(n,e){return ds(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cM(n,e){return ah(n,"POST","/v1/accounts:signInWithPassword",fs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hM(n,e){return ah(n,"POST","/v1/accounts:signInWithEmailLink",fs(n,e))}async function fM(n,e){return ah(n,"POST","/v1/accounts:signInWithEmailLink",fs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends t_{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Oc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Oc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return oy(e,t,"signInWithPassword",cM);case"emailLink":return hM(e,{email:this._email,oobCode:this._password});default:Hr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return oy(e,r,"signUpPassword",uM);case"emailLink":return fM(e,{idToken:t,email:this._email,oobCode:this._password});default:Hr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(n,e){return ah(n,"POST","/v1/accounts:signInWithIdp",fs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM="http://localhost";class oo extends t_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Hr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...l}=t;if(!r||!s)return null;const c=new oo(r,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Dl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Dl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Dl(e,t)}buildRequest(){const e={requestUri:dM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=rh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mM(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gM(n){const e=hc(fc(n)).link,t=e?hc(fc(e)).deep_link_id:null,r=hc(fc(n)).deep_link_id;return(r?hc(fc(r)).link:null)||r||t||e||n}class n_{constructor(e){const t=hc(fc(e)),r=t.apiKey??null,s=t.oobCode??null,l=mM(t.mode??null);Le(r&&s&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=gM(e);try{return new n_(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(){this.providerId=Ql.PROVIDER_ID}static credential(e,t){return Oc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=n_.parseLink(t);return Le(r,"argument-error"),Oc._fromEmailAndCode(e,r.code,r.tenantId)}}Ql.PROVIDER_ID="password";Ql.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ql.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh extends gA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha extends sh{constructor(){super("facebook.com")}static credential(e){return oo._fromParams({providerId:Ha.PROVIDER_ID,signInMethod:Ha.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ha.credentialFromTaggedObject(e)}static credentialFromError(e){return Ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ha.credential(e.oauthAccessToken)}catch{return null}}}Ha.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ha.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga extends sh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return oo._fromParams({providerId:Ga.PROVIDER_ID,signInMethod:Ga.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ga.credentialFromTaggedObject(e)}static credentialFromError(e){return Ga.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ga.credential(t,r)}catch{return null}}}Ga.GOOGLE_SIGN_IN_METHOD="google.com";Ga.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends sh{constructor(){super("github.com")}static credential(e){return oo._fromParams({providerId:Ya.PROVIDER_ID,signInMethod:Ya.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ya.credentialFromTaggedObject(e)}static credentialFromError(e){return Ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ya.credential(e.oauthAccessToken)}catch{return null}}}Ya.GITHUB_SIGN_IN_METHOD="github.com";Ya.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka extends sh{constructor(){super("twitter.com")}static credential(e,t){return oo._fromParams({providerId:Ka.PROVIDER_ID,signInMethod:Ka.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ka.credentialFromTaggedObject(e)}static credentialFromError(e){return Ka.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ka.credential(t,r)}catch{return null}}}Ka.TWITTER_SIGN_IN_METHOD="twitter.com";Ka.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pM(n,e){return ah(n,"POST","/v1/accounts:signUp",fs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const l=await jr._fromIdTokenResponse(e,r,s),c=lw(r);return new lo({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=lw(r);return new lo({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function lw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd extends ta{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,bd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new bd(e,t,r,s)}}function pA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?bd._fromErrorAndOperation(n,l,e,r):l})}async function yM(n,e,t=!1){const r=await Pc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return lo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _M(n,e,t=!1){const{auth:r}=n;if(Dr(r.app))return Promise.reject(Qi(r));const s="reauthenticate";try{const l=await Pc(n,pA(r,s,e,n),t);Le(l.idToken,r,"internal-error");const c=Jy(l.idToken);Le(c,r,"internal-error");const{sub:f}=c;return Le(n.uid===f,r,"user-mismatch"),lo._forOperation(n,s,l)}catch(l){throw l?.code==="auth/user-not-found"&&Hr(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yA(n,e,t=!1){if(Dr(n.app))return Promise.reject(Qi(n));const r="signIn",s=await pA(n,r,e),l=await lo._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(l.user),l}async function vM(n,e){return yA(Eo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _A(n){const e=Eo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function EM(n,e,t){if(Dr(n.app))return Promise.reject(Qi(n));const r=Eo(n),c=await oy(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pM).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&_A(n),m}),f=await lo._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(f.user),f}function TM(n,e,t){return Dr(n.app)?Promise.reject(Qi(n)):vM(rn(n),Ql.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_A(n),r})}function wM(n,e,t,r){return rn(n).onIdTokenChanged(e,t,r)}function bM(n,e,t){return rn(n).beforeAuthStateChanged(e,t)}function SM(n,e,t,r){return rn(n).onAuthStateChanged(e,t,r)}function AM(n){return rn(n).signOut()}const Sd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sd,"1"),this.storage.removeItem(Sd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM=1e3,RM=10;class EA extends vA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);H2()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,RM):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},IM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}EA.type="LOCAL";const DM=EA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA extends vA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}TA.type="SESSION";const wA=TA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Qd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:l}=t.data,c=this.handlersMap[s];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const f=Array.from(c).map(async g=>g(t.origin,l)),m=await CM(f);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((f,m)=>{const g=r_("",20);s.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(E){const w=E;if(w.data.eventId===g)switch(w.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(w.data.response);break;default:clearTimeout(_),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(){return window}function NM(n){gi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(){return typeof gi().WorkerGlobalScope<"u"&&typeof gi().importScripts=="function"}async function MM(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PM(){return navigator?.serviceWorker?.controller||null}function OM(){return bA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="firebaseLocalStorageDb",VM=1,Ad="firebaseLocalStorage",AA="fbase_key";class oh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $d(n,e){return n.transaction([Ad],e?"readwrite":"readonly").objectStore(Ad)}function kM(){const n=indexedDB.deleteDatabase(SA);return new oh(n).toPromise()}function ly(){const n=indexedDB.open(SA,VM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Ad,{keyPath:AA})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Ad)?e(r):(r.close(),await kM(),e(await ly()))})})}async function uw(n,e,t){const r=$d(n,!0).put({[AA]:e,value:t});return new oh(r).toPromise()}async function LM(n,e){const t=$d(n,!1).get(e),r=await new oh(t).toPromise();return r===void 0?null:r.value}function cw(n,e){const t=$d(n,!0).delete(e);return new oh(t).toPromise()}const UM=800,zM=3;class IA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ly(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>zM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qd._getInstance(OM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await MM(),!this.activeServiceWorker)return;this.sender=new xM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||PM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ly();return await uw(e,Sd,"1"),await cw(e,Sd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>uw(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>LM(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=$d(s,!1).getAll();return new oh(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IA.type="LOCAL";const BM=IA;new ih(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(n,e){return e?Yi(e):(Le(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_ extends t_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Dl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Dl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Dl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function jM(n){return yA(n.auth,new i_(n),n.bypassAuthState)}function qM(n){const{auth:e,user:t}=n;return Le(t,e,"internal-error"),_M(t,new i_(n),n.bypassAuthState)}async function HM(n){const{auth:e,user:t}=n;return Le(t,e,"internal-error"),yM(t,new i_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,t,r,s,l=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jM;case"linkViaPopup":case"linkViaRedirect":return HM;case"reauthViaPopup":case"reauthViaRedirect":return qM;default:Hr(this.auth,"internal-error")}}resolve(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM=new ih(2e3,1e4);class bl extends RA{constructor(e,t,r,s,l){super(e,t,s,l),this.provider=r,this.authWindow=null,this.pollId=null,bl.currentPopupAction&&bl.currentPopupAction.cancel(),bl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){Wi(this.filter.length===1,"Popup operations only handle one event");const e=r_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,GM.get())};e()}}bl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM="pendingRedirect",Zf=new Map;class KM extends RA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Zf.get(this.auth._key());if(!e){try{const r=await QM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Zf.set(this.auth._key(),e)}return this.bypassAuthState||Zf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QM(n,e){const t=WM(e),r=XM(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function $M(n,e){Zf.set(n._key(),e)}function XM(n){return Yi(n._redirectPersistence)}function WM(n){return Wf(YM,n.config.apiKey,n.name)}async function ZM(n,e,t=!1){if(Dr(n.app))return Promise.reject(Qi(n));const r=Eo(n),s=FM(r,e),c=await new KM(r,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=600*1e3;class eP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!DA(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(mi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JM&&this.cachedEventUids.clear(),this.cachedEventUids.has(hw(e))}saveEventToCache(e){this.cachedEventUids.add(hw(e)),this.lastProcessedEventTime=Date.now()}}function hw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function DA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function tP(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nP(n,e={}){return ds(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iP=/^https?/;async function aP(n){if(n.config.emulator)return;const{authorizedDomains:e}=await nP(n);for(const t of e)try{if(sP(t))return}catch{}Hr(n,"unauthorized-domain")}function sP(n){const e=ay(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!iP.test(t))return!1;if(rP.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=new ih(3e4,6e4);function fw(){const n=gi().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function lP(n){return new Promise((e,t)=>{function r(){fw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fw(),t(mi(n,"network-request-failed"))},timeout:oP.get()})}if(gi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(gi().gapi?.load)r();else{const s=J2("iframefcb");return gi()[s]=()=>{gapi.load?r():t(mi(n,"network-request-failed"))},fA(`${Z2()}?onload=${s}`).catch(l=>t(l))}}).catch(e=>{throw Jf=null,e})}let Jf=null;function uP(n){return Jf=Jf||lP(n),Jf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=new ih(5e3,15e3),hP="__/auth/iframe",fP="emulator/auth/iframe",dP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gP(n){const e=n.config;Le(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Zy(e,fP):`https://${n.config.authDomain}/${hP}`,r={apiKey:e.apiKey,appName:n.name,v:Kl},s=mP.get(n.config.apiHost);s&&(r.eid=s);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${rh(r).slice(1)}`}async function pP(n){const e=await uP(n),t=gi().gapi;return Le(t,n,"internal-error"),e.open({where:document.body,url:gP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dP,dontclear:!0},r=>new Promise(async(s,l)=>{await r.restyle({setHideOnLeave:!1});const c=mi(n,"network-request-failed"),f=gi().setTimeout(()=>{l(c)},cP.get());function m(){gi().clearTimeout(f),s(r)}r.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_P=500,vP=600,EP="_blank",TP="http://localhost";class dw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wP(n,e,t,r=_P,s=vP){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const m={...yP,width:r.toString(),height:s.toString(),top:l,left:c},g=nn().toLowerCase();t&&(f=aA(g)?EP:t),rA(g)&&(e=e||TP,m.scrollbars="yes");const _=Object.entries(m).reduce((w,[I,P])=>`${w}${I}=${P},`,"");if(q2(g)&&f!=="_self")return bP(e||"",f),new dw(null);const E=window.open(e||"",f,_);Le(E,n,"popup-blocked");try{E.focus()}catch{}return new dw(E)}function bP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP="__/auth/handler",AP="emulator/auth/handler",IP=encodeURIComponent("fac");async function mw(n,e,t,r,s,l){Le(n.config.authDomain,n,"auth-domain-config-required"),Le(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Kl,eventId:s};if(e instanceof gA){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",hN(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))c[_]=E}if(e instanceof sh){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const m=await n._getAppCheckToken(),g=m?`#${IP}=${encodeURIComponent(m)}`:"";return`${RP(n)}?${rh(f).slice(1)}${g}`}function RP({config:n}){return n.emulator?Zy(n,AP):`https://${n.authDomain}/${SP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="webStorageSupport";class DP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wA,this._completeRedirectFn=ZM,this._overrideRedirectResult=$M}async _openPopup(e,t,r,s){Wi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await mw(e,t,r,ay(),s);return wP(e,l,r_())}async _openRedirect(e,t,r,s){await this._originValidation(e);const l=await mw(e,t,r,ay(),s);return NM(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(Wi(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await pP(e),r=new eP(e);return t.register("authEvent",s=>(Le(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(kp,{type:kp},s=>{const l=s?.[0]?.[kp];l!==void 0&&t(!!l),Hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=aP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return cA()||iA()||e_()}}const CP=DP;var gw="@firebase/auth",pw="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MP(n){Nl(new so("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=r.options;Le(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hA(n)},g=new $2(r,s,l,m);return aM(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Nl(new so("auth-internal",e=>{const t=Eo(e.getProvider("auth").getImmediate());return(r=>new xP(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),es(gw,pw,NP(n)),es(gw,pw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP=300,OP=kS("authIdTokenMaxAge")||PP;let yw=null;const VP=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>OP)return;const s=t?.token;yw!==s&&(yw=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function kP(n=YS()){const e=Xy(n,"auth");if(e.isInitialized())return e.getImmediate();const t=iM(n,{popupRedirectResolver:CP,persistence:[BM,DM,wA]}),r=kS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=VP(l.toString());bM(t,c,()=>c(t.currentUser)),wM(t,f=>c(f))}}const s=OS("auth");return s&&sM(t,`http://${s}`),t}function LP(){return document.getElementsByTagName("head")?.[0]??document}X2({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const l=mi("internal-error");l.customData=s,t(l)},r.type="text/javascript",r.charset="UTF-8",LP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});MP("Browser");var _w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ts,CA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,A){function R(){}R.prototype=A.prototype,x.D=A.prototype,x.prototype=new R,x.prototype.constructor=x,x.C=function(O,k,U){for(var D=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)D[Ge-2]=arguments[Ge];return A.prototype[k].apply(O,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,A,R){R||(R=0);var O=Array(16);if(typeof A=="string")for(var k=0;16>k;++k)O[k]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(k=0;16>k;++k)O[k]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=x.g[0],R=x.g[1],k=x.g[2];var U=x.g[3],D=A+(U^R&(k^U))+O[0]+3614090360&4294967295;A=R+(D<<7&4294967295|D>>>25),D=U+(k^A&(R^k))+O[1]+3905402710&4294967295,U=A+(D<<12&4294967295|D>>>20),D=k+(R^U&(A^R))+O[2]+606105819&4294967295,k=U+(D<<17&4294967295|D>>>15),D=R+(A^k&(U^A))+O[3]+3250441966&4294967295,R=k+(D<<22&4294967295|D>>>10),D=A+(U^R&(k^U))+O[4]+4118548399&4294967295,A=R+(D<<7&4294967295|D>>>25),D=U+(k^A&(R^k))+O[5]+1200080426&4294967295,U=A+(D<<12&4294967295|D>>>20),D=k+(R^U&(A^R))+O[6]+2821735955&4294967295,k=U+(D<<17&4294967295|D>>>15),D=R+(A^k&(U^A))+O[7]+4249261313&4294967295,R=k+(D<<22&4294967295|D>>>10),D=A+(U^R&(k^U))+O[8]+1770035416&4294967295,A=R+(D<<7&4294967295|D>>>25),D=U+(k^A&(R^k))+O[9]+2336552879&4294967295,U=A+(D<<12&4294967295|D>>>20),D=k+(R^U&(A^R))+O[10]+4294925233&4294967295,k=U+(D<<17&4294967295|D>>>15),D=R+(A^k&(U^A))+O[11]+2304563134&4294967295,R=k+(D<<22&4294967295|D>>>10),D=A+(U^R&(k^U))+O[12]+1804603682&4294967295,A=R+(D<<7&4294967295|D>>>25),D=U+(k^A&(R^k))+O[13]+4254626195&4294967295,U=A+(D<<12&4294967295|D>>>20),D=k+(R^U&(A^R))+O[14]+2792965006&4294967295,k=U+(D<<17&4294967295|D>>>15),D=R+(A^k&(U^A))+O[15]+1236535329&4294967295,R=k+(D<<22&4294967295|D>>>10),D=A+(k^U&(R^k))+O[1]+4129170786&4294967295,A=R+(D<<5&4294967295|D>>>27),D=U+(R^k&(A^R))+O[6]+3225465664&4294967295,U=A+(D<<9&4294967295|D>>>23),D=k+(A^R&(U^A))+O[11]+643717713&4294967295,k=U+(D<<14&4294967295|D>>>18),D=R+(U^A&(k^U))+O[0]+3921069994&4294967295,R=k+(D<<20&4294967295|D>>>12),D=A+(k^U&(R^k))+O[5]+3593408605&4294967295,A=R+(D<<5&4294967295|D>>>27),D=U+(R^k&(A^R))+O[10]+38016083&4294967295,U=A+(D<<9&4294967295|D>>>23),D=k+(A^R&(U^A))+O[15]+3634488961&4294967295,k=U+(D<<14&4294967295|D>>>18),D=R+(U^A&(k^U))+O[4]+3889429448&4294967295,R=k+(D<<20&4294967295|D>>>12),D=A+(k^U&(R^k))+O[9]+568446438&4294967295,A=R+(D<<5&4294967295|D>>>27),D=U+(R^k&(A^R))+O[14]+3275163606&4294967295,U=A+(D<<9&4294967295|D>>>23),D=k+(A^R&(U^A))+O[3]+4107603335&4294967295,k=U+(D<<14&4294967295|D>>>18),D=R+(U^A&(k^U))+O[8]+1163531501&4294967295,R=k+(D<<20&4294967295|D>>>12),D=A+(k^U&(R^k))+O[13]+2850285829&4294967295,A=R+(D<<5&4294967295|D>>>27),D=U+(R^k&(A^R))+O[2]+4243563512&4294967295,U=A+(D<<9&4294967295|D>>>23),D=k+(A^R&(U^A))+O[7]+1735328473&4294967295,k=U+(D<<14&4294967295|D>>>18),D=R+(U^A&(k^U))+O[12]+2368359562&4294967295,R=k+(D<<20&4294967295|D>>>12),D=A+(R^k^U)+O[5]+4294588738&4294967295,A=R+(D<<4&4294967295|D>>>28),D=U+(A^R^k)+O[8]+2272392833&4294967295,U=A+(D<<11&4294967295|D>>>21),D=k+(U^A^R)+O[11]+1839030562&4294967295,k=U+(D<<16&4294967295|D>>>16),D=R+(k^U^A)+O[14]+4259657740&4294967295,R=k+(D<<23&4294967295|D>>>9),D=A+(R^k^U)+O[1]+2763975236&4294967295,A=R+(D<<4&4294967295|D>>>28),D=U+(A^R^k)+O[4]+1272893353&4294967295,U=A+(D<<11&4294967295|D>>>21),D=k+(U^A^R)+O[7]+4139469664&4294967295,k=U+(D<<16&4294967295|D>>>16),D=R+(k^U^A)+O[10]+3200236656&4294967295,R=k+(D<<23&4294967295|D>>>9),D=A+(R^k^U)+O[13]+681279174&4294967295,A=R+(D<<4&4294967295|D>>>28),D=U+(A^R^k)+O[0]+3936430074&4294967295,U=A+(D<<11&4294967295|D>>>21),D=k+(U^A^R)+O[3]+3572445317&4294967295,k=U+(D<<16&4294967295|D>>>16),D=R+(k^U^A)+O[6]+76029189&4294967295,R=k+(D<<23&4294967295|D>>>9),D=A+(R^k^U)+O[9]+3654602809&4294967295,A=R+(D<<4&4294967295|D>>>28),D=U+(A^R^k)+O[12]+3873151461&4294967295,U=A+(D<<11&4294967295|D>>>21),D=k+(U^A^R)+O[15]+530742520&4294967295,k=U+(D<<16&4294967295|D>>>16),D=R+(k^U^A)+O[2]+3299628645&4294967295,R=k+(D<<23&4294967295|D>>>9),D=A+(k^(R|~U))+O[0]+4096336452&4294967295,A=R+(D<<6&4294967295|D>>>26),D=U+(R^(A|~k))+O[7]+1126891415&4294967295,U=A+(D<<10&4294967295|D>>>22),D=k+(A^(U|~R))+O[14]+2878612391&4294967295,k=U+(D<<15&4294967295|D>>>17),D=R+(U^(k|~A))+O[5]+4237533241&4294967295,R=k+(D<<21&4294967295|D>>>11),D=A+(k^(R|~U))+O[12]+1700485571&4294967295,A=R+(D<<6&4294967295|D>>>26),D=U+(R^(A|~k))+O[3]+2399980690&4294967295,U=A+(D<<10&4294967295|D>>>22),D=k+(A^(U|~R))+O[10]+4293915773&4294967295,k=U+(D<<15&4294967295|D>>>17),D=R+(U^(k|~A))+O[1]+2240044497&4294967295,R=k+(D<<21&4294967295|D>>>11),D=A+(k^(R|~U))+O[8]+1873313359&4294967295,A=R+(D<<6&4294967295|D>>>26),D=U+(R^(A|~k))+O[15]+4264355552&4294967295,U=A+(D<<10&4294967295|D>>>22),D=k+(A^(U|~R))+O[6]+2734768916&4294967295,k=U+(D<<15&4294967295|D>>>17),D=R+(U^(k|~A))+O[13]+1309151649&4294967295,R=k+(D<<21&4294967295|D>>>11),D=A+(k^(R|~U))+O[4]+4149444226&4294967295,A=R+(D<<6&4294967295|D>>>26),D=U+(R^(A|~k))+O[11]+3174756917&4294967295,U=A+(D<<10&4294967295|D>>>22),D=k+(A^(U|~R))+O[2]+718787259&4294967295,k=U+(D<<15&4294967295|D>>>17),D=R+(U^(k|~A))+O[9]+3951481745&4294967295,x.g[0]=x.g[0]+A&4294967295,x.g[1]=x.g[1]+(k+(D<<21&4294967295|D>>>11))&4294967295,x.g[2]=x.g[2]+k&4294967295,x.g[3]=x.g[3]+U&4294967295}r.prototype.u=function(x,A){A===void 0&&(A=x.length);for(var R=A-this.blockSize,O=this.B,k=this.h,U=0;U<A;){if(k==0)for(;U<=R;)s(this,x,U),U+=this.blockSize;if(typeof x=="string"){for(;U<A;)if(O[k++]=x.charCodeAt(U++),k==this.blockSize){s(this,O),k=0;break}}else for(;U<A;)if(O[k++]=x[U++],k==this.blockSize){s(this,O),k=0;break}}this.h=k,this.o+=A},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var A=1;A<x.length-8;++A)x[A]=0;var R=8*this.o;for(A=x.length-8;A<x.length;++A)x[A]=R&255,R/=256;for(this.u(x),x=Array(16),A=R=0;4>A;++A)for(var O=0;32>O;O+=8)x[R++]=this.g[A]>>>O&255;return x};function l(x,A){var R=f;return Object.prototype.hasOwnProperty.call(R,x)?R[x]:R[x]=A(x)}function c(x,A){this.h=A;for(var R=[],O=!0,k=x.length-1;0<=k;k--){var U=x[k]|0;O&&U==A||(R[k]=U,O=!1)}this.g=R}var f={};function m(x){return-128<=x&&128>x?l(x,function(A){return new c([A|0],0>A?-1:0)}):new c([x|0],0>x?-1:0)}function g(x){if(isNaN(x)||!isFinite(x))return E;if(0>x)return L(g(-x));for(var A=[],R=1,O=0;x>=R;O++)A[O]=x/R|0,R*=4294967296;return new c(A,0)}function _(x,A){if(x.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(x.charAt(0)=="-")return L(_(x.substring(1),A));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=g(Math.pow(A,8)),O=E,k=0;k<x.length;k+=8){var U=Math.min(8,x.length-k),D=parseInt(x.substring(k,k+U),A);8>U?(U=g(Math.pow(A,U)),O=O.j(U).add(g(D))):(O=O.j(R),O=O.add(g(D)))}return O}var E=m(0),w=m(1),I=m(16777216);n=c.prototype,n.m=function(){if(F(this))return-L(this).m();for(var x=0,A=1,R=0;R<this.g.length;R++){var O=this.i(R);x+=(0<=O?O:4294967296+O)*A,A*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(P(this))return"0";if(F(this))return"-"+L(this).toString(x);for(var A=g(Math.pow(x,6)),R=this,O="";;){var k=_e(R,A).g;R=ne(R,k.j(A));var U=((0<R.g.length?R.g[0]:R.h)>>>0).toString(x);if(R=k,P(R))return U+O;for(;6>U.length;)U="0"+U;O=U+O}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function P(x){if(x.h!=0)return!1;for(var A=0;A<x.g.length;A++)if(x.g[A]!=0)return!1;return!0}function F(x){return x.h==-1}n.l=function(x){return x=ne(this,x),F(x)?-1:P(x)?0:1};function L(x){for(var A=x.g.length,R=[],O=0;O<A;O++)R[O]=~x.g[O];return new c(R,~x.h).add(w)}n.abs=function(){return F(this)?L(this):this},n.add=function(x){for(var A=Math.max(this.g.length,x.g.length),R=[],O=0,k=0;k<=A;k++){var U=O+(this.i(k)&65535)+(x.i(k)&65535),D=(U>>>16)+(this.i(k)>>>16)+(x.i(k)>>>16);O=D>>>16,U&=65535,D&=65535,R[k]=D<<16|U}return new c(R,R[R.length-1]&-2147483648?-1:0)};function ne(x,A){return x.add(L(A))}n.j=function(x){if(P(this)||P(x))return E;if(F(this))return F(x)?L(this).j(L(x)):L(L(this).j(x));if(F(x))return L(this.j(L(x)));if(0>this.l(I)&&0>x.l(I))return g(this.m()*x.m());for(var A=this.g.length+x.g.length,R=[],O=0;O<2*A;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(var k=0;k<x.g.length;k++){var U=this.i(O)>>>16,D=this.i(O)&65535,Ge=x.i(k)>>>16,nt=x.i(k)&65535;R[2*O+2*k]+=D*nt,te(R,2*O+2*k),R[2*O+2*k+1]+=U*nt,te(R,2*O+2*k+1),R[2*O+2*k+1]+=D*Ge,te(R,2*O+2*k+1),R[2*O+2*k+2]+=U*Ge,te(R,2*O+2*k+2)}for(O=0;O<A;O++)R[O]=R[2*O+1]<<16|R[2*O];for(O=A;O<2*A;O++)R[O]=0;return new c(R,0)};function te(x,A){for(;(x[A]&65535)!=x[A];)x[A+1]+=x[A]>>>16,x[A]&=65535,A++}function ee(x,A){this.g=x,this.h=A}function _e(x,A){if(P(A))throw Error("division by zero");if(P(x))return new ee(E,E);if(F(x))return A=_e(L(x),A),new ee(L(A.g),L(A.h));if(F(A))return A=_e(x,L(A)),new ee(L(A.g),A.h);if(30<x.g.length){if(F(x)||F(A))throw Error("slowDivide_ only works with positive integers.");for(var R=w,O=A;0>=O.l(x);)R=le(R),O=le(O);var k=z(R,1),U=z(O,1);for(O=z(O,2),R=z(R,2);!P(O);){var D=U.add(O);0>=D.l(x)&&(k=k.add(R),U=D),O=z(O,1),R=z(R,1)}return A=ne(x,k.j(A)),new ee(k,A)}for(k=E;0<=x.l(A);){for(R=Math.max(1,Math.floor(x.m()/A.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),U=g(R),D=U.j(A);F(D)||0<D.l(x);)R-=O,U=g(R),D=U.j(A);P(U)&&(U=w),k=k.add(U),x=ne(x,D)}return new ee(k,x)}n.A=function(x){return _e(this,x).h},n.and=function(x){for(var A=Math.max(this.g.length,x.g.length),R=[],O=0;O<A;O++)R[O]=this.i(O)&x.i(O);return new c(R,this.h&x.h)},n.or=function(x){for(var A=Math.max(this.g.length,x.g.length),R=[],O=0;O<A;O++)R[O]=this.i(O)|x.i(O);return new c(R,this.h|x.h)},n.xor=function(x){for(var A=Math.max(this.g.length,x.g.length),R=[],O=0;O<A;O++)R[O]=this.i(O)^x.i(O);return new c(R,this.h^x.h)};function le(x){for(var A=x.g.length+1,R=[],O=0;O<A;O++)R[O]=x.i(O)<<1|x.i(O-1)>>>31;return new c(R,x.h)}function z(x,A){var R=A>>5;A%=32;for(var O=x.g.length-R,k=[],U=0;U<O;U++)k[U]=0<A?x.i(U+R)>>>A|x.i(U+R+1)<<32-A:x.i(U+R);return new c(k,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,CA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,ts=c}).apply(typeof _w<"u"?_w:typeof self<"u"?self:typeof window<"u"?window:{});var zf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xA,dc,NA,ed,uy,MA,PA,OA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,v){return h==Array.prototype||h==Object.prototype||(h[y]=v.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof zf=="object"&&zf];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function s(h,y){if(y)e:{var v=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var q=h[S];if(!(q in v))break e;v=v[q]}h=h[h.length-1],S=v[h],y=y(S),y!=S&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}function l(h,y){h instanceof String&&(h+="");var v=0,S=!1,q={next:function(){if(!S&&v<h.length){var Z=v++;return{value:y(Z,h[Z]),done:!1}}return S=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}s("Array.prototype.values",function(h){return h||function(){return l(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function m(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function g(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function _(h,y,v){return h.call.apply(h.bind,arguments)}function E(h,y,v){if(!h)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,S),h.apply(y,q)}}return function(){return h.apply(y,arguments)}}function w(h,y,v){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,w.apply(null,arguments)}function I(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function P(h,y){function v(){}v.prototype=y.prototype,h.aa=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(S,q,Z){for(var ge=Array(arguments.length-2),it=2;it<arguments.length;it++)ge[it-2]=arguments[it];return y.prototype[q].apply(S,ge)}}function F(h){const y=h.length;if(0<y){const v=Array(y);for(let S=0;S<y;S++)v[S]=h[S];return v}return[]}function L(h,y){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(m(S)){const q=h.length||0,Z=S.length||0;h.length=q+Z;for(let ge=0;ge<Z;ge++)h[q+ge]=S[ge]}else h.push(S)}}class ne{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function te(h){return/^[\s\xa0]*$/.test(h)}function ee(){var h=f.navigator;return h&&(h=h.userAgent)?h:""}function _e(h){return _e[" "](h),h}_e[" "]=function(){};var le=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function z(h,y,v){for(const S in h)y.call(v,h[S],S,h)}function x(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function A(h){const y={};for(const v in h)y[v]=h[v];return y}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(h,y){let v,S;for(let q=1;q<arguments.length;q++){S=arguments[q];for(v in S)h[v]=S[v];for(let Z=0;Z<R.length;Z++)v=R[Z],Object.prototype.hasOwnProperty.call(S,v)&&(h[v]=S[v])}}function k(h){var y=1;h=h.split(":");const v=[];for(;0<y&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function U(h){f.setTimeout(()=>{throw h},0)}function D(){var h=je;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Ge{constructor(){this.h=this.g=null}add(y,v){const S=nt.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var nt=new ne(()=>new $,h=>h.reset());class ${constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,ve=!1,je=new Ge,M=()=>{const h=f.Promise.resolve(void 0);fe=()=>{h.then(ie)}};var ie=()=>{for(var h;h=D();){try{h.h.call(h.g)}catch(v){U(v)}var y=nt;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}ve=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var De=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};f.addEventListener("test",v,y),f.removeEventListener("test",v,y)}catch{}return h})();function qe(h,y){if(ue.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(le){e:{try{_e(y.nodeName);var q=!0;break e}catch{}q=!1}q||(y=null)}}else v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Pe[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&qe.aa.h.call(this)}}P(qe,ue);var Pe={2:"touch",3:"pen",4:"mouse"};qe.prototype.h=function(){qe.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var qt="closure_listenable_"+(1e6*Math.random()|0),wt=0;function cr(h,y,v,S,q){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=q,this.key=++wt,this.da=this.fa=!1}function xt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function An(h){this.src=h,this.g={},this.h=0}An.prototype.add=function(h,y,v,S,q){var Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);var ge=Ti(h,y,S,q);return-1<ge?(y=h[ge],v||(y.fa=!1)):(y=new cr(y,this.src,Z,!!S,q),y.fa=v,h.push(y)),y};function Yr(h,y){var v=y.type;if(v in h.g){var S=h.g[v],q=Array.prototype.indexOf.call(S,y,void 0),Z;(Z=0<=q)&&Array.prototype.splice.call(S,q,1),Z&&(xt(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Ti(h,y,v,S){for(var q=0;q<h.length;++q){var Z=h[q];if(!Z.da&&Z.listener==y&&Z.capture==!!v&&Z.ha==S)return q}return-1}var Mn="closure_lm_"+(1e6*Math.random()|0),ys={};function bo(h,y,v,S,q){if(Array.isArray(y)){for(var Z=0;Z<y.length;Z++)bo(h,y[Z],v,S,q);return null}return v=sa(v),h&&h[qt]?h.K(y,v,g(S)?!!S.capture:!1,q):Pn(h,y,v,!1,S,q)}function Pn(h,y,v,S,q,Z){if(!y)throw Error("Invalid event type");var ge=g(q)?!!q.capture:!!q,it=hr(h);if(it||(h[Mn]=it=new An(h)),v=it.add(y,v,S,ge,Z),v.proxy)return v;if(S=eu(),v.proxy=S,S.src=h,S.listener=v,h.addEventListener)De||(q=ge),q===void 0&&(q=!1),h.addEventListener(y.toString(),S,q);else if(h.attachEvent)h.attachEvent(wi(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function eu(){function h(v){return y.call(h.src,h.listener,v)}const y=Pr;return h}function _s(h,y,v,S,q){if(Array.isArray(y))for(var Z=0;Z<y.length;Z++)_s(h,y[Z],v,S,q);else S=g(S)?!!S.capture:!!S,v=sa(v),h&&h[qt]?(h=h.i,y=String(y).toString(),y in h.g&&(Z=h.g[y],v=Ti(Z,v,S,q),-1<v&&(xt(Z[v]),Array.prototype.splice.call(Z,v,1),Z.length==0&&(delete h.g[y],h.h--)))):h&&(h=hr(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ti(y,v,S,q)),(v=-1<h?y[h]:null)&&ia(v))}function ia(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[qt])Yr(y.i,h);else{var v=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(v,S,h.capture):y.detachEvent?y.detachEvent(wi(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=hr(y))?(Yr(v,h),v.h==0&&(v.src=null,y[Mn]=null)):xt(h)}}}function wi(h){return h in ys?ys[h]:ys[h]="on"+h}function Pr(h,y){if(h.da)h=!0;else{y=new qe(y,this);var v=h.listener,S=h.ha||h.src;h.fa&&ia(h),h=v.call(S,y)}return h}function hr(h){return h=h[Mn],h instanceof An?h:null}var aa="__closure_events_fn_"+(1e9*Math.random()>>>0);function sa(h){return typeof h=="function"?h:(h[aa]||(h[aa]=function(y){return h.handleEvent(y)}),h[aa])}function ct(){me.call(this),this.i=new An(this),this.M=this,this.F=null}P(ct,me),ct.prototype[qt]=!0,ct.prototype.removeEventListener=function(h,y,v,S){_s(this,h,y,v,S)};function Ke(h,y){var v,S=h.F;if(S)for(v=[];S;S=S.F)v.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new ue(y,h);else if(y instanceof ue)y.target=y.target||h;else{var q=y;y=new ue(S,h),O(y,q)}if(q=!0,v)for(var Z=v.length-1;0<=Z;Z--){var ge=y.g=v[Z];q=In(ge,S,!0,y)&&q}if(ge=y.g=h,q=In(ge,S,!0,y)&&q,q=In(ge,S,!1,y)&&q,v)for(Z=0;Z<v.length;Z++)ge=y.g=v[Z],q=In(ge,S,!1,y)&&q}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var v=h.g[y],S=0;S<v.length;S++)xt(v[S]);delete h.g[y],h.h--}}this.F=null},ct.prototype.K=function(h,y,v,S){return this.i.add(String(h),y,!1,v,S)},ct.prototype.L=function(h,y,v,S){return this.i.add(String(h),y,!0,v,S)};function In(h,y,v,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var q=!0,Z=0;Z<y.length;++Z){var ge=y[Z];if(ge&&!ge.da&&ge.capture==v){var it=ge.listener,Zt=ge.ha||ge.src;ge.fa&&Yr(h.i,ge),q=it.call(Zt,S)!==!1&&q}}return q&&!S.defaultPrevented}function Ht(h,y,v){if(typeof h=="function")v&&(h=w(h,v));else if(h&&typeof h.handleEvent=="function")h=w(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:f.setTimeout(h,y||0)}function So(h){h.g=Ht(()=>{h.g=null,h.i&&(h.i=!1,So(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class fr extends me{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:So(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kr(h){me.call(this),this.h=h,this.g={}}P(Kr,me);var Qr=[];function $r(h){z(h.g,function(y,v){this.g.hasOwnProperty(v)&&ia(y)},h),h.g={}}Kr.prototype.N=function(){Kr.aa.N.call(this),$r(this)},Kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qn=f.JSON.stringify,bi=f.JSON.parse,dr=class{stringify(h){return f.JSON.stringify(h,void 0)}parse(h){return f.JSON.parse(h,void 0)}};function oa(){}oa.prototype.h=null;function Si(h){return h.h||(h.h=h.i())}function vs(){}var mr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Or(){ue.call(this,"d")}P(Or,ue);function la(){ue.call(this,"c")}P(la,ue);var On={},Xr=null;function Wr(){return Xr=Xr||new ct}On.La="serverreachability";function ua(h){ue.call(this,On.La,h)}P(ua,ue);function N(h){const y=Wr();Ke(y,new ua(y))}On.STAT_EVENT="statevent";function j(h,y){ue.call(this,On.STAT_EVENT,h),this.stat=y}P(j,ue);function K(h){const y=Wr();Ke(y,new j(y,h))}On.Ma="timingevent";function oe(h,y){ue.call(this,On.Ma,h),this.size=y}P(oe,ue);function ce(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){h()},y)}function Ee(){this.g=!0}Ee.prototype.xa=function(){this.g=!1};function Ce(h,y,v,S,q,Z){h.info(function(){if(h.g)if(Z)for(var ge="",it=Z.split("&"),Zt=0;Zt<it.length;Zt++){var at=it[Zt].split("=");if(1<at.length){var ln=at[0];at=at[1];var Jt=ln.split("_");ge=2<=Jt.length&&Jt[1]=="type"?ge+(ln+"="+at+"&"):ge+(ln+"=redacted&")}}else ge=null;else ge=Z;return"XMLHTTP REQ ("+S+") [attempt "+q+"]: "+y+`
`+v+`
`+ge})}function Se(h,y,v,S,q,Z,ge){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+q+"]: "+y+`
`+v+`
`+Z+" "+ge})}function Ae(h,y,v,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ie(h,v)+(S?" "+S:"")})}function Me(h,y){h.info(function(){return"TIMEOUT: "+y})}Ee.prototype.info=function(){};function Ie(h,y){if(!h.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var S=v[h];if(!(2>S.length)){var q=S[1];if(Array.isArray(q)&&!(1>q.length)){var Z=q[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var ge=1;ge<q.length;ge++)q[ge]=""}}}}return Qn(v)}catch{return y}}var we={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},He={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},rt;function gt(){}P(gt,oa),gt.prototype.g=function(){return new XMLHttpRequest},gt.prototype.i=function(){return{}},rt=new gt;function ht(h,y,v,S){this.j=h,this.i=y,this.l=v,this.R=S||1,this.U=new Kr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Be}function Be(){this.i=null,this.g="",this.h=!1}var ft={},jn={};function pn(h,y,v){h.L=1,h.v=ws(Wn(y)),h.m=v,h.P=!0,sn(h,null)}function sn(h,y){h.F=Date.now(),$n(h),h.A=Wn(h.v);var v=h.A,S=h.R;Array.isArray(S)||(S=[String(S)]),au(v.i,"t",S),h.C=0,v=h.j.J,h.h=new Be,h.g=xh(h.j,v?y:null,!h.m),0<h.O&&(h.M=new fr(w(h.Y,h,h.g),h.O)),y=h.U,v=h.g,S=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(Qr[0]=q.toString()),q=Qr);for(var Z=0;Z<q.length;Z++){var ge=bo(v,q[Z],S||y.handleEvent,!1,y.h||y);if(!ge)break;y.g[ge.key]=ge}y=h.H?A(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),N(),Ce(h.i,h.u,h.A,h.l,h.R,h.m)}ht.prototype.ca=function(h){h=h.target;const y=this.M;y&&vr(h)==3?y.j():this.Y(h)},ht.prototype.Y=function(h){try{if(h==this.g)e:{const Jt=vr(this.g);var y=this.g.Ba();const Ni=this.g.Z();if(!(3>Jt)&&(Jt!=3||this.g&&(this.h.h||this.g.oa()||wh(this.g)))){this.J||Jt!=4||y==7||(y==8||0>=Ni?N(3):N(2)),Xn(this);var v=this.g.Z();this.X=v;t:if(Vn(this)){var S=wh(this.g);h="";var q=S.length,Z=vr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ve(this),kn(this);var ge="";break t}this.h.i=new f.TextDecoder}for(y=0;y<q;y++)this.h.h=!0,h+=this.h.i.decode(S[y],{stream:!(Z&&y==q-1)});S.length=0,this.h.g+=h,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=v==200,Se(this.i,this.u,this.A,this.l,this.R,Jt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var it,Zt=this.g;if((it=Zt.g?Zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(it)){var at=it;break t}}at=null}if(v=at)Ae(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nt(this,v);else{this.o=!1,this.s=3,K(12),Ve(this),kn(this);break e}}if(this.P){v=!0;let _n;for(;!this.J&&this.C<ge.length;)if(_n=ca(this,ge),_n==jn){Jt==4&&(this.s=4,K(14),v=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}else if(_n==ft){this.s=4,K(15),Ae(this.i,this.l,ge,"[Invalid Chunk]"),v=!1;break}else Ae(this.i,this.l,_n,null),Nt(this,_n);if(Vn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||ge.length!=0||this.h.h||(this.s=1,K(16),v=!1),this.o=this.o&&v,!v)Ae(this.i,this.l,ge,"[Invalid Chunked Response]"),Ve(this),kn(this);else if(0<ge.length&&!this.W){this.W=!0;var ln=this.j;ln.g==this&&ln.ba&&!ln.M&&(ln.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),xs(ln),ln.M=!0,K(11))}}else Ae(this.i,this.l,ge,null),Nt(this,ge);Jt==4&&Ve(this),this.o&&!this.J&&(Jt==4?Rh(this.j,this):(this.o=!1,$n(this)))}else Rm(this.g),v==400&&0<ge.indexOf("Unknown SID")?(this.s=3,K(12)):(this.s=0,K(13)),Ve(this),kn(this)}}}catch{}finally{}};function Vn(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ca(h,y){var v=h.C,S=y.indexOf(`
`,v);return S==-1?jn:(v=Number(y.substring(v,S)),isNaN(v)?ft:(S+=1,S+v>y.length?jn:(y=y.slice(S,S+v),h.C=S+v,y)))}ht.prototype.cancel=function(){this.J=!0,Ve(this)};function $n(h){h.S=Date.now()+h.I,gr(h,h.I)}function gr(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=ce(w(h.ba,h),y)}function Xn(h){h.B&&(f.clearTimeout(h.B),h.B=null)}ht.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Me(this.i,this.A),this.L!=2&&(N(),K(17)),Ve(this),this.s=2,kn(this)):gr(this,this.S-h)};function kn(h){h.j.G==0||h.J||Rh(h.j,h)}function Ve(h){Xn(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,$r(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Nt(h,y){try{var v=h.j;if(v.G!=0&&(v.g==h||ha(v.h,h))){if(!h.K&&ha(v.h,h)&&v.G==3){try{var S=v.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var q=S;if(q[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)Po(v),No(v);else break e;cu(v),K(18)}}else v.za=q[1],0<v.za-v.T&&37500>q[2]&&v.F&&v.v==0&&!v.C&&(v.C=ce(w(v.Za,v),6e3));if(1>=kr(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else xi(v,11)}else if((h.K||v.g==h)&&Po(v),!te(y))for(q=v.Da.g.parse(y),y=0;y<q.length;y++){let at=q[y];if(v.T=at[0],at=at[1],v.G==2)if(at[0]=="c"){v.K=at[1],v.ia=at[2];const ln=at[3];ln!=null&&(v.la=ln,v.j.info("VER="+v.la));const Jt=at[4];Jt!=null&&(v.Aa=Jt,v.j.info("SVER="+v.Aa));const Ni=at[5];Ni!=null&&typeof Ni=="number"&&0<Ni&&(S=1.5*Ni,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const _n=h.g;if(_n){const ii=_n.g?_n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ii){var Z=S.h;Z.g||ii.indexOf("spdy")==-1&&ii.indexOf("quic")==-1&&ii.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(fa(Z,Z.h),Z.h=null))}if(S.D){const fu=_n.g?_n.g.getResponseHeader("X-HTTP-Session-Id"):null;fu&&(S.ya=fu,bt(S.I,S.D,fu))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var ge=h;if(S.qa=Ch(S,S.J?S.ia:null,S.W),ge.K){Ln(S.h,ge);var it=ge,Zt=S.L;Zt&&(it.I=Zt),it.B&&(Xn(it),$n(it)),S.g=ge}else Ah(S);0<v.i.length&&Mo(v)}else at[0]!="stop"&&at[0]!="close"||xi(v,7);else v.G==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?xi(v,7):lu(v):at[0]!="noop"&&v.l&&v.l.ta(at),v.v=0)}}N(4)}catch{}}var Vr=class{constructor(h,y){this.g=h,this.map=y}};function yn(h){this.l=h||10,f.PerformanceNavigationTiming?(h=f.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Dt(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function kr(h){return h.h?1:h.g?h.g.size:0}function ha(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function fa(h,y){h.g?h.g.add(y):h.h=y}function Ln(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}yn.prototype.cancel=function(){if(this.i=tu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function tu(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.D);return y}return F(h.i)}function bm(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var y=[],v=h.length,S=0;S<v;S++)y.push(h[S]);return y}y=[],v=0;for(S in h)y[v++]=h[S];return y}function Ao(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var y=[];h=h.length;for(var v=0;v<h;v++)y.push(v);return y}y=[],v=0;for(const S in h)y[v++]=S;return y}}}function nu(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var v=Ao(h),S=bm(h),q=S.length,Z=0;Z<q;Z++)y.call(void 0,S[Z],v&&v[Z],h)}var Es=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sm(h,y){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var S=h[v].indexOf("="),q=null;if(0<=S){var Z=h[v].substring(0,S);q=h[v].substring(S+1)}else Z=h[v];y(Z,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Gt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Gt){this.h=h.h,Ts(this,h.j),this.o=h.o,this.g=h.g,da(this,h.s),this.l=h.l;var y=h.i,v=new Ii;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),Ai(this,v),this.m=h.m}else h&&(y=String(h).match(Es))?(this.h=!1,Ts(this,y[1]||"",!0),this.o=pr(y[2]||""),this.g=pr(y[3]||"",!0),da(this,y[4]),this.l=pr(y[5]||"",!0),Ai(this,y[6]||"",!0),this.m=pr(y[7]||"")):(this.h=!1,this.i=new Ii(null,this.h))}Gt.prototype.toString=function(){var h=[],y=this.j;y&&h.push(bs(y,ru,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(bs(y,ru,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(bs(v,v.charAt(0)=="/"?Am:iu,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",bs(v,Io)),h.join("")};function Wn(h){return new Gt(h)}function Ts(h,y,v){h.j=v?pr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function da(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function Ai(h,y,v){y instanceof Ii?(h.i=y,Eh(h.i,h.h)):(v||(y=bs(y,Im)),h.i=new Ii(y,h.h))}function bt(h,y,v){h.i.set(y,v)}function ws(h){return bt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function pr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function bs(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,vh),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function vh(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ru=/[#\/\?@]/g,iu=/[#\?:]/g,Am=/[#\?]/g,Im=/[#\?@]/g,Io=/#/g;function Ii(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function yr(h){h.g||(h.g=new Map,h.h=0,h.i&&Sm(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}n=Ii.prototype,n.add=function(h,y){yr(this),this.i=null,h=Zr(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Ri(h,y){yr(h),y=Zr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Di(h,y){return yr(h),y=Zr(h,y),h.g.has(y)}n.forEach=function(h,y){yr(this),this.g.forEach(function(v,S){v.forEach(function(q){h.call(y,q,S,this)},this)},this)},n.na=function(){yr(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let S=0;S<y.length;S++){const q=h[S];for(let Z=0;Z<q.length;Z++)v.push(y[S])}return v},n.V=function(h){yr(this);let y=[];if(typeof h=="string")Di(this,h)&&(y=y.concat(this.g.get(Zr(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)y=y.concat(h[v])}return y},n.set=function(h,y){return yr(this),this.i=null,h=Zr(this,h),Di(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function au(h,y,v){Ri(h,y),0<v.length&&(h.i=null,h.g.set(Zr(h,y),F(v)),h.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var S=y[v];const Z=encodeURIComponent(String(S)),ge=this.V(S);for(S=0;S<ge.length;S++){var q=Z;ge[S]!==""&&(q+="="+encodeURIComponent(String(ge[S]))),h.push(q)}}return this.i=h.join("&")};function Zr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Eh(h,y){y&&!h.j&&(yr(h),h.i=null,h.g.forEach(function(v,S){var q=S.toLowerCase();S!=q&&(Ri(this,S),au(this,q,v))},h)),h.j=y}function Ss(h,y){const v=new Ee;if(f.Image){const S=new Image;S.onload=I(_r,v,"TestLoadImage: loaded",!0,y,S),S.onerror=I(_r,v,"TestLoadImage: error",!1,y,S),S.onabort=I(_r,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=I(_r,v,"TestLoadImage: timeout",!1,y,S),f.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function Lr(h,y){const v=new Ee,S=new AbortController,q=setTimeout(()=>{S.abort(),_r(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(Z=>{clearTimeout(q),Z.ok?_r(v,"TestPingServer: ok",!0,y):_r(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),_r(v,"TestPingServer: error",!1,y)})}function _r(h,y,v,S,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),S(v)}catch{}}function As(){this.g=new dr}function Jr(h,y,v){const S=v||"";try{nu(h,function(q,Z){let ge=q;g(q)&&(ge=Qn(q)),y.push(S+Z+"="+encodeURIComponent(ge))})}catch(q){throw y.push(S+"type="+encodeURIComponent("_badmap")),q}}function ma(h){this.l=h.Ub||null,this.j=h.eb||!1}P(ma,oa),ma.prototype.g=function(){return new Ci(this.l,this.j)},ma.prototype.i=(function(h){return function(){return h}})({});function Ci(h,y){ct.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Ci,ct),n=Ci.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,ti(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||f).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ei(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ti(this)),this.g&&(this.readyState=3,ti(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;su(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function su(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?ei(this):ti(this),this.readyState==3&&su(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,ei(this))},n.Qa=function(h){this.g&&(this.response=h,ei(this))},n.ga=function(){this.g&&ei(this)};function ei(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ti(h)}n.setRequestHeader=function(h,y){this.u.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function ti(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ci.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ou(h){let y="";return z(h,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function on(h,y,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=ou(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):bt(h,y,v))}function mt(h){ct.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(mt,ct);var Ro=/^https?$/i,Is=["POST","PUT"];n=mt.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():rt.g(),this.v=this.o?Si(this.o):Si(rt),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Z){Th(this,Z);return}if(h=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var q in S)v.set(q,S[q]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Z of S.keys())v.set(Z,S.get(Z));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(Z=>Z.toLowerCase()=="content-type"),q=f.FormData&&h instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Is,y,void 0))||S||q||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,ge]of v)this.g.setRequestHeader(Z,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Rs(this),this.u=!0,this.g.send(h),this.u=!1}catch(Z){Th(this,Z)}};function Th(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,Do(h),ni(h)}function Do(h){h.A||(h.A=!0,Ke(h,"complete"),Ke(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ke(this,"complete"),Ke(this,"abort"),ni(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ni(this,!0)),mt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Co(this):this.bb())},n.bb=function(){Co(this)};function Co(h){if(h.h&&typeof c<"u"&&(!h.v[1]||vr(h)!=4||h.Z()!=2)){if(h.u&&vr(h)==4)Ht(h.Ea,0,h);else if(Ke(h,"readystatechange"),vr(h)==4){h.h=!1;try{const ge=h.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var S;if(S=ge===0){var q=String(h.D).match(Es)[1]||null;!q&&f.self&&f.self.location&&(q=f.self.location.protocol.slice(0,-1)),S=!Ro.test(q?q.toLowerCase():"")}v=S}if(v)Ke(h,"complete"),Ke(h,"success");else{h.m=6;try{var Z=2<vr(h)?h.g.statusText:""}catch{Z=""}h.l=Z+" ["+h.Z()+"]",Do(h)}}finally{ni(h)}}}}function ni(h,y){if(h.g){Rs(h);const v=h.g,S=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Ke(h,"ready");try{v.onreadystatechange=S}catch{}}}function Rs(h){h.I&&(f.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function vr(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<vr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),bi(y)}};function wh(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Rm(h){const y={};h=(h.g&&2<=vr(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(te(h[S]))continue;var v=k(h[S]);const q=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Z=y[q]||[];y[q]=Z,Z.push(v)}x(y,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ds(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function xo(h){this.Aa=0,this.i=[],this.j=new Ee,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ds("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ds("baseRetryDelayMs",5e3,h),this.cb=Ds("retryDelaySeedMs",1e4,h),this.Wa=Ds("forwardChannelMaxRetries",2,h),this.wa=Ds("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new yn(h&&h.concurrentRequestLimit),this.Da=new As,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=xo.prototype,n.la=8,n.G=1,n.connect=function(h,y,v,S){K(0),this.W=h,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=Ch(this,null,this.W),Mo(this)};function lu(h){if(bh(h),h.G==3){var y=h.U++,v=Wn(h.I);if(bt(v,"SID",h.K),bt(v,"RID",y),bt(v,"TYPE","terminate"),Cs(h,v),y=new ht(h,h.j,y),y.L=2,y.v=ws(Wn(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&f.Image&&(new Image().src=y.v,v=!0),v||(y.g=xh(y.j,null),y.g.ea(y.v)),y.F=Date.now(),$n(y)}Dh(h)}function No(h){h.g&&(xs(h),h.g.cancel(),h.g=null)}function bh(h){No(h),h.u&&(f.clearTimeout(h.u),h.u=null),Po(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&f.clearTimeout(h.s),h.s=null)}function Mo(h){if(!Dt(h.h)&&!h.s){h.s=!0;var y=h.Ga;fe||M(),ve||(fe(),ve=!0),je.add(y,h),h.B=0}}function Dm(h,y){return kr(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=ce(w(h.Ga,h,y),hu(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new ht(this,this.j,h);let Z=this.o;if(this.S&&(Z?(Z=A(Z),O(Z,this.S)):Z=this.S),this.m!==null||this.O||(q.H=Z,Z=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Sh(this,q,y),v=Wn(this.I),bt(v,"RID",h),bt(v,"CVER",22),this.D&&bt(v,"X-HTTP-Session-Id",this.D),Cs(this,v),Z&&(this.O?y="headers="+encodeURIComponent(String(ou(Z)))+"&"+y:this.m&&on(v,this.m,Z)),fa(this.h,q),this.Ua&&bt(v,"TYPE","init"),this.P?(bt(v,"$req",y),bt(v,"SID","null"),q.T=!0,pn(q,v,null)):pn(q,v,y),this.G=2}}else this.G==3&&(h?uu(this,h):this.i.length==0||Dt(this.h)||uu(this))};function uu(h,y){var v;y?v=y.l:v=h.U++;const S=Wn(h.I);bt(S,"SID",h.K),bt(S,"RID",v),bt(S,"AID",h.T),Cs(h,S),h.m&&h.o&&on(S,h.m,h.o),v=new ht(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),y&&(h.i=y.D.concat(h.i)),y=Sh(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),fa(h.h,v),pn(v,S,y)}function Cs(h,y){h.H&&z(h.H,function(v,S){bt(y,S,v)}),h.l&&nu({},function(v,S){bt(y,S,v)})}function Sh(h,y,v){v=Math.min(h.i.length,v);var S=h.l?w(h.l.Na,h.l,h):null;e:{var q=h.i;let Z=-1;for(;;){const ge=["count="+v];Z==-1?0<v?(Z=q[0].g,ge.push("ofs="+Z)):Z=0:ge.push("ofs="+Z);let it=!0;for(let Zt=0;Zt<v;Zt++){let at=q[Zt].g;const ln=q[Zt].map;if(at-=Z,0>at)Z=Math.max(0,q[Zt].g-100),it=!1;else try{Jr(ln,ge,"req"+at+"_")}catch{S&&S(ln)}}if(it){S=ge.join("&");break e}}}return h=h.i.splice(0,v),y.D=h,S}function Ah(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;fe||M(),ve||(fe(),ve=!0),je.add(y,h),h.v=0}}function cu(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=ce(w(h.Fa,h),hu(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Ih(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=ce(w(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,K(10),No(this),Ih(this))};function xs(h){h.A!=null&&(f.clearTimeout(h.A),h.A=null)}function Ih(h){h.g=new ht(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=Wn(h.qa);bt(y,"RID","rpc"),bt(y,"SID",h.K),bt(y,"AID",h.T),bt(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&bt(y,"TO",h.ja),bt(y,"TYPE","xmlhttp"),Cs(h,y),h.m&&h.o&&on(y,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=ws(Wn(y)),v.m=null,v.P=!0,sn(v,h)}n.Za=function(){this.C!=null&&(this.C=null,No(this),cu(this),K(19))};function Po(h){h.C!=null&&(f.clearTimeout(h.C),h.C=null)}function Rh(h,y){var v=null;if(h.g==y){Po(h),xs(h),h.g=null;var S=2}else if(ha(h.h,y))v=y.D,Ln(h.h,y),S=1;else return;if(h.G!=0){if(y.o)if(S==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var q=h.B;S=Wr(),Ke(S,new oe(S,v)),Mo(h)}else Ah(h);else if(q=y.s,q==3||q==0&&0<y.X||!(S==1&&Dm(h,y)||S==2&&cu(h)))switch(v&&0<v.length&&(y=h.h,y.i=y.i.concat(v)),q){case 1:xi(h,5);break;case 4:xi(h,10);break;case 3:xi(h,6);break;default:xi(h,2)}}}function hu(h,y){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*y}function xi(h,y){if(h.j.info("Error code "+y),y==2){var v=w(h.fb,h),S=h.Xa;const q=!S;S=new Gt(S||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Ts(S,"https"),ws(S),q?Ss(S.toString(),v):Lr(S.toString(),v)}else K(2);h.G=0,h.l&&h.l.sa(y),Dh(h),bh(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),K(2)):(this.j.info("Failed to ping google.com"),K(1))};function Dh(h){if(h.G=0,h.ka=[],h.l){const y=tu(h.h);(y.length!=0||h.i.length!=0)&&(L(h.ka,y),L(h.ka,h.i),h.h.i.length=0,F(h.i),h.i.length=0),h.l.ra()}}function Ch(h,y,v){var S=v instanceof Gt?Wn(v):new Gt(v);if(S.g!="")y&&(S.g=y+"."+S.g),da(S,S.s);else{var q=f.location;S=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;var Z=new Gt(null);S&&Ts(Z,S),y&&(Z.g=y),q&&da(Z,q),v&&(Z.l=v),S=Z}return v=h.D,y=h.ya,v&&y&&bt(S,v,y),bt(S,"VER",h.la),Cs(h,S),S}function xh(h,y,v){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new mt(new ma({eb:v})):new mt(h.pa),y.Ha(h.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nh(){}n=Nh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Oo(){}Oo.prototype.g=function(h,y){return new Un(h,y)};function Un(h,y){ct.call(this),this.g=new xo(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!te(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!te(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new ri(this)}P(Un,ct),Un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){lu(this.g)},Un.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=Qn(h),h=v);y.i.push(new Vr(y.Ya++,h)),y.G==3&&Mo(y)},Un.prototype.N=function(){this.g.l=null,delete this.j,lu(this.g),delete this.g,Un.aa.N.call(this)};function Mh(h){Or.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}P(Mh,Or);function Ph(){la.call(this),this.status=1}P(Ph,la);function ri(h){this.g=h}P(ri,Nh),ri.prototype.ua=function(){Ke(this.g,"a")},ri.prototype.ta=function(h){Ke(this.g,new Mh(h))},ri.prototype.sa=function(h){Ke(this.g,new Ph)},ri.prototype.ra=function(){Ke(this.g,"b")},Oo.prototype.createWebChannel=Oo.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,OA=function(){return new Oo},PA=function(){return Wr()},MA=On,uy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},we.NO_ERROR=0,we.TIMEOUT=8,we.HTTP_ERROR=6,ed=we,He.COMPLETE="complete",NA=He,vs.EventType=mr,mr.OPEN="a",mr.CLOSE="b",mr.ERROR="c",mr.MESSAGE="d",ct.prototype.listen=ct.prototype.K,dc=vs,mt.prototype.listenOnce=mt.prototype.L,mt.prototype.getLastError=mt.prototype.Ka,mt.prototype.getLastErrorCode=mt.prototype.Ba,mt.prototype.getStatus=mt.prototype.Z,mt.prototype.getResponseJson=mt.prototype.Oa,mt.prototype.getResponseText=mt.prototype.oa,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Ha,xA=mt}).apply(typeof zf<"u"?zf:typeof self<"u"?self:typeof window<"u"?window:{});const vw="@firebase/firestore",Ew="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wn.UNAUTHENTICATED=new wn(null),wn.GOOGLE_CREDENTIALS=new wn("google-credentials-uid"),wn.FIRST_PARTY=new wn("first-party-uid"),wn.MOCK_USER=new wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $l="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=new Qy("@firebase/firestore");function yl(){return uo.logLevel}function he(n,...e){if(uo.logLevel<=et.DEBUG){const t=e.map(a_);uo.debug(`Firestore (${$l}): ${n}`,...t)}}function Bn(n,...e){if(uo.logLevel<=et.ERROR){const t=e.map(a_);uo.error(`Firestore (${$l}): ${n}`,...t)}}function co(n,...e){if(uo.logLevel<=et.WARN){const t=e.map(a_);uo.warn(`Firestore (${$l}): ${n}`,...t)}}function a_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,VA(n,r,t)}function VA(n,e,t){let r=`FIRESTORE (${$l}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Bn(r),new Error(r)}function Re(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||VA(e,s,r)}function ze(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends ta{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(wn.UNAUTHENTICATED)))}shutdown(){}}class zP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class BP{constructor(e){this.t=e,this.currentUser=wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Re(this.o===void 0,42304);let r=this.i;const s=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new qr,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await s(this.currentUser)}))},f=m=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new qr)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string",31837,{l:r}),new kA(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string",2055,{h:e}),new wn(e)}}class FP{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=wn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jP{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new FP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(wn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Tw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Re(this.o===void 0,3512);const r=l=>{l.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,he("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const s=l=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Tw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Re(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Tw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=HP(40);for(let l=0;l<s.length;++l)r.length<20&&s[l]<t&&(r+=e.charAt(s[l]%62))}return r}}function Fe(n,e){return n<e?-1:n>e?1:0}function cy(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),l=e.charAt(r);if(s!==l)return Lp(s)===Lp(l)?Fe(s,l):Lp(s)?1:-1}return Fe(n.length,e.length)}const GP=55296,YP=57343;function Lp(n){const e=n.charCodeAt(0);return e>=GP&&e<=YP}function Ml(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}function LA(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="__name__";class ci{constructor(e,t,r){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Te(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ci.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ci?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const l=ci.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return Fe(e.length,t.length)}static compareSegments(e,t){const r=ci.isNumericId(e),s=ci.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?ci.extractNumericId(e).compare(ci.extractNumericId(t)):cy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ts.fromString(e.substring(4,e.length-2))}}class lt extends ci{construct(e,t,r){return new lt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const KP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends ci{construct(e,t,r){return new Lt(e,t,r)}static isValidIdentifier(e){return KP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ww}static keyField(){return new Lt([ww])}static fromServerFormat(e){const t=[];let r="",s=0;const l=()=>{if(r.length===0)throw new de(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const f=e[s];if(f==="\\"){if(s+1===e.length)throw new de(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[s+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new de(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,s+=2}else f==="`"?(c=!c,s++):f!=="."||c?(r+=f,s++):(l(),s++)}if(l(),c)throw new de(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(t)}static emptyPath(){return new Lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(lt.fromString(e))}static fromName(e){return new ye(lt.fromString(e).popFirst(5))}static empty(){return new ye(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(n,e,t){if(!t)throw new de(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function QP(n,e,t,r){if(e===!0&&r===!0)throw new de(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function bw(n){if(!ye.isDocumentKey(n))throw new de(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Sw(n){if(ye.isDocumentKey(n))throw new de(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function zA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Xd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te(12329,{type:typeof n})}function Zi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xd(n);throw new de(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(n,e){const t={typeString:n};return e&&(t.value=e),t}function lh(n,e){if(!zA(n))throw new de(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(s&&typeof c!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new de(J.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=-62135596800,Iw=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Iw);return new vt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Aw)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Iw}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(lh(e,vt._jsonSchema))return new vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Aw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vt._jsonSchemaVersion="firestore/timestamp/1.0",vt._jsonSchema={type:$t("string",vt._jsonSchemaVersion),seconds:$t("number"),nanoseconds:$t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new vt(0,0))}static max(){return new xe(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=-1;class Id{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function hy(n){return n.fields.find((e=>e.kind===2))}function Qs(n){return n.fields.filter((e=>e.kind!==2))}Id.UNKNOWN_ID=-1;class td{constructor(e,t){this.fieldPath=e,this.kind=t}}class kc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new kc(0,ur.min())}}function $P(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=xe.fromTimestamp(r===1e9?new vt(t+1,0):new vt(t,r));return new ur(s,ye.empty(),e)}function BA(n){return new ur(n.readTime,n.key,Vc)}class ur{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ur(xe.min(),ye.empty(),Vc)}static max(){return new ur(xe.max(),ye.empty(),Vc)}}function o_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:Fe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==FA)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H(((r,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):H.reject(t)}static resolve(e){return new H(((t,r)=>{t(e)}))}static reject(e){return new H(((t,r)=>{r(e)}))}static waitFor(e){return new H(((t,r)=>{let s=0,l=0,c=!1;e.forEach((f=>{++s,f.next((()=>{++l,c&&l===s&&t()}),(m=>r(m)))})),c=!0,l===s&&t()}))}static or(e){let t=H.resolve(!1);for(const r of e)t=t.next((s=>s?H.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,l)=>{r.push(t.call(this,s,l))})),this.waitFor(r)}static mapArray(e,t){return new H(((r,s)=>{const l=e.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((_=>{c[g]=_,++f,f===l&&r(c)}),(_=>s(_)))}}))}static doWhile(e,t){return new H(((r,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):r()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr="SimpleDb";class Wd{static open(e,t,r,s){try{return new Wd(t,e.transaction(s,r))}catch(l){throw new Ec(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new qr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Ec(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=l_(r.target.error);this.S.reject(new Ec(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(he(sr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new WP(t)}}class ns{static delete(e){return he(sr,"Removing database:",e),Ws(PS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!jS())return!1;if(ns.F())return!0;const e=nn(),t=ns.M(e),r=0<t&&t<10,s=qA(e),l=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,ns.M(nn())===12.2&&Bn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(he(sr,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=l=>{const c=l.target.result;t(c)},s.onblocked=()=>{r(new Ec(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new de(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new de(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Ec(e,c))},s.onupgradeneeded=l=>{he(sr,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,s.transaction,l.oldVersion,this.version).next((()=>{he(sr,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const f=Wd.open(this.db,e,l?"readonly":"readwrite",r),m=s(f).next((g=>(f.C(),g))).catch((g=>(f.abort(g),H.reject(g)))).toPromise();return m.catch((()=>{})),await f.D,m}catch(f){const m=f,g=m.name!=="FirebaseError"&&c<3;if(he(sr,"Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function qA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class XP{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ws(this.U.delete())}}class Ec extends de{constructor(e,t){super(J.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ms(n){return n.name==="IndexedDbTransactionError"}class WP{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(he(sr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(he(sr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ws(r)}add(e){return he(sr,"ADD",this.store.name,e,e),Ws(this.store.add(e))}get(e){return Ws(this.store.get(e)).next((t=>(t===void 0&&(t=null),he(sr,"GET",this.store.name,e,t),t)))}delete(e){return he(sr,"DELETE",this.store.name,e),Ws(this.store.delete(e))}count(){return he(sr,"COUNT",this.store.name),Ws(this.store.count())}J(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const l=s.getAll(r.range);return new H(((c,f)=>{l.onerror=m=>{f(m.target.error)},l.onsuccess=m=>{c(m.target.result)}}))}{const l=this.cursor(r),c=[];return this.H(l,((f,m)=>{c.push(m)})).next((()=>c))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new H(((s,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{s(c.target.result)}}))}Z(e,t){he(sr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,((l,c,f)=>f.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}te(e){const t=this.cursor({});return new H(((r,s)=>{t.onerror=l=>{const c=l_(l.target.error);s(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((f=>{f?c.continue():r()})):r()}}))}H(e,t){const r=[];return new H(((s,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void s();const m=new XP(f),g=t(f.primaryKey,f.value,m);if(g instanceof H){const _=g.catch((E=>(m.done(),H.reject(E))));r.push(_)}m.isDone?s():m.G===null?f.continue():f.continue(m.G)}})).next((()=>H.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ws(n){return new H(((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=l_(r.target.error);t(s)}}))}let Rw=!1;function l_(n){const e=ns.M(nn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new de("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Rw||(Rw=!0,setTimeout((()=>{throw r}),0)),r}}return n}const Tc="IndexBackfiller";class ZP{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){he(Tc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();he(Tc,`Documents written: ${t}`)}catch(t){ms(t)?he(Tc,"Ignoring IndexedDB error during index backfill: ",t):await To(t)}await this.re(6e4)}))}}class JP{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let s=t,l=!0;return H.doWhile((()=>l===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return he(Tc,`Processing collection: ${c}`),this.oe(e,c,s).next((f=>{s-=f,r.add(c)}));l=!1})))).next((()=>t-s))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(s,l))).next((f=>(he(Tc,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f)))).next((()=>c.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((s,l)=>{const c=BA(l);o_(c,r)>0&&(r=c)})),new ur(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cr.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=-1;function uh(n){return n==null}function Lc(n){return n===0&&1/n==-1/0}function eO(n){return typeof n=="number"&&Number.isInteger(n)&&!Lc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd="";function Nn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Dw(e)),e=tO(n.get(t),e);return Dw(e)}function tO(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case Rd:t+="";break;default:t+=l}}return t}function Dw(n){return n+Rd+""}function hi(n){const e=n.length;if(Re(e>=2,64408,{path:n}),e===2)return Re(n.charAt(0)===Rd&&n.charAt(1)==="",56145,{path:n}),lt.emptyPath();const t=e-2,r=[];let s="";for(let l=0;l<e;){const c=n.indexOf(Rd,l);switch((c<0||c>t)&&Te(50515,{path:n}),n.charAt(c+1)){case"":const f=n.substring(l,c);let m;s.length===0?m=f:(s+=f,m=s,s=""),r.push(m);break;case"":s+=n.substring(l,c),s+="\0";break;case"":s+=n.substring(l,c+1);break;default:Te(61167,{path:n})}l=c+2}return new lt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="remoteDocuments",ch="owner",ul="owner",Uc="mutationQueues",nO="userId",Fr="mutations",Cw="batchId",no="userMutationsIndex",xw=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(n,e){return[n,Nn(e)]}function HA(n,e,t){return[n,Nn(e),t]}const rO={},Pl="documentMutations",Dd="remoteDocumentsV14",iO=["prefixPath","collectionGroup","readTime","documentId"],rd="documentKeyIndex",aO=["prefixPath","collectionGroup","documentId"],GA="collectionGroupIndex",sO=["collectionGroup","readTime","prefixPath","documentId"],zc="remoteDocumentGlobal",fy="remoteDocumentGlobalKey",Ol="targets",YA="queryTargetsIndex",oO=["canonicalId","targetId"],Vl="targetDocuments",lO=["targetId","path"],u_="documentTargetsIndex",uO=["path","targetId"],Cd="targetGlobalKey",io="targetGlobal",Bc="collectionParents",cO=["collectionId","parent"],kl="clientMetadata",hO="clientId",Zd="bundles",fO="bundleId",Jd="namedQueries",dO="name",c_="indexConfiguration",mO="indexId",dy="collectionGroupIndex",gO="collectionGroup",wc="indexState",pO=["indexId","uid"],KA="sequenceNumberIndex",yO=["uid","sequenceNumber"],bc="indexEntries",_O=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],QA="documentKeyIndex",vO=["indexId","uid","orderedDocumentKey"],em="documentOverlays",EO=["userId","collectionPath","documentId"],my="collectionPathOverlayIndex",TO=["userId","collectionPath","largestBatchId"],$A="collectionGroupOverlayIndex",wO=["userId","collectionGroup","largestBatchId"],h_="globals",bO="name",XA=[Uc,Fr,Pl,$s,Ol,ch,io,Vl,kl,zc,Bc,Zd,Jd],SO=[...XA,em],WA=[Uc,Fr,Pl,Dd,Ol,ch,io,Vl,kl,zc,Bc,Zd,Jd,em],ZA=WA,f_=[...ZA,c_,wc,bc],AO=f_,JA=[...f_,h_],IO=JA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy extends jA{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function an(n,e){const t=ze(n);return ns.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function gs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function eI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,t){this.comparator=e,this.root=t||bn.EMPTY}insert(e,t){return new Vt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bf(this.root,e,this.comparator,!0)}}class Bf{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bn{constructor(e,t,r,s,l){this.key=e,this.value=t,this.color=r??bn.RED,this.left=s??bn.EMPTY,this.right=l??bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,l){return new bn(e??this.key,t??this.value,r??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const l=r(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,r),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return bn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1;bn.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,r,s,l){return this}insert(e,t,r){return new bn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Mw(this.data.getIterator())}getIteratorFrom(e){return new Mw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=r.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Tt(this.comparator);return t.data=e,t}}class Mw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function cl(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new Kn([])}unionWith(e){let t=new Tt(Lt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Kn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ml(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new tI("Invalid base64 string: "+l):l}})(e);return new Wt(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l})(e);return new Wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const RO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ji(n){if(Re(!!n,39018),typeof n=="string"){let e=0;const t=RO.exec(n);if(Re(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pt(n.seconds),nanos:Pt(n.nanos)}}function Pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ea(n){return typeof n=="string"?Wt.fromBase64String(n):Wt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="server_timestamp",rI="__type__",iI="__previous_value__",aI="__local_write_time__";function d_(n){return(n?.mapValue?.fields||{})[rI]?.stringValue===nI}function tm(n){const e=n.mapValue.fields[iI];return d_(e)?tm(e):e}function Fc(n){const e=Ji(n.mapValue.fields[aI].timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,t,r,s,l,c,f,m,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=_}}const xd="(default)";class ho{constructor(e,t){this.projectId=e,this.database=t||xd}static empty(){return new ho("","")}get isDefaultDatabase(){return this.database===xd}isEqual(e){return e instanceof ho&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="__type__",sI="__max__",Xa={mapValue:{fields:{__type__:{stringValue:sI}}}},g_="__vector__",Ll="value",id={nullValue:"NULL_VALUE"};function ss(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?d_(n)?4:oI(n)?9007199254740991:nm(n)?10:11:Te(28295,{value:n})}function _i(n,e){if(n===e)return!0;const t=ss(n);if(t!==ss(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fc(n).isEqual(Fc(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=Ji(s.timestampValue),f=Ji(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return ea(s.bytesValue).isEqual(ea(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return Pt(s.geoPointValue.latitude)===Pt(l.geoPointValue.latitude)&&Pt(s.geoPointValue.longitude)===Pt(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return Pt(s.integerValue)===Pt(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=Pt(s.doubleValue),f=Pt(l.doubleValue);return c===f?Lc(c)===Lc(f):isNaN(c)&&isNaN(f)}return!1})(n,e);case 9:return Ml(n.arrayValue.values||[],e.arrayValue.values||[],_i);case 10:case 11:return(function(s,l){const c=s.mapValue.fields||{},f=l.mapValue.fields||{};if(Nw(c)!==Nw(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!_i(c[m],f[m])))return!1;return!0})(n,e);default:return Te(52216,{left:n})}}function jc(n,e){return(n.values||[]).find((t=>_i(t,e)))!==void 0}function os(n,e){if(n===e)return 0;const t=ss(n),r=ss(e);if(t!==r)return Fe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=Pt(l.integerValue||l.doubleValue),m=Pt(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,e);case 3:return Pw(n.timestampValue,e.timestampValue);case 4:return Pw(Fc(n),Fc(e));case 5:return cy(n.stringValue,e.stringValue);case 6:return(function(l,c){const f=ea(l),m=ea(c);return f.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),m=c.split("/");for(let g=0;g<f.length&&g<m.length;g++){const _=Fe(f[g],m[g]);if(_!==0)return _}return Fe(f.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=Fe(Pt(l.latitude),Pt(c.latitude));return f!==0?f:Fe(Pt(l.longitude),Pt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ow(n.arrayValue,e.arrayValue);case 10:return(function(l,c){const f=l.fields||{},m=c.fields||{},g=f[Ll]?.arrayValue,_=m[Ll]?.arrayValue,E=Fe(g?.values?.length||0,_?.values?.length||0);return E!==0?E:Ow(g,_)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Xa.mapValue&&c===Xa.mapValue)return 0;if(l===Xa.mapValue)return 1;if(c===Xa.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),g=c.fields||{},_=Object.keys(g);m.sort(),_.sort();for(let E=0;E<m.length&&E<_.length;++E){const w=cy(m[E],_[E]);if(w!==0)return w;const I=os(f[m[E]],g[_[E]]);if(I!==0)return I}return Fe(m.length,_.length)})(n.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function Pw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Fe(n,e);const t=Ji(n),r=Ji(e),s=Fe(t.seconds,r.seconds);return s!==0?s:Fe(t.nanos,r.nanos)}function Ow(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const l=os(t[s],r[s]);if(l)return l}return Fe(t.length,r.length)}function Ul(n){return py(n)}function py(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Ji(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ea(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ye.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const l of t.values||[])s?s=!1:r+=",",r+=py(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const c of r)l?l=!1:s+=",",s+=`${c}:${py(t.fields[c])}`;return s+"}"})(n.mapValue):Te(61005,{value:n})}function ad(n){switch(ss(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tm(n);return e?16+ad(e):16;case 5:return 2*n.stringValue.length;case 6:return ea(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,l)=>s+ad(l)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return gs(r.fields,((l,c)=>{s+=l.length+ad(c)})),s})(n.mapValue);default:throw Te(13486,{value:n})}}function qc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yy(n){return!!n&&"integerValue"in n}function Hc(n){return!!n&&"arrayValue"in n}function Vw(n){return!!n&&"nullValue"in n}function kw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function sd(n){return!!n&&"mapValue"in n}function nm(n){return(n?.mapValue?.fields||{})[m_]?.stringValue===g_}function Sc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return gs(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Sc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sc(n.arrayValue.values[t]);return e}return{...n}}function oI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===sI}const lI={mapValue:{fields:{[m_]:{stringValue:g_},[Ll]:{arrayValue:{}}}}};function CO(n){return"nullValue"in n?id:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?qc(ho.empty(),ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?nm(n)?lI:{mapValue:{}}:Te(35942,{value:n})}function xO(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?qc(ho.empty(),ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?lI:"mapValue"in n?nm(n)?{mapValue:{}}:Xa:Te(61959,{value:n})}function Lw(n,e){const t=os(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Uw(n,e){const t=os(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!sd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sc(t)}setAll(e){let t=Lt.emptyPath(),r={},s=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,s),r={},s=[],t=f.popLast()}c?r[f.lastSegment()]=Sc(c):s.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,s)}delete(e){const t=this.field(e.popLast());sd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _i(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];sd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){gs(t,((s,l)=>e[s]=l));for(const s of r)delete e[s]}clone(){return new Sn(Sc(this.value))}}function uI(n){const e=[];return gs(n.fields,((t,r)=>{const s=new Lt([t]);if(sd(r)){const l=uI(r.mapValue).fields;if(l.length===0)e.push(s);else for(const c of l)e.push(s.child(c))}else e.push(s)})),new Kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,t,r,s,l,c,f){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Ot(e,0,xe.min(),xe.min(),xe.min(),Sn.empty(),0)}static newFoundDocument(e,t,r,s){return new Ot(e,1,t,xe.min(),r,s,0)}static newNoDocument(e,t){return new Ot(e,2,t,xe.min(),xe.min(),Sn.empty(),0)}static newUnknownDocument(e,t){return new Ot(e,3,t,xe.min(),xe.min(),Sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,t){this.position=e,this.inclusive=t}}function zw(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const l=e[s],c=n.position[s];if(l.field.isKeyField()?r=ye.comparator(ye.fromName(c.referenceValue),t.key):r=os(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function Bw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!_i(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,t="asc"){this.field=e,this.dir=t}}function NO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{}class tt extends cI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new MO(e,t,r):t==="array-contains"?new VO(e,r):t==="in"?new pI(e,r):t==="not-in"?new kO(e,r):t==="array-contains-any"?new LO(e,r):new tt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new PO(e,r):new OO(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(os(t,this.value)):t!==null&&ss(this.value)===ss(t)&&this.matchesComparison(os(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Et extends cI{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Et(e,t)}matches(e){return Bl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Bl(n){return n.op==="and"}function _y(n){return n.op==="or"}function p_(n){return hI(n)&&Bl(n)}function hI(n){for(const e of n.filters)if(e instanceof Et)return!1;return!0}function vy(n){if(n instanceof tt)return n.field.canonicalString()+n.op.toString()+Ul(n.value);if(p_(n))return n.filters.map((e=>vy(e))).join(",");{const e=n.filters.map((t=>vy(t))).join(",");return`${n.op}(${e})`}}function fI(n,e){return n instanceof tt?(function(r,s){return s instanceof tt&&r.op===s.op&&r.field.isEqual(s.field)&&_i(r.value,s.value)})(n,e):n instanceof Et?(function(r,s){return s instanceof Et&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((l,c,f)=>l&&fI(c,s.filters[f])),!0):!1})(n,e):void Te(19439)}function dI(n,e){const t=n.filters.concat(e);return Et.create(t,n.op)}function mI(n){return n instanceof tt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ul(t.value)}`})(n):n instanceof Et?(function(t){return t.op.toString()+" {"+t.getFilters().map(mI).join(" ,")+"}"})(n):"Filter"}class MO extends tt{constructor(e,t,r){super(e,t,r),this.key=ye.fromName(r.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class PO extends tt{constructor(e,t){super(e,"in",t),this.keys=gI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class OO extends tt{constructor(e,t){super(e,"not-in",t),this.keys=gI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function gI(n,e){return(e.arrayValue?.values||[]).map((t=>ye.fromName(t.referenceValue)))}class VO extends tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hc(t)&&jc(t.arrayValue,this.value)}}class pI extends tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&jc(this.value.arrayValue,t)}}class kO extends tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!jc(this.value.arrayValue,t)}}class LO extends tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>jc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,t=null,r=[],s=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function Ey(n,e=null,t=[],r=[],s=null,l=null,c=null){return new UO(n,e,t,r,s,l,c)}function fo(n){const e=ze(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>vy(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),uh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Ul(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Ul(r))).join(",")),e.Te=t}return e.Te}function hh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!NO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!fI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Bw(n.startAt,e.startAt)&&Bw(n.endAt,e.endAt)}function Nd(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Md(n,e){return n.filters.filter((t=>t instanceof tt&&t.field.isEqual(e)))}function Fw(n,e,t){let r=id,s=!0;for(const l of Md(n,e)){let c=id,f=!0;switch(l.op){case"<":case"<=":c=CO(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,f=!1;break;case"!=":case"not-in":c=id}Lw({value:r,inclusive:s},{value:c,inclusive:f})<0&&(r=c,s=f)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const c=t.position[l];Lw({value:r,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(r=c,s=t.inclusive);break}}return{value:r,inclusive:s}}function jw(n,e,t){let r=Xa,s=!0;for(const l of Md(n,e)){let c=Xa,f=!0;switch(l.op){case">=":case">":c=xO(l.value),f=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,f=!1;break;case"!=":case"not-in":c=Xa}Uw({value:r,inclusive:s},{value:c,inclusive:f})>0&&(r=c,s=f)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const c=t.position[l];Uw({value:r,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(r=c,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,t=null,r=[],s=[],l=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function zO(n,e,t,r,s,l,c,f){return new Xl(n,e,t,r,s,l,c,f)}function rm(n){return new Xl(n)}function qw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function yI(n){return n.collectionGroup!==null}function Ac(n){const e=ze(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new Tt(Lt.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Gc(l,r))})),t.has(Lt.keyField().canonicalString())||e.Ie.push(new Gc(Lt.keyField(),r))}return e.Ie}function Nr(n){const e=ze(n);return e.Ee||(e.Ee=BO(e,Ac(n))),e.Ee}function BO(n,e){if(n.limitType==="F")return Ey(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new Gc(s.field,l)}));const t=n.endAt?new zl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new zl(n.startAt.position,n.startAt.inclusive):null;return Ey(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ty(n,e){const t=n.filters.concat([e]);return new Xl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Pd(n,e,t){return new Xl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function im(n,e){return hh(Nr(n),Nr(e))&&n.limitType===e.limitType}function _I(n){return`${fo(Nr(n))}|lt:${n.limitType}`}function _l(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>mI(s))).join(", ")}]`),uh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Ul(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Ul(s))).join(",")),`Target(${r})`})(Nr(n))}; limitType=${n.limitType})`}function fh(n,e){return e.isFoundDocument()&&(function(r,s){const l=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ye.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,s){for(const l of Ac(r))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const l of r.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(c,f,m){const g=zw(c,f,m);return c.inclusive?g<=0:g<0})(r.startAt,Ac(r),s)||r.endAt&&!(function(c,f,m){const g=zw(c,f,m);return c.inclusive?g>=0:g>0})(r.endAt,Ac(r),s))})(n,e)}function FO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vI(n){return(e,t)=>{let r=!1;for(const s of Ac(n)){const l=jO(s,e,t);if(l!==0)return l;r=r||s.field.isKeyField()}return 0}}function jO(n,e,t){const r=n.field.isKeyField()?ye.comparator(e.key,t.key):(function(l,c,f){const m=c.data.field(l),g=f.data.field(l);return m!==null&&g!==null?os(m,g):Te(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Te(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,l]of r)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){gs(this.inner,((t,r)=>{for(const[s,l]of r)e(s,l)}))}isEmpty(){return eI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO=new Vt(ye.comparator);function lr(){return qO}const EI=new Vt(ye.comparator);function mc(...n){let e=EI;for(const t of n)e=e.insert(t.key,t);return e}function TI(n){let e=EI;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function fi(){return Ic()}function wI(){return Ic()}function Ic(){return new na((n=>n.toString()),((n,e)=>n.isEqual(e)))}const HO=new Vt(ye.comparator),GO=new Tt(ye.comparator);function $e(...n){let e=GO;for(const t of n)e=e.add(t);return e}const YO=new Tt(Fe);function KO(){return YO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lc(e)?"-0":e}}function bI(n){return{integerValue:""+n}}function QO(n,e){return eO(e)?bI(e):y_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(){this._=void 0}}function $O(n,e,t){return n instanceof Fl?(function(s,l){const c={fields:{[rI]:{stringValue:nI},[aI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&d_(l)&&(l=tm(l)),l&&(c.fields[iI]=l),{mapValue:c}})(t,e):n instanceof jl?AI(n,e):n instanceof ql?II(n,e):(function(s,l){const c=SI(s,l),f=Hw(c)+Hw(s.Ae);return yy(c)&&yy(s.Ae)?bI(f):y_(s.serializer,f)})(n,e)}function XO(n,e,t){return n instanceof jl?AI(n,e):n instanceof ql?II(n,e):t}function SI(n,e){return n instanceof Yc?(function(r){return yy(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class Fl extends am{}class jl extends am{constructor(e){super(),this.elements=e}}function AI(n,e){const t=RI(e);for(const r of n.elements)t.some((s=>_i(s,r)))||t.push(r);return{arrayValue:{values:t}}}class ql extends am{constructor(e){super(),this.elements=e}}function II(n,e){let t=RI(e);for(const r of n.elements)t=t.filter((s=>!_i(s,r)));return{arrayValue:{values:t}}}class Yc extends am{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Hw(n){return Pt(n.integerValue||n.doubleValue)}function RI(n){return Hc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,t){this.field=e,this.transform=t}}function WO(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof jl&&s instanceof jl||r instanceof ql&&s instanceof ql?Ml(r.elements,s.elements,_i):r instanceof Yc&&s instanceof Yc?_i(r.Ae,s.Ae):r instanceof Fl&&s instanceof Fl})(n.transform,e.transform)}class ZO{constructor(e,t){this.version=e,this.transformResults=t}}class dn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dn}static exists(e){return new dn(void 0,e)}static updateTime(e){return new dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function od(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class sm{}function CI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new om(n.key,dn.none()):new Wl(n.key,n.data,dn.none());{const t=n.data,r=Sn.empty();let s=new Tt(Lt.comparator);for(let l of e.fields)if(!s.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),s=s.add(l)}return new ra(n.key,r,new Kn(s.toArray()),dn.none())}}function JO(n,e,t){n instanceof Wl?(function(s,l,c){const f=s.value.clone(),m=Yw(s.fieldTransforms,l,c.transformResults);f.setAll(m),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):n instanceof ra?(function(s,l,c){if(!od(s.precondition,l))return void l.convertToUnknownDocument(c.version);const f=Yw(s.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(xI(s)),m.setAll(f),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Rc(n,e,t,r){return n instanceof Wl?(function(l,c,f,m){if(!od(l.precondition,c))return f;const g=l.value.clone(),_=Kw(l.fieldTransforms,m,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,r):n instanceof ra?(function(l,c,f,m){if(!od(l.precondition,c))return f;const g=Kw(l.fieldTransforms,m,c),_=c.data;return _.setAll(xI(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,r):(function(l,c,f){return od(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,e,t)}function eV(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),l=SI(r.transform,s||null);l!=null&&(t===null&&(t=Sn.empty()),t.set(r.field,l))}return t||null}function Gw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ml(r,s,((l,c)=>WO(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Wl extends sm{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ra extends sm{constructor(e,t,r,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function xI(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Yw(n,e,t){const r=new Map;Re(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const l=n[s],c=l.transform,f=e.data.field(l.field);r.set(l.field,XO(c,f,t[s]))}return r}function Kw(n,e,t){const r=new Map;for(const s of n){const l=s.transform,c=t.data.field(s.field);r.set(s.field,$O(l,c,e))}return r}class om extends sm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __ extends sm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&JO(l,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Rc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Rc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=wI();return this.mutations.forEach((s=>{const l=e.get(s.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(s.key)?null:f;const m=CI(c,f);m!==null&&r.set(s.key,m),c.isValidDocument()||c.convertToNoDocument(xe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),$e())}isEqual(e){return this.batchId===e.batchId&&Ml(this.mutations,e.mutations,((t,r)=>Gw(t,r)))&&Ml(this.baseMutations,e.baseMutations,((t,r)=>Gw(t,r)))}}class E_{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Re(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return HO})();const l=e.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,r[c].version);return new E_(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt,ot;function NI(n){switch(n){case J.OK:return Te(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Te(15467,{code:n})}}function MI(n){if(n===void 0)return Bn("GRPC error has no .code"),J.UNKNOWN;switch(n){case Qt.OK:return J.OK;case Qt.CANCELLED:return J.CANCELLED;case Qt.UNKNOWN:return J.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return J.INTERNAL;case Qt.UNAVAILABLE:return J.UNAVAILABLE;case Qt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Qt.NOT_FOUND:return J.NOT_FOUND;case Qt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Qt.ABORTED:return J.ABORTED;case Qt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Qt.DATA_LOSS:return J.DATA_LOSS;default:return Te(39323,{code:n})}}(ot=Qt||(Qt={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV=new ts([4294967295,4294967295],0);function Qw(n){const e=nV().encode(n),t=new CA;return t.update(e),new Uint8Array(t.digest())}function $w(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ts([t,r],0),new ts([s,l],0)]}class w_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new gc(`Invalid padding: ${t}`);if(r<0)throw new gc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new gc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ts.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(ts.fromNumber(r)));return s.compare(rV)===1&&(s=new ts([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Qw(e),[r,s]=$w(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,s,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new w_(l,s,t);return r.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=Qw(e),[r,s]=$w(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,s,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,t,r,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,dh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new lm(xe.min(),s,new Vt(Fe),lr(),$e())}}class dh{constructor(e,t,r,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new dh(r,t,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,t,r,s){this.be=e,this.removedTargetIds=t,this.key=r,this.De=s}}class PI{constructor(e,t){this.targetId=e,this.Ce=t}}class OI{constructor(e,t,r=Wt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Xw{constructor(){this.ve=0,this.Fe=Ww(),this.Me=Wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$e(),t=$e(),r=$e();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Te(38017,{changeType:l})}})),new dh(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Ww()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Re(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class iV{constructor(e){this.Ge=e,this.ze=new Map,this.je=lr(),this.Je=Ff(),this.He=Ff(),this.Ye=new Vt(Fe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const l=s.target;if(Nd(l))if(r===0){const c=new ye(l.path);this.et(t,c,Ot.newNoDocument(c,xe.min()))}else Re(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const f=this.ut(e),m=f?this.ct(f,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:l=0}=t;let c,f;try{c=ea(r).toUint8Array()}catch(m){if(m instanceof tI)return co("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new w_(c,s,l)}catch(m){return co(m instanceof gc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Nd(f.target)){const m=new ye(f.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,Ot.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let r=$e();this.He.forEach(((l,c)=>{let f=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const s=new lm(e,t,this.Ye,this.je,r);return this.je=lr(),this.Je=Ff(),this.He=Ff(),this.Ye=new Vt(Fe),s}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Xw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Tt(Fe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Tt(Fe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Xw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ff(){return new Vt(ye.comparator)}function Ww(){return new Vt(ye.comparator)}const aV={asc:"ASCENDING",desc:"DESCENDING"},sV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oV={and:"AND",or:"OR"};class lV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wy(n,e){return n.useProto3Json||uh(e)?e:{value:e}}function Hl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function uV(n,e){return Hl(n,e.toTimestamp())}function gn(n){return Re(!!n,49232),xe.fromTimestamp((function(t){const r=Ji(t);return new vt(r.seconds,r.nanos)})(n))}function b_(n,e){return by(n,e).canonicalString()}function by(n,e){const t=(function(s){return new lt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function kI(n){const e=lt.fromString(n);return Re(GI(e),10190,{key:e.toString()}),e}function Kc(n,e){return b_(n.databaseId,e.path)}function $i(n,e){const t=kI(e);if(t.get(1)!==n.databaseId.projectId)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(zI(t))}function LI(n,e){return b_(n.databaseId,e)}function UI(n){const e=kI(n);return e.length===4?lt.emptyPath():zI(e)}function Sy(n){return new lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zI(n){return Re(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Zw(n,e,t){return{name:Kc(n,e),fields:t.value.mapValue.fields}}function cV(n,e,t){const r=$i(n,e.name),s=gn(e.updateTime),l=e.createTime?gn(e.createTime):xe.min(),c=new Sn({mapValue:{fields:e.fields}}),f=Ot.newFoundDocument(r,s,l,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function hV(n,e){return"found"in e?(function(r,s){Re(!!s.found,43571),s.found.name,s.found.updateTime;const l=$i(r,s.found.name),c=gn(s.found.updateTime),f=s.found.createTime?gn(s.found.createTime):xe.min(),m=new Sn({mapValue:{fields:s.found.fields}});return Ot.newFoundDocument(l,c,f,m)})(n,e):"missing"in e?(function(r,s){Re(!!s.missing,3894),Re(!!s.readTime,22933);const l=$i(r,s.missing),c=gn(s.readTime);return Ot.newNoDocument(l,c)})(n,e):Te(7234,{result:e})}function fV(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Te(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(g,_){return g.useProto3Json?(Re(_===void 0||typeof _=="string",58123),Wt.fromBase64String(_||"")):(Re(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Wt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(g){const _=g.code===void 0?J.UNKNOWN:MI(g.code);return new de(_,g.message||"")})(c);t=new OI(r,s,l,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=$i(n,r.document.name),l=gn(r.document.updateTime),c=r.document.createTime?gn(r.document.createTime):xe.min(),f=new Sn({mapValue:{fields:r.document.fields}}),m=Ot.newFoundDocument(s,l,c,f),g=r.targetIds||[],_=r.removedTargetIds||[];t=new ld(g,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=$i(n,r.document),l=r.readTime?gn(r.readTime):xe.min(),c=Ot.newNoDocument(s,l),f=r.removedTargetIds||[];t=new ld([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=$i(n,r.document),l=r.removedTargetIds||[];t=new ld([],l,s,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:l}=r,c=new tV(s,l),f=r.targetId;t=new PI(f,c)}}return t}function Qc(n,e){let t;if(e instanceof Wl)t={update:Zw(n,e.key,e.value)};else if(e instanceof om)t={delete:Kc(n,e.key)};else if(e instanceof ra)t={update:Zw(n,e.key,e.data),updateMask:_V(e.fieldMask)};else{if(!(e instanceof __))return Te(16599,{Vt:e.type});t={verify:Kc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const f=c.transform;if(f instanceof Fl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof jl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof ql)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Yc)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw Te(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:uV(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te(27497)})(n,e.precondition)),t}function Ay(n,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?dn.updateTime(gn(l.updateTime)):l.exists!==void 0?dn.exists(l.exists):dn.none()})(e.currentDocument):dn.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(c,f){let m=null;if("setToServerValue"in f)Re(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),m=new Fl;else if("appendMissingElements"in f){const _=f.appendMissingElements.values||[];m=new jl(_)}else if("removeAllFromArray"in f){const _=f.removeAllFromArray.values||[];m=new ql(_)}else"increment"in f?m=new Yc(c,f.increment):Te(16584,{proto:f});const g=Lt.fromServerFormat(f.fieldPath);return new DI(g,m)})(n,s))):[];if(e.update){e.update.name;const s=$i(n,e.update.name),l=new Sn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(m){const g=m.fieldPaths||[];return new Kn(g.map((_=>Lt.fromServerFormat(_))))})(e.updateMask);return new ra(s,l,c,t,r)}return new Wl(s,l,t,r)}if(e.delete){const s=$i(n,e.delete);return new om(s,t)}if(e.verify){const s=$i(n,e.verify);return new __(s,t)}return Te(1463,{proto:e})}function dV(n,e){return n&&n.length>0?(Re(e!==void 0,14353),n.map((t=>(function(s,l){let c=s.updateTime?gn(s.updateTime):gn(l);return c.isEqual(xe.min())&&(c=gn(l)),new ZO(c,s.transformResults||[])})(t,e)))):[]}function BI(n,e){return{documents:[LI(n,e.path)]}}function FI(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=LI(n,s);const l=(function(g){if(g.length!==0)return HI(Et.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((_=>(function(w){return{field:vl(w.field),direction:gV(w.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=wy(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:s}}function jI(n){let e=UI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Re(r===1,65062);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const w=qI(E);return w instanceof Et&&p_(w)?w.getFilters():[w]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((w=>(function(P){return new Gc(El(P.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(w)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let w;return w=typeof E=="object"?E.value:E,uh(w)?null:w})(t.limit));let m=null;t.startAt&&(m=(function(E){const w=!!E.before,I=E.values||[];return new zl(I,w)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const w=!E.before,I=E.values||[];return new zl(I,w)})(t.endAt)),zO(e,s,c,l,f,"F",m,g)}function mV(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function qI(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=El(t.unaryFilter.field);return tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=El(t.unaryFilter.field);return tt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=El(t.unaryFilter.field);return tt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=El(t.unaryFilter.field);return tt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(n):n.fieldFilter!==void 0?(function(t){return tt.create(El(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Et.create(t.compositeFilter.filters.map((r=>qI(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(n):Te(30097,{filter:n})}function gV(n){return aV[n]}function pV(n){return sV[n]}function yV(n){return oV[n]}function vl(n){return{fieldPath:n.canonicalString()}}function El(n){return Lt.fromServerFormat(n.fieldPath)}function HI(n){return n instanceof tt?(function(t){if(t.op==="=="){if(kw(t.value))return{unaryFilter:{field:vl(t.field),op:"IS_NAN"}};if(Vw(t.value))return{unaryFilter:{field:vl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(kw(t.value))return{unaryFilter:{field:vl(t.field),op:"IS_NOT_NAN"}};if(Vw(t.value))return{unaryFilter:{field:vl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vl(t.field),op:pV(t.op),value:t.value}}})(n):n instanceof Et?(function(t){const r=t.getFilters().map((s=>HI(s)));return r.length===1?r[0]:{compositeFilter:{op:yV(t.op),filters:r}}})(n):Te(54877,{filter:n})}function _V(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function GI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,t,r,s,l=xe.min(),c=xe.min(),f=Wt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new Ki(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e){this.yt=e}}function vV(n,e){let t;if(e.document)t=cV(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ye.fromSegments(e.noDocument.path),s=go(e.noDocument.readTime);t=Ot.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Te(56709);{const r=ye.fromSegments(e.unknownDocument.path),s=go(e.unknownDocument.version);t=Ot.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime((function(s){const l=new vt(s[0],s[1]);return xe.fromTimestamp(l)})(e.readTime)),t}function Jw(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Od(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,c){return{name:Kc(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Hl(l,c.version.toTimestamp()),createTime:Hl(l,c.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:mo(e.version)};else{if(!e.isUnknownDocument())return Te(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:mo(e.version)}}return r}function Od(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function mo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function go(n){const e=new vt(n.seconds,n.nanoseconds);return xe.fromTimestamp(e)}function Zs(n,e){const t=(e.baseMutations||[]).map((l=>Ay(n.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const f=e.mutations[l+1];c.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>Ay(n.yt,l))),s=vt.fromMillis(e.localWriteTimeMs);return new v_(e.batchId,s,t,r)}function pc(n){const e=go(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?go(n.lastLimboFreeSnapshotVersion):xe.min();let r;return r=(function(l){return l.documents!==void 0})(n.query)?(function(l){const c=l.documents.length;return Re(c===1,1966,{count:c}),Nr(rm(UI(l.documents[0])))})(n.query):(function(l){return Nr(jI(l))})(n.query),new Ki(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Wt.fromBase64String(n.resumeToken))}function KI(n,e){const t=mo(e.snapshotVersion),r=mo(e.lastLimboFreeSnapshotVersion);let s;s=Nd(e.target)?BI(n.yt,e.target):FI(n.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:fo(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function QI(n){const e=jI({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Pd(e,e.limit,"L"):e}function Up(n,e){return new T_(e.largestBatchId,Ay(n.yt,e.overlayMutation))}function eb(n,e){const t=e.path.lastSegment();return[n,Nn(e.path.popLast()),t]}function tb(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:mo(r.readTime),documentKey:Nn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{getBundleMetadata(e,t){return nb(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:go(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return nb(e).put((function(s){return{bundleId:s.id,createTime:mo(gn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return rb(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:QI(l.bundledQuery),readTime:go(l.readTime)}})(r)}))}saveNamedQuery(e,t){return rb(e).put((function(s){return{name:s.name,readTime:mo(gn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function nb(n){return an(n,Zd)}function rb(n){return an(n,Jd)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new um(e,r)}getOverlay(e,t){return rc(e).get(eb(this.userId,t)).next((r=>r?Up(this.serializer,r):null))}getOverlays(e,t){const r=fi();return H.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&r.set(s,l)})))).next((()=>r))}saveOverlays(e,t,r){const s=[];return r.forEach(((l,c)=>{const f=new T_(t,c);s.push(this.St(e,f))})),H.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach((c=>s.add(Nn(c.getCollectionPath()))));const l=[];return s.forEach((c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(rc(e).Z(my,f))})),H.waitFor(l)}getOverlaysForCollection(e,t,r){const s=fi(),l=Nn(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return rc(e).J(my,c).next((f=>{for(const m of f){const g=Up(this.serializer,m);s.set(g.getKey(),g)}return s}))}getOverlaysForCollectionGroup(e,t,r,s){const l=fi();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return rc(e).ee({index:$A,range:f},((m,g,_)=>{const E=Up(this.serializer,g);l.size()<s||E.largestBatchId===c?(l.set(E.getKey(),E),c=E.largestBatchId):_.done()})).next((()=>l))}St(e,t){return rc(e).put((function(s,l,c){const[f,m,g]=eb(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Qc(s.yt,c.mutation)}})(this.serializer,this.userId,t))}}function rc(n){return an(n,em)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{bt(e){return an(e,h_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?Wt.fromUint8Array(r):Wt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Pt(e.integerValue));else if("doubleValue"in e){const r=Pt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Lc(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Ji(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ea(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?oI(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):nm(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Te(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const s of Object.keys(r))this.Ot(s,t),this.Ct(r[s],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const s=Ll,l=r[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Pt(l)),this.Ot(s,t),this.Ct(r[s],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const s of r)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),ye.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Js.Kt=new Js;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=255;function wV(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function ib(n){const e=64-(function(r){let s=0;for(let l=0;l<8;++l){const c=wV(255&r[l]);if(s+=c,c!==8)break}return s})(n);return Math.ceil(e/8)}class bV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),r=ib(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),r=ib(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(hl),this.sn(255)}_n(){this.an(hl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===hl?(this.sn(hl),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===hl?(this.an(hl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class SV{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class AV{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class ic{constructor(){this.cn=new bV,this.ln=new SV(this.cn),this.hn=new AV(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,t,r,s){this.Tn=e,this.In=t,this.En=r,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new eo(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:ud(this.En),directionalValue:ud(this.dn),orderedDocumentKey:ud(t),documentKey:r.path.toArray()}}Vn(e,t,r){const s=this.Rn(e,t,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function La(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=ab(n.En,e.En),t!==0?t:(t=ab(n.dn,e.dn),t!==0?t:ye.comparator(n.In,e.In)))}function ab(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function ud(n){return FS()?(function(t){let r="";for(let s=0;s<t.length;s++)r+=String.fromCharCode(t[s]);return r})(n):n}function sb(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(n)}class ob{constructor(e){this.mn=new Tt(((t,r)=>Lt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Re(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=hy(e);if(t!==void 0&&!this.wn(t))return!1;const r=Qs(e);let s=new Set,l=0,c=0;for(;l<r.length&&this.wn(r[l]);++l)s=s.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.mn.size>0){const f=this.mn.getIterator().getNext();if(!s.has(f.field.canonicalString())){const m=r[l];if(!this.Sn(f,m)||!this.bn(this.fn[c++],m))return!1}++l}for(;l<r.length;++l){const f=r[l];if(c>=this.fn.length||!this.bn(this.fn[c++],f))return!1}return!0}Dn(){if(this.pn)return null;let e=new Tt(Lt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new td(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new td(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new td(r.field,r.dir==="asc"?0:1)));return new Id(Id.UNKNOWN_ID,this.collectionId,t,kc.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(n){if(Re(n instanceof tt||n instanceof Et,20012),n instanceof tt){if(n instanceof pI){const t=n.value.arrayValue?.values?.map((r=>tt.create(n.field,"==",r)))||[];return Et.create(t,"or")}return n}const e=n.filters.map((t=>$I(t)));return Et.create(e,n.op)}function IV(n){if(n.getFilters().length===0)return[];const e=Dy($I(n));return Re(XI(e),7391),Iy(e)||Ry(e)?[e]:e.getFilters()}function Iy(n){return n instanceof tt}function Ry(n){return n instanceof Et&&p_(n)}function XI(n){return Iy(n)||Ry(n)||(function(t){if(t instanceof Et&&_y(t)){for(const r of t.getFilters())if(!Iy(r)&&!Ry(r))return!1;return!0}return!1})(n)}function Dy(n){if(Re(n instanceof tt||n instanceof Et,34018),n instanceof tt)return n;if(n.filters.length===1)return Dy(n.filters[0]);const e=n.filters.map((r=>Dy(r)));let t=Et.create(e,n.op);return t=Vd(t),XI(t)?t:(Re(t instanceof Et,64498),Re(Bl(t),40251),Re(t.filters.length>1,57927),t.filters.reduce(((r,s)=>S_(r,s))))}function S_(n,e){let t;return Re(n instanceof tt||n instanceof Et,38388),Re(e instanceof tt||e instanceof Et,25473),t=n instanceof tt?e instanceof tt?(function(s,l){return Et.create([s,l],"and")})(n,e):lb(n,e):e instanceof tt?lb(e,n):(function(s,l){if(Re(s.filters.length>0&&l.filters.length>0,48005),Bl(s)&&Bl(l))return dI(s,l.getFilters());const c=_y(s)?s:l,f=_y(s)?l:s,m=c.filters.map((g=>S_(g,f)));return Et.create(m,"or")})(n,e),Vd(t)}function lb(n,e){if(Bl(e))return dI(e,n.getFilters());{const t=e.filters.map((r=>S_(n,r)));return Et.create(t,"or")}}function Vd(n){if(Re(n instanceof tt||n instanceof Et,11850),n instanceof tt)return n;const e=n.getFilters();if(e.length===1)return Vd(e[0]);if(hI(n))return n;const t=e.map((s=>Vd(s))),r=[];return t.forEach((s=>{s instanceof tt?r.push(s):s instanceof Et&&(s.op===n.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:Et.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(){this.Cn=new A_}addToCollectionParentIndex(e,t){return this.Cn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(ur.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(ur.min())}updateCollectionGroup(e,t,r){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class A_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Tt(lt.comparator),l=!s.has(r);return this.index[t]=s.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Tt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub="IndexedDbIndexManager",jf=new Uint8Array(0);class DV{constructor(e,t){this.databaseId=t,this.vn=new A_,this.Fn=new na((r=>fo(r)),((r,s)=>hh(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const l={collectionId:r,parent:Nn(s)};return cb(e).put(l)}return H.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[LA(t),""],!1,!0);return cb(e).J(s).next((l=>{for(const c of l){if(c.collectionId!==t)break;r.push(hi(c.parent))}return r}))}addFieldIndex(e,t){const r=ac(e),s=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(t);delete s.indexId;const l=r.add(s);if(t.indexState){const c=dl(e);return l.next((f=>{c.put(tb(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=ac(e),s=dl(e),l=fl(e);return r.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=ac(e),r=fl(e),s=dl(e);return t.Z().next((()=>r.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return H.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const l=new ob(r).Dn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=fl(e);let s=!0;const l=new Map;return H.forEach(this.Mn(t),(c=>this.xn(e,c).next((f=>{s&&(s=!!f),l.set(c,f)})))).next((()=>{if(s){let c=$e();const f=[];return H.forEach(l,((m,g)=>{he(ub,`Using index ${(function(ee){return`id=${ee.indexId}|cg=${ee.collectionGroup}|f=${ee.fields.map((_e=>`${_e.fieldPath}:${_e.kind}`)).join(",")}`})(m)} to execute ${fo(t)}`);const _=(function(ee,_e){const le=hy(_e);if(le===void 0)return null;for(const z of Md(ee,le.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null})(g,m),E=(function(ee,_e){const le=new Map;for(const z of Qs(_e))for(const x of Md(ee,z.fieldPath))switch(x.op){case"==":case"in":le.set(z.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return le.set(z.fieldPath.canonicalString(),x.value),Array.from(le.values())}return null})(g,m),w=(function(ee,_e){const le=[];let z=!0;for(const x of Qs(_e)){const A=x.kind===0?Fw(ee,x.fieldPath,ee.startAt):jw(ee,x.fieldPath,ee.startAt);le.push(A.value),z&&(z=A.inclusive)}return new zl(le,z)})(g,m),I=(function(ee,_e){const le=[];let z=!0;for(const x of Qs(_e)){const A=x.kind===0?jw(ee,x.fieldPath,ee.endAt):Fw(ee,x.fieldPath,ee.endAt);le.push(A.value),z&&(z=A.inclusive)}return new zl(le,z)})(g,m),P=this.On(m,g,w),F=this.On(m,g,I),L=this.Nn(m,g,E),ne=this.Bn(m.indexId,_,P,w.inclusive,F,I.inclusive,L);return H.forEach(ne,(te=>r.Y(te,t.limit).next((ee=>{ee.forEach((_e=>{const le=ye.fromSegments(_e.documentKey);c.has(le)||(c=c.add(le),f.push(le))}))}))))})).next((()=>f))}return H.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=IV(Et.create(e.filters,"and")).map((r=>Ey(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,s,l,c,f){const m=(t!=null?t.length:1)*Math.max(r.length,l.length),g=m/(t!=null?t.length:1),_=[];for(let E=0;E<m;++E){const w=t?this.Ln(t[E/g]):jf,I=this.kn(e,w,r[E%g],s),P=this.qn(e,w,l[E%g],c),F=f.map((L=>this.kn(e,w,L,!0)));_.push(...this.createRange(I,P,F))}return _}kn(e,t,r,s){const l=new eo(e,ye.empty(),t,r);return s?l:l.An()}qn(e,t,r,s){const l=new eo(e,ye.empty(),t,r);return s?l.An():l}xn(e,t){const r=new ob(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((l=>{let c=null;for(const f of l)r.yn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c}))}getIndexType(e,t){let r=2;const s=this.Mn(t);return H.forEach(s,(l=>this.xn(e,l).next((c=>{c?r!==0&&c.fields.length<(function(m){let g=new Tt(Lt.comparator),_=!1;for(const E of m.filters)for(const w of E.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?_=!0:g=g.add(w.field));for(const E of m.orderBy)E.field.isKeyField()||(g=g.add(E.field));return g.size+(_?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&s.length>1&&r===2?1:r))}Qn(e,t){const r=new ic;for(const s of Qs(e)){const l=t.data.field(s.fieldPath);if(l==null)return null;const c=r.Pn(s.kind);Js.Kt.Dt(l,c)}return r.un()}Ln(e){const t=new ic;return Js.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new ic;return Js.Kt.Dt(qc(this.databaseId,t),r.Pn((function(l){const c=Qs(l);return c.length===0?0:c[c.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let s=[];s.push(new ic);let l=0;for(const c of Qs(e)){const f=r[l++];for(const m of s)if(this.Un(t,c.fieldPath)&&Hc(f))s=this.Kn(s,c,f);else{const g=m.Pn(c.kind);Js.Kt.Dt(f,g)}}return this.Wn(s)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const s=[...e],l=[];for(const c of r.arrayValue.values||[])for(const f of s){const m=new ic;m.seed(f.un()),Js.Kt.Dt(c,m.Pn(t.kind)),l.push(m)}return l}Un(e,t){return!!e.filters.find((r=>r instanceof tt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=ac(e),s=dl(e);return(t?r.J(dy,IDBKeyRange.bound(t,t)):r.J()).next((l=>{const c=[];return H.forEach(l,(f=>s.get([f.indexId,this.uid]).next((m=>{c.push((function(_,E){const w=E?new kc(E.sequenceNumber,new ur(go(E.readTime),new ye(hi(E.documentKey)),E.largestBatchId)):kc.empty(),I=_.fields.map((([P,F])=>new td(Lt.fromServerFormat(P),F)));return new Id(_.indexId,_.collectionGroup,I,w)})(f,m))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,s)=>{const l=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return l!==0?l:Fe(r.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const s=ac(e),l=dl(e);return this.Gn(e).next((c=>s.J(dy,IDBKeyRange.bound(t,t)).next((f=>H.forEach(f,(m=>l.put(tb(m.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return H.forEach(t,((s,l)=>{const c=r.get(s.collectionGroup);return(c?H.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next((f=>(r.set(s.collectionGroup,f),H.forEach(f,(m=>this.zn(e,s,m).next((g=>{const _=this.jn(l,m);return g.isEqual(_)?H.resolve():this.Jn(e,l,m,g,_)})))))))}))}Hn(e,t,r,s){return fl(e).put(s.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,s){return fl(e).delete(s.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const s=fl(e);let l=new Tt(La);return s.ee({index:QA,range:IDBKeyRange.only([r.indexId,this.uid,ud(this.$n(r,t))])},((c,f)=>{l=l.add(new eo(r.indexId,t,sb(f.arrayValue),sb(f.directionalValue)))})).next((()=>l))}jn(e,t){let r=new Tt(La);const s=this.Qn(t,e);if(s==null)return r;const l=hy(t);if(l!=null){const c=e.data.field(l.fieldPath);if(Hc(c))for(const f of c.arrayValue.values||[])r=r.add(new eo(t.indexId,e.key,this.Ln(f),s))}else r=r.add(new eo(t.indexId,e.key,jf,s));return r}Jn(e,t,r,s,l){he(ub,"Updating index entries for document '%s'",t.key);const c=[];return(function(m,g,_,E,w){const I=m.getIterator(),P=g.getIterator();let F=cl(I),L=cl(P);for(;F||L;){let ne=!1,te=!1;if(F&&L){const ee=_(F,L);ee<0?te=!0:ee>0&&(ne=!0)}else F!=null?te=!0:ne=!0;ne?(E(L),L=cl(P)):te?(w(F),F=cl(I)):(F=cl(I),L=cl(P))}})(s,l,La,(f=>{c.push(this.Hn(e,t,r,f))}),(f=>{c.push(this.Yn(e,t,r,f))})),H.waitFor(c)}Gn(e){let t=1;return dl(e).ee({index:KA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,l)=>{l.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,f)=>La(c,f))).filter(((c,f,m)=>!f||La(c,m[f-1])!==0));const s=[];s.push(e);for(const c of r){const f=La(c,e),m=La(c,t);if(f===0)s[0]=e.An();else if(f>0&&m<0)s.push(c),s.push(c.An());else if(m>0)break}s.push(t);const l=[];for(let c=0;c<s.length;c+=2){if(this.Zn(s[c],s[c+1]))return[];const f=s[c].Vn(this.uid,jf,ye.empty()),m=s[c+1].Vn(this.uid,jf,ye.empty());l.push(IDBKeyRange.bound(f,m))}return l}Zn(e,t){return La(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(hb)}getMinOffset(e,t){return H.mapArray(this.Mn(t),(r=>this.xn(e,r).next((s=>s||Te(44426))))).next(hb)}}function cb(n){return an(n,Bc)}function fl(n){return an(n,bc)}function ac(n){return an(n,c_)}function dl(n){return an(n,wc)}function hb(n){Re(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;o_(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new ur(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WI=41943040;class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(n,e,t){const r=n.store(Fr),s=n.store(Pl),l=[],c=IDBKeyRange.only(t.batchId);let f=0;const m=r.ee({range:c},((_,E,w)=>(f++,w.delete())));l.push(m.next((()=>{Re(f===1,47070,{batchId:t.batchId})})));const g=[];for(const _ of t.mutations){const E=HA(e,_.key.path,t.batchId);l.push(s.delete(E)),g.push(_.key)}return H.waitFor(l).next((()=>g))}function kd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Te(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(WI,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);class cm{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,t,r,s){Re(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new cm(l,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ua(e).ee({index:no,range:r},((s,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,s){const l=Tl(e),c=Ua(e);return c.add({}).next((f=>{Re(typeof f=="number",49019);const m=new v_(f,t,r,s),g=(function(I,P,F){const L=F.baseMutations.map((te=>Qc(I.yt,te))),ne=F.mutations.map((te=>Qc(I.yt,te)));return{userId:P,batchId:F.batchId,localWriteTimeMs:F.localWriteTime.toMillis(),baseMutations:L,mutations:ne}})(this.serializer,this.userId,m),_=[];let E=new Tt(((w,I)=>Fe(w.canonicalString(),I.canonicalString())));for(const w of s){const I=HA(this.userId,w.key.path,f);E=E.add(w.key.path.popLast()),_.push(c.put(g)),_.push(l.put(I,rO))}return E.forEach((w=>{_.push(this.indexManager.addToCollectionParentIndex(e,w))})),e.addOnCommittedListener((()=>{this.Xn[f]=m.keys()})),H.waitFor(_).next((()=>m))}))}lookupMutationBatch(e,t){return Ua(e).get(t).next((r=>r?(Re(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Zs(this.serializer,r)):null))}er(e,t){return this.Xn[t]?H.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const s=r.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Ua(e).ee({index:no,range:s},((c,f,m)=>{f.userId===this.userId&&(Re(f.batchId>=r,47524,{tr:r}),l=Zs(this.serializer,f)),m.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ro;return Ua(e).ee({index:no,range:t,reverse:!0},((s,l,c)=>{r=l.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ro],[this.userId,Number.POSITIVE_INFINITY]);return Ua(e).J(no,t).next((r=>r.map((s=>Zs(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=nd(this.userId,t.path),s=IDBKeyRange.lowerBound(r),l=[];return Tl(e).ee({range:s},((c,f,m)=>{const[g,_,E]=c,w=hi(_);if(g===this.userId&&t.path.isEqual(w))return Ua(e).get(E).next((I=>{if(!I)throw Te(61480,{nr:c,batchId:E});Re(I.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:I.userId,batchId:E}),l.push(Zs(this.serializer,I))}));m.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tt(Fe);const s=[];return t.forEach((l=>{const c=nd(this.userId,l.path),f=IDBKeyRange.lowerBound(c),m=Tl(e).ee({range:f},((g,_,E)=>{const[w,I,P]=g,F=hi(I);w===this.userId&&l.path.isEqual(F)?r=r.add(P):E.done()}));s.push(m)})),H.waitFor(s).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,l=nd(this.userId,r),c=IDBKeyRange.lowerBound(l);let f=new Tt(Fe);return Tl(e).ee({range:c},((m,g,_)=>{const[E,w,I]=m,P=hi(w);E===this.userId&&r.isPrefixOf(P)?P.length===s&&(f=f.add(I)):_.done()})).next((()=>this.rr(e,f)))}rr(e,t){const r=[],s=[];return t.forEach((l=>{s.push(Ua(e).get(l).next((c=>{if(c===null)throw Te(35274,{batchId:l});Re(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),r.push(Zs(this.serializer,c))})))})),H.waitFor(s).next((()=>r))}removeMutationBatch(e,t){return ZI(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),H.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return H.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),s=[];return Tl(e).ee({range:r},((l,c,f)=>{if(l[0]===this.userId){const m=hi(l[1]);s.push(m)}else f.done()})).next((()=>{Re(s.length===0,56720,{sr:s.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return JI(e,this.userId,t)}_r(e){return eR(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ro,lastStreamToken:""}))}}function JI(n,e,t){const r=nd(e,t.path),s=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return Tl(n).ee({range:l,X:!0},((f,m,g)=>{const[_,E,w]=f;_===e&&E===s&&(c=!0),g.done()})).next((()=>c))}function Ua(n){return an(n,Fr)}function Tl(n){return an(n,Pl)}function eR(n){return an(n,Uc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new po(0)}static cr(){return new po(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new po(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>xe.fromTimestamp(new vt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>ml(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(Re(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let s=0;const l=[];return ml(e).ee(((c,f)=>{const m=pc(f);m.sequenceNumber<=t&&r.get(m.targetId)===null&&(s++,l.push(this.removeTargetData(e,m)))})).next((()=>H.waitFor(l))).next((()=>s))}forEachTarget(e,t){return ml(e).ee(((r,s)=>{const l=pc(s);t(l)}))}lr(e){return db(e).get(Cd).next((t=>(Re(t!==null,2888),t)))}hr(e,t){return db(e).put(Cd,t)}Pr(e,t){return ml(e).put(KI(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=fo(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return ml(e).ee({range:s,index:YA},((c,f,m)=>{const g=pc(f);hh(t,g.target)&&(l=g,m.done())})).next((()=>l))}addMatchingKeys(e,t,r){const s=[],l=Qa(e);return t.forEach((c=>{const f=Nn(c.path);s.push(l.put({targetId:r,path:f})),s.push(this.referenceDelegate.addReference(e,r,c))})),H.waitFor(s)}removeMatchingKeys(e,t,r){const s=Qa(e);return H.forEach(t,(l=>{const c=Nn(l.path);return H.waitFor([s.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=Qa(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Qa(e);let l=$e();return s.ee({range:r,X:!0},((c,f,m)=>{const g=hi(c[1]),_=new ye(g);l=l.add(_)})).next((()=>l))}containsKey(e,t){const r=Nn(t.path),s=IDBKeyRange.bound([r],[LA(r)],!1,!0);let l=0;return Qa(e).ee({index:u_,X:!0,range:s},(([c,f],m,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return ml(e).get(t).next((r=>r?pc(r):null))}}function ml(n){return an(n,Ol)}function db(n){return an(n,io)}function Qa(n){return an(n,Vl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="LruGarbageCollector",xV=1048576;function gb([n,e],[t,r]){const s=Fe(n,t);return s===0?Fe(e,r):s}class NV{constructor(e){this.Ir=e,this.buffer=new Tt(gb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();gb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class tR{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(mb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ms(t)?he(mb,"Ignoring IndexedDB error during garbage collection: ",t):await To(t)}await this.Vr(3e5)}))}}class MV{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return H.resolve(Cr.ce);const r=new NV(t);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(fb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,s,l,c,f,m,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,c=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(r=E,f=Date.now(),this.removeTargets(e,r,t)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(g=Date.now(),yl()<=et.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${s} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(g-m)+`ms
Total Duration: ${g-_}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E}))))}}function nR(n,e){return new MV(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e,t){this.db=e,this.garbageCollector=nR(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,s)=>t(s)))}addReference(e,t,r){return qf(e,r)}removeReference(e,t,r){return qf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return qf(e,t)}br(e,t){return(function(s,l){let c=!1;return eR(s).te((f=>JI(s,f,l).next((m=>(m&&(c=!0),H.resolve(!m)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let l=0;return this.Sr(e,((c,f)=>{if(f<=t){const m=this.br(e,c).next((g=>{if(!g)return l++,r.getEntry(e,c).next((()=>(r.removeEntry(c,xe.min()),Qa(e).delete((function(E){return[0,Nn(E.path)]})(c)))))}));s.push(m)}})).next((()=>H.waitFor(s))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return qf(e,t)}Sr(e,t){const r=Qa(e);let s,l=Cr.ce;return r.ee({index:u_},(([c,f],{path:m,sequenceNumber:g})=>{c===0?(l!==Cr.ce&&t(new ye(hi(s)),l),l=g,s=m):l=Cr.ce})).next((()=>{l!==Cr.ce&&t(new ye(hi(s)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qf(n,e){return Qa(n).put((function(r,s){return{targetId:0,path:Nn(r.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.changes=new na((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ot.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?H.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ys(e).put(r)}removeEntry(e,t,r){return Ys(e).delete((function(l,c){const f=l.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Od(c),f[f.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=Ot.newInvalidDocument(t);return Ys(e).ee({index:rd,range:IDBKeyRange.only(sc(t))},((s,l)=>{r=this.Cr(t,l)})).next((()=>r))}vr(e,t){let r={size:0,document:Ot.newInvalidDocument(t)};return Ys(e).ee({index:rd,range:IDBKeyRange.only(sc(t))},((s,l)=>{r={document:this.Cr(t,l),size:kd(l)}})).next((()=>r))}getEntries(e,t){let r=lr();return this.Fr(e,t,((s,l)=>{const c=this.Cr(s,l);r=r.insert(s,c)})).next((()=>r))}Mr(e,t){let r=lr(),s=new Vt(ye.comparator);return this.Fr(e,t,((l,c)=>{const f=this.Cr(l,c);r=r.insert(l,f),s=s.insert(l,kd(c))})).next((()=>({documents:r,Or:s})))}Fr(e,t,r){if(t.isEmpty())return H.resolve();let s=new Tt(_b);t.forEach((m=>s=s.add(m)));const l=IDBKeyRange.bound(sc(s.first()),sc(s.last())),c=s.getIterator();let f=c.getNext();return Ys(e).ee({index:rd,range:l},((m,g,_)=>{const E=ye.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;f&&_b(f,E)<0;)r(f,null),f=c.getNext();f&&f.isEqual(E)&&(r(f,g),f=c.hasNext()?c.getNext():null),f?_.j(sc(f)):_.done()})).next((()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,s,l){const c=t.path,f=[c.popLast().toArray(),c.lastSegment(),Od(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ys(e).J(IDBKeyRange.bound(f,m,!0)).next((g=>{l?.incrementDocumentReadCount(g.length);let _=lr();for(const E of g){const w=this.Cr(ye.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);w.isFoundDocument()&&(fh(t,w)||s.has(w.key))&&(_=_.insert(w.key,w))}return _}))}getAllFromCollectionGroup(e,t,r,s){let l=lr();const c=yb(t,r),f=yb(t,ur.max());return Ys(e).ee({index:GA,range:IDBKeyRange.bound(c,f,!0)},((m,g,_)=>{const E=this.Cr(ye.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(E.key,E),l.size===s&&_.done()})).next((()=>l))}newChangeBuffer(e){return new VV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return pb(e).get(fy).next((t=>(Re(!!t,20021),t)))}Dr(e,t){return pb(e).put(fy,t)}Cr(e,t){if(t){const r=vV(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(xe.min())))return r}return Ot.newInvalidDocument(e)}}function iR(n){return new OV(n)}class VV extends rR{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new na((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const t=[];let r=0,s=new Tt(((l,c)=>Fe(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const f=this.Br.get(l);if(t.push(this.Nr.removeEntry(e,l,f.readTime)),c.isValidDocument()){const m=Jw(this.Nr.serializer,c);s=s.add(l.path.popLast());const g=kd(m);r+=g-f.size,t.push(this.Nr.addEntry(e,l,m))}else if(r-=f.size,this.trackRemovals){const m=Jw(this.Nr.serializer,c.convertToNoDocument(xe.min()));t.push(this.Nr.addEntry(e,l,m))}})),s.forEach((l=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Nr.updateMetadata(e,r)),H.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:s})=>(s.forEach(((l,c)=>{this.Br.set(l,{size:c,readTime:r.get(l).readTime})})),r)))}}function pb(n){return an(n,zc)}function Ys(n){return an(n,Dd)}function sc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yb(n,e){const t=e.documentKey.path.toArray();return[n,Od(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function _b(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(s=Fe(t[l],r[l]),s)return s;return s=Fe(t.length,r.length),s||(s=Fe(t[t.length-2],r[r.length-2]),s||Fe(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Rc(r.mutation,s,Kn.empty(),vt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,$e()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=$e()){const s=fi();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((l=>{let c=mc();return l.forEach(((f,m)=>{c=c.insert(f,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=fi();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,$e())))}populateOverlays(e,t,r){const s=[];return r.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,r,s){let l=lr();const c=Ic(),f=(function(){return Ic()})();return t.forEach(((m,g)=>{const _=r.get(g.key);s.has(g.key)&&(_===void 0||_.mutation instanceof ra)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),Rc(_.mutation,g,_.mutation.getFieldMask(),vt.now())):c.set(g.key,Kn.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,_)=>c.set(g,_))),t.forEach(((g,_)=>f.set(g,new kV(_,c.get(g)??null)))),f)))}recalculateAndSaveOverlays(e,t){const r=Ic();let s=new Vt(((c,f)=>c-f)),l=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let _=r.get(m)||Kn.empty();_=f.applyToLocalView(g,_),r.set(m,_);const E=(s.get(f.batchId)||$e()).add(m);s=s.insert(f.batchId,E)}))})).next((()=>{const c=[],f=s.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),g=m.key,_=m.value,E=wI();_.forEach((w=>{if(!l.has(w)){const I=CI(t.get(w),r.get(w));I!==null&&E.set(w,I),l=l.add(w)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return H.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(c){return ye.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-l.size):H.resolve(fi());let f=Vc,m=l;return c.next((g=>H.forEach(g,((_,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(_)?H.resolve():this.remoteDocumentCache.getEntry(e,_).next((w=>{m=m.insert(_,w)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,$e()))).next((_=>({batchId:f,changes:TI(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((r=>{let s=mc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const l=t.collectionGroup;let c=mc();return this.indexManager.getCollectionParents(e,l).next((f=>H.forEach(f,(m=>{const g=(function(E,w){return new Xl(w,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,s).next((_=>{_.forEach(((E,w)=>{c=c.insert(E,w)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,s)))).next((c=>{l.forEach(((m,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,Ot.newInvalidDocument(_)))}));let f=mc();return c.forEach(((m,g)=>{const _=l.get(m);_!==void 0&&Rc(_.mutation,g,Kn.empty(),vt.now()),fh(t,g)&&(f=f.insert(m,g))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return H.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:gn(s.createTime)}})(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:QI(s.bundledQuery),readTime:gn(s.readTime)}})(t)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(){this.overlays=new Vt(ye.comparator),this.qr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const r=fi();return H.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&r.set(s,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,l)=>{this.St(e,t,l)})),H.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(r)),H.resolve()}getOverlaysForCollection(e,t,r){const s=fi(),l=t.length+1,c=new ye(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>r&&s.set(m.getKey(),m)}return H.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let l=new Vt(((g,_)=>g-_));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let _=l.get(g.largestBatchId);_===null&&(_=fi(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const f=fi(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,_)=>f.set(g,_))),!(f.size()>=s)););return H.resolve(f)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new T_(t,r));let l=this.qr.get(t);l===void 0&&(l=$e(),this.qr.set(t,l)),this.qr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(){this.Qr=new Tt(fn.$r),this.Ur=new Tt(fn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new fn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new fn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ye(new lt([])),r=new fn(t,e),s=new fn(t,e+1),l=[];return this.Ur.forEachInRange([r,s],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ye(new lt([])),r=new fn(t,e),s=new fn(t,e+1);let l=$e();return this.Ur.forEachInRange([r,s],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new fn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class fn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ye.comparator(e.key,t.key)||Fe(e.Yr,t.Yr)}static Kr(e,t){return Fe(e.Yr,t.Yr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Tt(fn.$r)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new v_(l,t,r,s);this.mutationQueue.push(c);for(const f of s)this.Zr=this.Zr.add(new fn(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return H.resolve(c)}lookupMutationBatch(e,t){return H.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ei(r),l=s<0?0:s;return H.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?ro:this.tr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new fn(t,0),s=new fn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([r,s],(c=>{const f=this.Xr(c.Yr);l.push(f)})),H.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tt(Fe);return t.forEach((s=>{const l=new fn(s,0),c=new fn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(f=>{r=r.add(f.Yr)}))})),H.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let l=r;ye.isDocumentKey(l)||(l=l.child(""));const c=new fn(new ye(l),0);let f=new Tt(Fe);return this.Zr.forEachWhile((m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===s&&(f=f.add(m.Yr)),!0)}),c),H.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Re(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return H.forEach(t.mutations,(s=>{const l=new fn(s.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new fn(t,0),s=this.Zr.firstAfterOrEqual(r);return H.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e){this.ri=e,this.docs=(function(){return new Vt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),l=s?s.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return H.resolve(r?r.document.mutableCopy():Ot.newInvalidDocument(t))}getEntries(e,t){let r=lr();return t.forEach((s=>{const l=this.docs.get(s);r=r.insert(s,l?l.document.mutableCopy():Ot.newInvalidDocument(s))})),H.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let l=lr();const c=t.path,f=new ye(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:g,value:{document:_}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||o_(BA(_),r)<=0||(s.has(_.key)||fh(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return H.resolve(l)}getAllFromCollectionGroup(e,t,r,s){Te(9500)}ii(e,t){return H.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new jV(this)}getSize(e){return H.resolve(this.size)}}class jV extends rR{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),H.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e){this.persistence=e,this.si=new na((t=>fo(t)),hh),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.oi=0,this._i=new I_,this.targetCount=0,this.ai=po.ur()}forEachTarget(e,t){return this.si.forEach(((r,s)=>t(s))),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),H.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new po(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Pr(t),H.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,r){let s=0;const l=[];return this.si.forEach(((c,f)=>{f.sequenceNumber<=t&&r.get(f.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),s++)})),H.waitFor(l).next((()=>s))}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return H.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),H.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((c=>{l.push(s.markPotentiallyOrphaned(e,c))})),H.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),H.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return H.resolve(r)}containsKey(e,t){return H.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,t){this.ui={},this.overlays={},this.ci=new Cr(0),this.li=!1,this.li=!0,this.hi=new zV,this.referenceDelegate=e(this),this.Pi=new qV(this),this.indexManager=new RV,this.remoteDocumentCache=(function(s){return new FV(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new YI(t),this.Ii=new LV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new UV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new BV(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){he("MemoryPersistence","Starting transaction:",e);const s=new HV(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((l=>this.referenceDelegate.di(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ai(e,t){return H.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class HV extends jA{constructor(e){super(),this.currentSequenceNumber=e}}class hm{constructor(e){this.persistence=e,this.Ri=new I_,this.Vi=null}static mi(e){return new hm(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),H.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),H.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.fi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,(r=>{const s=ye.fromPath(r);return this.gi(e,s).next((l=>{l||t.removeEntry(s,xe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return H.or([()=>H.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ld{constructor(e,t){this.persistence=e,this.pi=new na((r=>Nn(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=nR(this,t)}static mi(e,t){return new Ld(e,t)}Ei(){}di(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return H.forEach(this.pi,((r,s)=>this.br(e,r,s).next((l=>l?H.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ii(e,(c=>this.br(e,c,t).next((f=>{f||(r++,l.removeEntry(c,xe.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),H.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ad(e.data.value)),t}br(e,t,r){return H.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return H.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e){this.serializer=e}k(e,t,r,s){const l=new Wd("createOrUpgrade",t);r<1&&s>=1&&((function(m){m.createObjectStore(ch)})(e),(function(m){m.createObjectStore(Uc,{keyPath:nO}),m.createObjectStore(Fr,{keyPath:Cw,autoIncrement:!0}).createIndex(no,xw,{unique:!0}),m.createObjectStore(Pl)})(e),vb(e),(function(m){m.createObjectStore($s)})(e));let c=H.resolve();return r<3&&s>=3&&(r!==0&&((function(m){m.deleteObjectStore(Vl),m.deleteObjectStore(Ol),m.deleteObjectStore(io)})(e),vb(e)),c=c.next((()=>(function(m){const g=m.store(io),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xe.min().toTimestamp(),targetCount:0};return g.put(Cd,_)})(l)))),r<4&&s>=4&&(r!==0&&(c=c.next((()=>(function(m,g){return g.store(Fr).J().next((E=>{m.deleteObjectStore(Fr),m.createObjectStore(Fr,{keyPath:Cw,autoIncrement:!0}).createIndex(no,xw,{unique:!0});const w=g.store(Fr),I=E.map((P=>w.put(P)));return H.waitFor(I)}))})(e,l)))),c=c.next((()=>{(function(m){m.createObjectStore(kl,{keyPath:hO})})(e)}))),r<5&&s>=5&&(c=c.next((()=>this.yi(l)))),r<6&&s>=6&&(c=c.next((()=>((function(m){m.createObjectStore(zc)})(e),this.wi(l))))),r<7&&s>=7&&(c=c.next((()=>this.Si(l)))),r<8&&s>=8&&(c=c.next((()=>this.bi(e,l)))),r<9&&s>=9&&(c=c.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(c=c.next((()=>this.Di(l)))),r<11&&s>=11&&(c=c.next((()=>{(function(m){m.createObjectStore(Zd,{keyPath:fO})})(e),(function(m){m.createObjectStore(Jd,{keyPath:dO})})(e)}))),r<12&&s>=12&&(c=c.next((()=>{(function(m){const g=m.createObjectStore(em,{keyPath:EO});g.createIndex(my,TO,{unique:!1}),g.createIndex($A,wO,{unique:!1})})(e)}))),r<13&&s>=13&&(c=c.next((()=>(function(m){const g=m.createObjectStore(Dd,{keyPath:iO});g.createIndex(rd,aO),g.createIndex(GA,sO)})(e))).next((()=>this.Ci(e,l))).next((()=>e.deleteObjectStore($s)))),r<14&&s>=14&&(c=c.next((()=>this.Fi(e,l)))),r<15&&s>=15&&(c=c.next((()=>(function(m){m.createObjectStore(c_,{keyPath:mO,autoIncrement:!0}).createIndex(dy,gO,{unique:!1}),m.createObjectStore(wc,{keyPath:pO}).createIndex(KA,yO,{unique:!1}),m.createObjectStore(bc,{keyPath:_O}).createIndex(QA,vO,{unique:!1})})(e)))),r<16&&s>=16&&(c=c.next((()=>{t.objectStore(wc).clear()})).next((()=>{t.objectStore(bc).clear()}))),r<17&&s>=17&&(c=c.next((()=>{(function(m){m.createObjectStore(h_,{keyPath:bO})})(e)}))),r<18&&s>=18&&FS()&&(c=c.next((()=>{t.objectStore(wc).clear()})).next((()=>{t.objectStore(bc).clear()}))),c}wi(e){let t=0;return e.store($s).ee(((r,s)=>{t+=kd(s)})).next((()=>{const r={byteSize:t};return e.store(zc).put(fy,r)}))}yi(e){const t=e.store(Uc),r=e.store(Fr);return t.J().next((s=>H.forEach(s,(l=>{const c=IDBKeyRange.bound([l.userId,ro],[l.userId,l.lastAcknowledgedBatchId]);return r.J(no,c).next((f=>H.forEach(f,(m=>{Re(m.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const g=Zs(this.serializer,m);return ZI(e,l.userId,g).next((()=>{}))}))))}))))}Si(e){const t=e.store(Vl),r=e.store($s);return e.store(io).get(Cd).next((s=>{const l=[];return r.ee(((c,f)=>{const m=new lt(c),g=(function(E){return[0,Nn(E)]})(m);l.push(t.get(g).next((_=>_?H.resolve():(E=>t.put({targetId:0,path:Nn(E),sequenceNumber:s.highestListenSequenceNumber}))(m))))})).next((()=>H.waitFor(l)))}))}bi(e,t){e.createObjectStore(Bc,{keyPath:cO});const r=t.store(Bc),s=new A_,l=c=>{if(s.add(c)){const f=c.lastSegment(),m=c.popLast();return r.put({collectionId:f,parent:Nn(m)})}};return t.store($s).ee({X:!0},((c,f)=>{const m=new lt(c);return l(m.popLast())})).next((()=>t.store(Pl).ee({X:!0},(([c,f,m],g)=>{const _=hi(f);return l(_.popLast())}))))}Di(e){const t=e.store(Ol);return t.ee(((r,s)=>{const l=pc(s),c=KI(this.serializer,l);return t.put(c)}))}Ci(e,t){const r=t.store($s),s=[];return r.ee(((l,c)=>{const f=t.store(Dd),m=(function(E){return E.document?new ye(lt.fromString(E.document.name).popFirst(5)):E.noDocument?ye.fromSegments(E.noDocument.path):E.unknownDocument?ye.fromSegments(E.unknownDocument.path):Te(36783)})(c).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(f.put(g))})).next((()=>H.waitFor(s)))}Fi(e,t){const r=t.store(Fr),s=iR(this.serializer),l=new R_(hm.mi,this.serializer.yt);return r.J().next((c=>{const f=new Map;return c.forEach((m=>{let g=f.get(m.userId)??$e();Zs(this.serializer,m).keys().forEach((_=>g=g.add(_))),f.set(m.userId,g)})),H.forEach(f,((m,g)=>{const _=new wn(g),E=um.wt(this.serializer,_),w=l.getIndexManager(_),I=cm.wt(_,this.serializer,w,l.referenceDelegate);return new aR(s,I,E,w).recalculateAndSaveOverlaysForDocumentKeys(new gy(t,Cr.ce),m).next()}))}))}}function vb(n){n.createObjectStore(Vl,{keyPath:lO}).createIndex(u_,uO,{unique:!0}),n.createObjectStore(Ol,{keyPath:"targetId"}).createIndex(YA,oO,{unique:!0}),n.createObjectStore(io)}const za="IndexedDbPersistence",zp=18e5,Bp=5e3,Fp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",YV="main";class D_{constructor(e,t,r,s,l,c,f,m,g,_,E=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=l,this.window=c,this.document=f,this.xi=g,this.Oi=_,this.Ni=E,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=w=>Promise.resolve(),!D_.v())throw new de(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new PV(this,s),this.$i=t+YV,this.serializer=new YI(m),this.Ui=new ns(this.$i,this.Ni,new GV(this.serializer)),this.hi=new TV,this.Pi=new CV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=iR(this.serializer),this.Ii=new EV,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,_===!1&&Bn(za,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new de(J.FAILED_PRECONDITION,Fp);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Cr(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Hf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(ms(e))return he(za,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return he(za,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return oc(e).get(ul).next((t=>H.resolve(this.es(t))))}ts(e){return Hf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,zp)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=an(t,kl);return r.J().next((s=>{const l=this.ss(s,zp),c=s.filter((f=>l.indexOf(f)===-1));return H.forEach(c,(f=>r.delete(f.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?H.resolve(!0):oc(e).get(ul).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Bp)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new de(J.FAILED_PRECONDITION,Fp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Hf(e).J().next((r=>this.ss(r,Bp).find((s=>{if(this.clientId!==s.clientId){const l=!this.networkEnabled&&s.networkEnabled,c=!this.inForeground&&s.inForeground,f=this.networkEnabled===s.networkEnabled;if(l||c&&f)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&he(za,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[ch,kl],(e=>{const t=new gy(e,Cr.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Hf(e).J().next((t=>this.ss(t,zp).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return cm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new DV(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return um.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){he(za,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",l=(function(m){return m===18?IO:m===17?JA:m===16?AO:m===15?f_:m===14?ZA:m===13?WA:m===12?SO:m===11?XA:void Te(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,s,l,(f=>(c=new gy(f,this.ci?this.ci.next():Cr.ce),t==="readwrite-primary"?this.Hi(c).next((m=>!!m||this.Yi(c))).next((m=>{if(!m)throw Bn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new de(J.FAILED_PRECONDITION,FA);return r(c)})).next((m=>this.Xi(c).next((()=>m)))):this.Is(c).next((()=>r(c)))))).then((f=>(c.raiseOnCommittedEvent(),f)))}Is(e){return oc(e).get(ul).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Bp)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new de(J.FAILED_PRECONDITION,Fp)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return oc(e).put(ul,t)}static v(){return ns.v()}Zi(e){const t=oc(e);return t.get(ul).next((r=>this.es(r)?(he(za,"Releasing primary lease."),t.delete(ul)):H.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Bn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;BS()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return he(za,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Bn(za,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Bn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function oc(n){return an(n,ch)}function Hf(n){return an(n,kl)}function KV(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=s}static As(e,t){let r=$e(),s=$e();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new C_(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return BS()?8:qA(nn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,s,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new QV;return this.Ss(e,t,c).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,c,f.size)}))})).next((()=>l.result))}bs(e,t,r,s){return r.documentReadCount<this.fs?(yl()<=et.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",_l(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),H.resolve()):(yl()<=et.DEBUG&&he("QueryEngine","Query:",_l(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(yl()<=et.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",_l(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nr(t))):H.resolve())}ys(e,t){if(qw(t))return H.resolve(null);let r=Nr(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Pd(t,null,"F"),r=Nr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=$e(...l);return this.ps.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,r).next((m=>{const g=this.Ds(t,f);return this.Cs(t,g,c,m.readTime)?this.ys(e,Pd(t,null,"F")):this.vs(e,g,t,m)}))))})))))}ws(e,t,r,s){return qw(t)||s.isEqual(xe.min())?H.resolve(null):this.ps.getDocuments(e,r).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,r,s)?H.resolve(null):(yl()<=et.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),_l(t)),this.vs(e,c,t,$P(s,Vc)).next((f=>f)))}))}Ds(e,t){let r=new Tt(vI(e));return t.forEach(((s,l)=>{fh(e,l)&&(r=r.add(l))})),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}Ss(e,t,r){return yl()<=et.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",_l(t)),this.ps.getDocumentsMatchingQuery(e,t,ur.min(),r)}vs(e,t,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="LocalStore",$V=3e8;class XV{constructor(e,t,r,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new Vt(Fe),this.xs=new na((l=>fo(l)),hh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function oR(n,e,t,r){return new XV(n,e,t,r)}async function lR(n,e){const t=ze(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((l=>(s=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],f=[];let m=$e();for(const g of s){c.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}for(const g of l){f.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(r,m).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:f})))}))}))}function WV(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,m,g,_){const E=g.batch,w=E.keys();let I=H.resolve();return w.forEach((P=>{I=I.next((()=>_.getEntry(m,P))).next((F=>{const L=g.docVersions.get(P);Re(L!==null,48541),F.version.compareTo(L)<0&&(E.applyToRemoteDocument(F,g),F.isValidDocument()&&(F.setReadTime(g.commitVersion),_.addEntry(F)))}))})),I.next((()=>f.mutationQueue.removeMutationBatch(m,E)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let m=$e();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(m=m.add(f.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function uR(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function ZV(n,e){const t=ze(n),r=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const f=[];e.targetChanges.forEach(((_,E)=>{const w=s.get(E);if(!w)return;f.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,E))));let I=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(Wt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):_.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(_.resumeToken,r)),s=s.insert(E,I),(function(F,L,ne){return F.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=$V?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(w,I,_)&&f.push(t.Pi.updateTargetData(l,I))}));let m=lr(),g=$e();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(JV(l,c,e.documentUpdates).next((_=>{m=_.ks,g=_.qs}))),!r.isEqual(xe.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,r)));f.push(_)}return H.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.Ms=s,l)))}function JV(n,e,t){let r=$e(),s=$e();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let c=lr();return t.forEach(((f,m)=>{const g=l.get(f);m.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(f)),m.isNoDocument()&&m.version.isEqual(xe.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):he(x_,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",m.version)})),{ks:c,qs:s}}))}function ek(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ro),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function tk(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Pi.getTargetData(r,e).next((l=>l?(s=l,H.resolve(s)):t.Pi.allocateTargetId(r).next((c=>(s=new Ki(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Cy(n,e,t){const r=ze(n),s=r.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!ms(c))throw c;he(x_,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Eb(n,e,t){const r=ze(n);let s=xe.min(),l=$e();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,_){const E=ze(m),w=E.xs.get(_);return w!==void 0?H.resolve(E.Ms.get(w)):E.Pi.getTargetData(g,_)})(r,c,Nr(e)).next((f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,f.targetId).next((m=>{l=m}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?s:xe.min(),t?l:$e()))).next((f=>(nk(r,FO(e),f),{documents:f,Qs:l})))))}function nk(n,e,t){let r=n.Os.get(e)||xe.min();t.forEach(((s,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.Os.set(e,r)}class Tb{constructor(){this.activeTargetIds=KO()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cR{constructor(){this.Mo=new Tb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Tb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="ConnectivityMonitor";class bb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(wb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(wb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gf=null;function xy(){return Gf===null?Gf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gf++,"0x"+Gf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="RestConnection",ik={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ak{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===xd?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,t,r,s,l){const c=xy(),f=this.zo(e,t.toUriEncodedString());he(jp,`Sending RPC '${e}' ${c}:`,f,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,s,l);const{host:g}=new URL(f),_=Yl(g);return this.Jo(e,f,m,r,_).then((E=>(he(jp,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw co(jp,`RPC '${e}' ${c} failed with error: `,E,"url: ",f,"request:",r),E}))}Ho(e,t,r,s,l,c){return this.Go(e,t,r,s,l)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$l})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),r&&r.headers.forEach(((s,l)=>e[l]=s))}zo(e,t){const r=ik[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="WebChannelConnection";class ok extends ak{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,l){const c=xy();return new Promise(((f,m)=>{const g=new xA;g.setWithCredentials(!0),g.listenOnce(NA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case ed.NO_ERROR:const E=g.getResponseJson();he(Cn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),f(E);break;case ed.TIMEOUT:he(Cn,`RPC '${e}' ${c} timed out`),m(new de(J.DEADLINE_EXCEEDED,"Request time out"));break;case ed.HTTP_ERROR:const w=g.getStatus();if(he(Cn,`RPC '${e}' ${c} failed with status:`,w,"response text:",g.getResponseText()),w>0){let I=g.getResponseJson();Array.isArray(I)&&(I=I[0]);const P=I?.error;if(P&&P.status&&P.message){const F=(function(ne){const te=ne.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(te)>=0?te:J.UNKNOWN})(P.status);m(new de(F,P.message))}else m(new de(J.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new de(J.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{he(Cn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(s);he(Cn,`RPC '${e}' ${c} sending request:`,s),g.send(t,"POST",_,r,15)}))}T_(e,t,r){const s=xy(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=OA(),f=PA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const _=l.join("");he(Cn,`Creating RPC '${e}' stream ${s}: ${_}`,m);const E=c.createWebChannel(_,m);this.I_(E);let w=!1,I=!1;const P=new sk({Yo:L=>{I?he(Cn,`Not sending because RPC '${e}' stream ${s} is closed:`,L):(w||(he(Cn,`Opening RPC '${e}' stream ${s} transport.`),E.open(),w=!0),he(Cn,`RPC '${e}' stream ${s} sending:`,L),E.send(L))},Zo:()=>E.close()}),F=(L,ne,te)=>{L.listen(ne,(ee=>{try{te(ee)}catch(_e){setTimeout((()=>{throw _e}),0)}}))};return F(E,dc.EventType.OPEN,(()=>{I||(he(Cn,`RPC '${e}' stream ${s} transport opened.`),P.o_())})),F(E,dc.EventType.CLOSE,(()=>{I||(I=!0,he(Cn,`RPC '${e}' stream ${s} transport closed`),P.a_(),this.E_(E))})),F(E,dc.EventType.ERROR,(L=>{I||(I=!0,co(Cn,`RPC '${e}' stream ${s} transport errored. Name:`,L.name,"Message:",L.message),P.a_(new de(J.UNAVAILABLE,"The operation could not be completed")))})),F(E,dc.EventType.MESSAGE,(L=>{if(!I){const ne=L.data[0];Re(!!ne,16349);const te=ne,ee=te?.error||te[0]?.error;if(ee){he(Cn,`RPC '${e}' stream ${s} received error:`,ee);const _e=ee.status;let le=(function(A){const R=Qt[A];if(R!==void 0)return MI(R)})(_e),z=ee.message;le===void 0&&(le=J.INTERNAL,z="Unknown error status: "+_e+" with message "+ee.message),I=!0,P.a_(new de(le,z)),E.close()}else he(Cn,`RPC '${e}' stream ${s} received:`,ne),P.u_(ne)}})),F(f,MA.STAT_EVENT,(L=>{L.stat===uy.PROXY?he(Cn,`RPC '${e}' stream ${s} detected buffering proxy`):L.stat===uy.NOPROXY&&he(Cn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{P.__()}),0),P}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(){return typeof window<"u"?window:null}function cd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(n){return new lV(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e,t,r=1e3,s=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=s,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&he("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb="PersistentStream";class hR{constructor(e,t,r,s,l,c,f,m){this.Mi=e,this.S_=r,this.b_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new N_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(Bn(t.toString()),Bn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new de(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(Sb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(he(Sb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class uk extends hR{constructor(e,t,r,s,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=fV(this.serializer,e),r=(function(l){if(!("targetChange"in l))return xe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?xe.min():c.readTime?gn(c.readTime):xe.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Sy(this.serializer),t.addTarget=(function(l,c){let f;const m=c.target;if(f=Nd(m)?{documents:BI(l,m)}:{query:FI(l,m).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=VI(l,c.resumeToken);const g=wy(l,c.expectedCount);g!==null&&(f.expectedCount=g)}else if(c.snapshotVersion.compareTo(xe.min())>0){f.readTime=Hl(l,c.snapshotVersion.toTimestamp());const g=wy(l,c.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,e);const r=mV(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Sy(this.serializer),t.removeTarget=e,this.q_(t)}}class ck extends hR{constructor(e,t,r,s,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=dV(e.writeResults,e.commitTime),r=gn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Sy(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Qc(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{}class fk extends hk{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,by(t,r),s,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(J.UNKNOWN,l.toString())}))}Ho(e,t,r,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Ho(e,by(t,r),s,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new de(J.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class dk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Bn(t),this.aa=!1):he("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="RemoteStore";class mk{constructor(e,t,r,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{wo(this)&&(he(yo,"Restarting streams for network reachability change."),await(async function(m){const g=ze(m);g.Ea.add(4),await mh(g),g.Ra.set("Unknown"),g.Ea.delete(4),await dm(g)})(this))}))})),this.Ra=new dk(r,s)}}async function dm(n){if(wo(n))for(const e of n.da)await e(!0)}async function mh(n){for(const e of n.da)await e(!1)}function fR(n,e){const t=ze(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),V_(t)?O_(t):Zl(t).O_()&&P_(t,e))}function M_(n,e){const t=ze(n),r=Zl(t);t.Ia.delete(e),r.O_()&&dR(t,e),t.Ia.size===0&&(r.O_()?r.L_():wo(t)&&t.Ra.set("Unknown"))}function P_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Zl(n).Y_(e)}function dR(n,e){n.Va.Ue(e),Zl(n).Z_(e)}function O_(n){n.Va=new iV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Zl(n).start(),n.Ra.ua()}function V_(n){return wo(n)&&!Zl(n).x_()&&n.Ia.size>0}function wo(n){return ze(n).Ea.size===0}function mR(n){n.Va=void 0}async function gk(n){n.Ra.set("Online")}async function pk(n){n.Ia.forEach(((e,t)=>{P_(n,e)}))}async function yk(n,e){mR(n),V_(n)?(n.Ra.ha(e),O_(n)):n.Ra.set("Unknown")}async function _k(n,e,t){if(n.Ra.set("Online"),e instanceof OI&&e.state===2&&e.cause)try{await(async function(s,l){const c=l.cause;for(const f of l.targetIds)s.Ia.has(f)&&(await s.remoteSyncer.rejectListen(f,c),s.Ia.delete(f),s.Va.removeTarget(f))})(n,e)}catch(r){he(yo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ud(n,r)}else if(e instanceof ld?n.Va.Ze(e):e instanceof PI?n.Va.st(e):n.Va.tt(e),!t.isEqual(xe.min()))try{const r=await uR(n.localStore);t.compareTo(r)>=0&&await(function(l,c){const f=l.Va.Tt(c);return f.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.Ia.get(g);_&&l.Ia.set(g,_.withResumeToken(m.resumeToken,c))}})),f.targetMismatches.forEach(((m,g)=>{const _=l.Ia.get(m);if(!_)return;l.Ia.set(m,_.withResumeToken(Wt.EMPTY_BYTE_STRING,_.snapshotVersion)),dR(l,m);const E=new Ki(_.target,m,g,_.sequenceNumber);P_(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(r){he(yo,"Failed to raise snapshot:",r),await Ud(n,r)}}async function Ud(n,e,t){if(!ms(e))throw e;n.Ea.add(1),await mh(n),n.Ra.set("Offline"),t||(t=()=>uR(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{he(yo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await dm(n)}))}function gR(n,e){return e().catch((t=>Ud(n,t,e)))}async function gh(n){const e=ze(n),t=ls(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ro;for(;vk(e);)try{const s=await ek(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,Ek(e,s)}catch(s){await Ud(e,s)}pR(e)&&yR(e)}function vk(n){return wo(n)&&n.Ta.length<10}function Ek(n,e){n.Ta.push(e);const t=ls(n);t.O_()&&t.X_&&t.ea(e.mutations)}function pR(n){return wo(n)&&!ls(n).x_()&&n.Ta.length>0}function yR(n){ls(n).start()}async function Tk(n){ls(n).ra()}async function wk(n){const e=ls(n);for(const t of n.Ta)e.ea(t.mutations)}async function bk(n,e,t){const r=n.Ta.shift(),s=E_.from(r,e,t);await gR(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await gh(n)}async function Sk(n,e){e&&ls(n).X_&&await(async function(r,s){if((function(c){return NI(c)&&c!==J.ABORTED})(s.code)){const l=r.Ta.shift();ls(r).B_(),await gR(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s))),await gh(r)}})(n,e),pR(n)&&yR(n)}async function Ab(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),he(yo,"RemoteStore received new credentials");const r=wo(t);t.Ea.add(3),await mh(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await dm(t)}async function Ak(n,e){const t=ze(n);e?(t.Ea.delete(2),await dm(t)):e||(t.Ea.add(2),await mh(t),t.Ra.set("Unknown"))}function Zl(n){return n.ma||(n.ma=(function(t,r,s){const l=ze(t);return l.sa(),new uk(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Xo:gk.bind(null,n),t_:pk.bind(null,n),r_:yk.bind(null,n),H_:_k.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),V_(n)?O_(n):n.Ra.set("Unknown")):(await n.ma.stop(),mR(n))}))),n.ma}function ls(n){return n.fa||(n.fa=(function(t,r,s){const l=ze(t);return l.sa(),new ck(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Tk.bind(null,n),r_:Sk.bind(null,n),ta:wk.bind(null,n),na:bk.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await gh(n)):(await n.fa.stop(),n.Ta.length>0&&(he(yo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,t,r,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=l,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,l){const c=Date.now()+r,f=new k_(e,t,c,s,l);return f.start(r),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function L_(n,e){if(Bn("AsyncQueue",`${e}: ${n}`),ms(n))return new de(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{static emptySet(e){return new Cl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ye.comparator(t.key,r.key):(t,r)=>ye.comparator(t.key,r.key),this.keyedMap=mc(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Cl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=r.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Cl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(){this.ga=new Vt(ye.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Gl{constructor(e,t,r,s,l,c,f,m,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,s,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new Gl(e,t,Cl.emptySet(t),c,r,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&im(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Rk{constructor(){this.queries=Rb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=ze(t),l=s.queries;s.queries=Rb(),l.forEach(((c,f)=>{for(const m of f.Sa)m.onError(r)}))})(this,new de(J.ABORTED,"Firestore shutting down"))}}function Rb(){return new na((n=>_I(n)),im)}async function _R(n,e){const t=ze(n);let r=3;const s=e.query;let l=t.queries.get(s);l?!l.ba()&&e.Da()&&(r=2):(l=new Ik,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(s,!0);break;case 1:l.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const f=L_(c,`Initialization of query '${_l(e.query)}' failed`);return void e.onError(f)}t.queries.set(s,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&U_(t)}async function vR(n,e){const t=ze(n),r=e.query;let s=3;const l=t.queries.get(r);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?s=e.Da()?0:1:!l.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Dk(n,e){const t=ze(n);let r=!1;for(const s of e){const l=s.query,c=t.queries.get(l);if(c){for(const f of c.Sa)f.Fa(s)&&(r=!0);c.wa=s}}r&&U_(t)}function Ck(n,e,t){const r=ze(n),s=r.queries.get(e);if(s)for(const l of s.Sa)l.onError(t);r.queries.delete(e)}function U_(n){n.Ca.forEach((e=>{e.next()}))}var Ny,Db;(Db=Ny||(Ny={})).Ma="default",Db.Cache="cache";class ER{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Gl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Gl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ny.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.key=e}}class wR{constructor(e){this.key=e}}class xk{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=$e(),this.mutatedKeys=$e(),this.eu=vI(e),this.tu=new Cl(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Ib,s=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=s,f=!1;const m=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,E)=>{const w=s.get(_),I=fh(this.query,E)?E:null,P=!!w&&this.mutatedKeys.has(w.key),F=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let L=!1;w&&I?w.data.isEqual(I.data)?P!==F&&(r.track({type:3,doc:I}),L=!0):this.su(w,I)||(r.track({type:2,doc:I}),L=!0,(m&&this.eu(I,m)>0||g&&this.eu(I,g)<0)&&(f=!0)):!w&&I?(r.track({type:0,doc:I}),L=!0):w&&!I&&(r.track({type:1,doc:w}),L=!0,(m||g)&&(f=!0)),L&&(I?(c=c.add(I),l=F?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),r.track({type:1,doc:_})}return{tu:c,iu:r,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,E)=>(function(I,P){const F=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:L})}};return F(I)-F(P)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(r),s=s??!1;const f=t&&!s?this._u():[],m=this.Xa.size===0&&this.current&&!s?1:0,g=m!==this.Za;return this.Za=m,c.length!==0||g?{snapshot:new Gl(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ib,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=$e(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new wR(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new TR(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=$e();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Gl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const z_="SyncEngine";class Nk{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Mk{constructor(e){this.key=e,this.hu=!1}}class Pk{constructor(e,t,r,s,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new na((f=>_I(f)),im),this.Iu=new Map,this.Eu=new Set,this.du=new Vt(ye.comparator),this.Au=new Map,this.Ru=new I_,this.Vu={},this.mu=new Map,this.fu=po.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Ok(n,e,t=!0){const r=DR(n);let s;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await bR(r,e,t,!0),s}async function Vk(n,e){const t=DR(n);await bR(t,e,!0,!1)}async function bR(n,e,t,r){const s=await tk(n.localStore,Nr(e)),l=s.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return r&&(f=await kk(n,e,l,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&fR(n.remoteStore,s),f}async function kk(n,e,t,r,s){n.pu=(E,w,I)=>(async function(F,L,ne,te){let ee=L.view.ru(ne);ee.Cs&&(ee=await Eb(F.localStore,L.query,!1).then((({documents:x})=>L.view.ru(x,ee))));const _e=te&&te.targetChanges.get(L.targetId),le=te&&te.targetMismatches.get(L.targetId)!=null,z=L.view.applyChanges(ee,F.isPrimaryClient,_e,le);return xb(F,L.targetId,z.au),z.snapshot})(n,E,w,I);const l=await Eb(n.localStore,e,!0),c=new xk(e,l.Qs),f=c.ru(l.documents),m=dh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),g=c.applyChanges(f,n.isPrimaryClient,m);xb(n,t,g.au);const _=new Nk(e,t,c);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function Lk(n,e,t){const r=ze(n),s=r.Tu.get(e),l=r.Iu.get(s.targetId);if(l.length>1)return r.Iu.set(s.targetId,l.filter((c=>!im(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Cy(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&M_(r.remoteStore,s.targetId),My(r,s.targetId)})).catch(To)):(My(r,s.targetId),await Cy(r.localStore,s.targetId,!0))}async function Uk(n,e){const t=ze(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),M_(t.remoteStore,r.targetId))}async function zk(n,e,t){const r=CR(n);try{const s=await(function(c,f){const m=ze(c),g=vt.now(),_=f.reduce(((I,P)=>I.add(P.key)),$e());let E,w;return m.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let P=lr(),F=$e();return m.Ns.getEntries(I,_).next((L=>{P=L,P.forEach(((ne,te)=>{te.isValidDocument()||(F=F.add(ne))}))})).next((()=>m.localDocuments.getOverlayedDocuments(I,P))).next((L=>{E=L;const ne=[];for(const te of f){const ee=eV(te,E.get(te.key).overlayedDocument);ee!=null&&ne.push(new ra(te.key,ee,uI(ee.value.mapValue),dn.exists(!0)))}return m.mutationQueue.addMutationBatch(I,g,ne,f)})).next((L=>{w=L;const ne=L.applyToLocalDocumentSet(E,F);return m.documentOverlayCache.saveOverlays(I,L.batchId,ne)}))})).then((()=>({batchId:w.batchId,changes:TI(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(c,f,m){let g=c.Vu[c.currentUser.toKey()];g||(g=new Vt(Fe)),g=g.insert(f,m),c.Vu[c.currentUser.toKey()]=g})(r,s.batchId,t),await ph(r,s.changes),await gh(r.remoteStore)}catch(s){const l=L_(s,"Failed to persist write");t.reject(l)}}async function SR(n,e){const t=ze(n);try{const r=await ZV(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const c=t.Au.get(l);c&&(Re(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Re(c.hu,14607):s.removedDocuments.size>0&&(Re(c.hu,42227),c.hu=!1))})),await ph(t,r,e)}catch(r){await To(r)}}function Cb(n,e,t){const r=ze(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&s.push(f.snapshot)})),(function(c,f){const m=ze(c);m.onlineState=f;let g=!1;m.queries.forEach(((_,E)=>{for(const w of E.Sa)w.va(f)&&(g=!0)})),g&&U_(m)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Bk(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),l=s&&s.key;if(l){let c=new Vt(ye.comparator);c=c.insert(l,Ot.newNoDocument(l,xe.min()));const f=$e().add(l),m=new lm(xe.min(),new Map,new Vt(Fe),c,f);await SR(r,m),r.du=r.du.remove(l),r.Au.delete(e),B_(r)}else await Cy(r.localStore,e,!1).then((()=>My(r,e,t))).catch(To)}async function Fk(n,e){const t=ze(n),r=e.batch.batchId;try{const s=await WV(t.localStore,e);IR(t,r,null),AR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ph(t,s)}catch(s){await To(s)}}async function jk(n,e,t){const r=ze(n);try{const s=await(function(c,f){const m=ze(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return m.mutationQueue.lookupMutationBatch(g,f).next((E=>(Re(E!==null,37113),_=E.keys(),m.mutationQueue.removeMutationBatch(g,E)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,_,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>m.localDocuments.getDocuments(g,_)))}))})(r.localStore,e);IR(r,e,t),AR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ph(r,s)}catch(s){await To(s)}}function AR(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function IR(n,e,t){const r=ze(n);let s=r.Vu[r.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function My(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||RR(n,r)}))}function RR(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(M_(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),B_(n))}function xb(n,e,t){for(const r of t)r instanceof TR?(n.Ru.addReference(r.key,e),qk(n,r)):r instanceof wR?(he(z_,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||RR(n,r.key)):Te(19791,{wu:r})}function qk(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(he(z_,"New document in limbo: "+t),n.Eu.add(r),B_(n))}function B_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ye(lt.fromString(e)),r=n.fu.next();n.Au.set(r,new Mk(t)),n.du=n.du.insert(t,r),fR(n.remoteStore,new Ki(Nr(rm(t.path)),r,"TargetPurposeLimboResolution",Cr.ce))}}async function ph(n,e,t){const r=ze(n),s=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((f,m)=>{c.push(r.pu(m,e,t).then((g=>{if((g||t)&&r.isPrimaryClient){const _=g?!g.fromCache:t?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,_?"current":"not-current")}if(g){s.push(g);const _=C_.As(m.targetId,g);l.push(_)}})))})),await Promise.all(c),r.Pu.H_(s),await(async function(m,g){const _=ze(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>H.forEach(g,(w=>H.forEach(w.Es,(I=>_.persistence.referenceDelegate.addReference(E,w.targetId,I))).next((()=>H.forEach(w.ds,(I=>_.persistence.referenceDelegate.removeReference(E,w.targetId,I)))))))))}catch(E){if(!ms(E))throw E;he(x_,"Failed to update sequence numbers: "+E)}for(const E of g){const w=E.targetId;if(!E.fromCache){const I=_.Ms.get(w),P=I.snapshotVersion,F=I.withLastLimboFreeSnapshotVersion(P);_.Ms=_.Ms.insert(w,F)}}})(r.localStore,l))}async function Hk(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){he(z_,"User change. New user:",e.toKey());const r=await lR(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((m=>{m.reject(new de(J.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ph(t,r.Ls)}}function Gk(n,e){const t=ze(n),r=t.Au.get(e);if(r&&r.hu)return $e().add(r.key);{let s=$e();const l=t.Iu.get(e);if(!l)return s;for(const c of l){const f=t.Tu.get(c);s=s.unionWith(f.view.nu)}return s}}function DR(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=SR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bk.bind(null,e),e.Pu.H_=Dk.bind(null,e.eventManager),e.Pu.yu=Ck.bind(null,e.eventManager),e}function CR(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jk.bind(null,e),e}class $c{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return oR(this.persistence,new sR,e.initialUser,this.serializer)}Cu(e){return new R_(hm.mi,this.serializer)}Du(e){return new cR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$c.provider={build:()=>new $c};class Yk extends $c{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Re(this.persistence.referenceDelegate instanceof Ld,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new tR(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new R_((r=>Ld.mi(r,t)),this.serializer)}}class Kk extends $c{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await CR(this.xu.syncEngine),await gh(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return oR(this.persistence,new sR,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new tR(r,e.asyncQueue,t)}Mu(e,t){const r=new JP(t,this.persistence);return new ZP(e.asyncQueue,r)}Cu(e){const t=KV(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new D_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,lk(),cd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new cR}}class zd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Cb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hk.bind(null,this.syncEngine),await Ak(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Rk})()}createDatastore(e){const t=fm(e.databaseInfo.databaseId),r=(function(l){return new ok(l)})(e.databaseInfo);return(function(l,c,f,m){return new fk(l,c,f,m)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,l,c,f){return new mk(r,s,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>Cb(this.syncEngine,t,0)),(function(){return bb.v()?new bb:new rk})())}createSyncEngine(e,t){return(function(s,l,c,f,m,g,_){const E=new Pk(s,l,c,f,m,g);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=ze(t);he(yo,"RemoteStore shutting down."),r.Ea.add(5),await mh(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}zd.provider={build:()=>new zd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Bn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new de(J.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(s,l){const c=ze(s),f={documents:l.map((E=>Kc(c.serializer,E)))},m=await c.Ho("BatchGetDocuments",c.serializer.databaseId,lt.emptyPath(),f,l.length),g=new Map;m.forEach((E=>{const w=hV(c.serializer,E);g.set(w.key.toString(),w)}));const _=[];return l.forEach((E=>{const w=g.get(E.toString());Re(!!w,55234,{key:E}),_.push(w)})),_})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new om(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const s=ye.fromPath(r);this.mutations.push(new __(s,this.precondition(s)))})),await(async function(r,s){const l=ze(r),c={writes:s.map((f=>Qc(l.serializer,f)))};await l.Go("Commit",l.serializer.databaseId,lt.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Te(50498,{Gu:e.constructor.name});t=xe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new de(J.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(xe.min())?dn.exists(!1):dn.updateTime(t):dn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(xe.min()))throw new de(J.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dn.updateTime(t)}return dn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,t,r,s,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=l,this.zu=r.maxAttempts,this.M_=new N_(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new Qk(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((s=>{this.Yu(s)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!uh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!NI(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="FirestoreClient";class Xk{constructor(e,t,r,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=wn.UNAUTHENTICATED,this.clientId=s_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{he(us,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(he(us,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=L_(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function qp(n,e){n.asyncQueue.verifyOperationInProgress(),he(us,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await lR(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Nb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Wk(n);he(us,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Ab(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>Ab(e.remoteStore,s))),n._onlineComponents=e}async function Wk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(us,"Using user provided OfflineComponentProvider");try{await qp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===J.FAILED_PRECONDITION||s.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;co("Error using user provided cache. Falling back to memory cache: "+t),await qp(n,new $c)}}else he(us,"Using default OfflineComponentProvider"),await qp(n,new Yk(void 0));return n._offlineComponents}async function F_(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(us,"Using user provided OnlineComponentProvider"),await Nb(n,n._uninitializedComponentsProvider._online)):(he(us,"Using default OnlineComponentProvider"),await Nb(n,new zd))),n._onlineComponents}function Zk(n){return F_(n).then((e=>e.syncEngine))}function Jk(n){return F_(n).then((e=>e.datastore))}async function NR(n){const e=await F_(n),t=e.eventManager;return t.onListen=Ok.bind(null,e.syncEngine),t.onUnlisten=Lk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Vk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Uk.bind(null,e.syncEngine),t}function e4(n,e,t={}){const r=new qr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,m,g){const _=new xR({next:w=>{_.Nu(),c.enqueueAndForget((()=>vR(l,E)));const I=w.docs.has(f);!I&&w.fromCache?g.reject(new de(J.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&w.fromCache&&m&&m.source==="server"?g.reject(new de(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(w)},error:w=>g.reject(w)}),E=new ER(rm(f.path),_,{includeMetadataChanges:!0,qa:!0});return _R(l,E)})(await NR(n),n.asyncQueue,e,t,r))),r.promise}function t4(n,e,t={}){const r=new qr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,m,g){const _=new xR({next:w=>{_.Nu(),c.enqueueAndForget((()=>vR(l,E))),w.fromCache&&m.source==="server"?g.reject(new de(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(w)},error:w=>g.reject(w)}),E=new ER(f,_,{includeMetadataChanges:!0,qa:!0});return _R(l,E)})(await NR(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="firestore.googleapis.com",Pb=!0;class Ob{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=PR,this.ssl=Pb}else this.host=e.host,this.ssl=e.ssl??Pb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=WI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xV)throw new de(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MR(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mm{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ob({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ob(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new UP;switch(r.type){case"firstParty":return new jP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Mb.get(t);r&&(he("ComponentProvider","Removing Datastore"),Mb.delete(t),r.terminate())})(this),Promise.resolve()}}function n4(n,e,t,r={}){n=Zi(n,mm);const s=Yl(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;s&&(LS(`https://${f}`),US("Firestore",!0)),l.host!==PR&&l.host!==f&&co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:f,ssl:s,emulatorOptions:r};if(!ao(m,c)&&(n._setSettings(m),r.mockUserToken)){let g,_;if(typeof r.mockUserToken=="string")g=r.mockUserToken,_=wn.MOCK_USER;else{g=Jx(r.mockUserToken,n._app?.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new de(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new wn(E)}n._authCredentials=new zP(new kA(g,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ps(this.firestore,e,this._query)}}class jt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}toJSON(){return{type:jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(lh(t,jt._jsonSchema))return new jt(e,r||null,new ye(lt.fromString(t.referencePath)))}}jt._jsonSchemaVersion="firestore/documentReference/1.0",jt._jsonSchema={type:$t("string",jt._jsonSchemaVersion),referencePath:$t("string")};class rs extends ps{constructor(e,t,r){super(e,t,rm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new ye(e))}withConverter(e){return new rs(this.firestore,e,this._path)}}function Dc(n,e,...t){if(n=rn(n),UA("collection","path",e),n instanceof mm){const r=lt.fromString(e,...t);return Sw(r),new rs(n,null,r)}{if(!(n instanceof jt||n instanceof rs))throw new de(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(lt.fromString(e,...t));return Sw(r),new rs(n.firestore,null,r)}}function xr(n,e,...t){if(n=rn(n),arguments.length===1&&(e=s_.newId()),UA("doc","path",e),n instanceof mm){const r=lt.fromString(e,...t);return bw(r),new jt(n,null,new ye(r))}{if(!(n instanceof jt||n instanceof rs))throw new de(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(lt.fromString(e,...t));return bw(r),new jt(n.firestore,n instanceof rs?n.converter:null,new ye(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="AsyncQueue";class kb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new N_(this,"async_queue_retry"),this._c=()=>{const r=cd();r&&he(Vb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=cd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=cd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new qr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ms(e))throw e;he(Vb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Bn("INTERNAL UNHANDLED ERROR: ",Lb(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=k_.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&Te(47125,{Pc:Lb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Lb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Jl extends mm{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new kb,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kb(e),this._firestoreClient=void 0,await e}}}function r4(n,e){const t=typeof n=="object"?n:YS(),r=typeof n=="string"?n:xd,s=Xy(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const l=Wx("firestore");l&&n4(s,...l)}return s}function gm(n){if(n._terminated)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||OR(n),n._firestoreClient}function OR(n){const e=n._freezeSettings(),t=(function(s,l,c,f){return new DO(s,l,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,MR(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Xk(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const l=s?._online.build();return{_offline:s?._offline.build(l),_online:l}})(n._componentsProvider))}function i4(n,e){co("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return a4(n,zd.provider,{build:r=>new Kk(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function a4(n,e,t){if((n=Zi(n,Jl))._firestoreClient||n._terminated)throw new de(J.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new de(J.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},OR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this._byteString=e}static fromBase64String(e){try{return new or(Wt.fromBase64String(e))}catch(t){throw new de(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new or(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:or._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(lh(e,or._jsonSchema))return or.fromBase64String(e.bytes)}}or._jsonSchemaVersion="firestore/bytes/1.0",or._jsonSchema={type:$t("string",or._jsonSchemaVersion),bytes:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pi._jsonSchemaVersion}}static fromJSON(e){if(lh(e,pi._jsonSchema))return new pi(e.latitude,e.longitude)}}pi._jsonSchemaVersion="firestore/geoPoint/1.0",pi._jsonSchema={type:$t("string",pi._jsonSchemaVersion),latitude:$t("number"),longitude:$t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(lh(e,yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new yi(e.vectorValues);throw new de(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yi._jsonSchemaVersion="firestore/vectorValue/1.0",yi._jsonSchema={type:$t("string",yi._jsonSchemaVersion),vectorValues:$t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=/^__.*__$/;class o4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ra(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wl(e,this.data,t,this.fieldTransforms)}}class VR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ra(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function kR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:n})}}class j_{constructor(e,t,r,s,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new j_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(kR(this.Ac)&&s4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class l4{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||fm(e)}Cc(e,t,r,s=!1){return new j_({Ac:e,methodName:t,Dc:r,path:Lt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function q_(n){const e=n._freezeSettings(),t=fm(n._databaseId);return new l4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function LR(n,e,t,r,s,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,s);G_("Data must be an object, but it was:",c,r);const f=UR(r,c);let m,g;if(l.merge)m=new Kn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const w=Py(e,E,t);if(!c.contains(w))throw new de(J.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);BR(_,w)||_.push(w)}m=new Kn(_),g=c.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,g=c.fieldTransforms;return new o4(new Sn(f),m,g)}class _m extends ym{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _m}}class H_ extends ym{_toFieldTransform(e){return new DI(e.path,new Fl)}isEqual(e){return e instanceof H_}}function u4(n,e,t,r){const s=n.Cc(1,e,t);G_("Data must be an object, but it was:",s,r);const l=[],c=Sn.empty();gs(r,((m,g)=>{const _=Y_(e,m,t);g=rn(g);const E=s.yc(_);if(g instanceof _m)l.push(_);else{const w=yh(g,E);w!=null&&(l.push(_),c.set(_,w))}}));const f=new Kn(l);return new VR(c,f,s.fieldTransforms)}function c4(n,e,t,r,s,l){const c=n.Cc(1,e,t),f=[Py(e,r,t)],m=[s];if(l.length%2!=0)throw new de(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)f.push(Py(e,l[w])),m.push(l[w+1]);const g=[],_=Sn.empty();for(let w=f.length-1;w>=0;--w)if(!BR(g,f[w])){const I=f[w];let P=m[w];P=rn(P);const F=c.yc(I);if(P instanceof _m)g.push(I);else{const L=yh(P,F);L!=null&&(g.push(I),_.set(I,L))}}const E=new Kn(g);return new VR(_,E,c.fieldTransforms)}function h4(n,e,t,r=!1){return yh(t,n.Cc(r?4:3,e))}function yh(n,e){if(zR(n=rn(n)))return G_("Unsupported field value:",e,n),UR(n,e);if(n instanceof ym)return(function(r,s){if(!kR(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const l=[];let c=0;for(const f of r){let m=yh(f,s.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(r,s){if((r=rn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QO(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=vt.fromDate(r);return{timestampValue:Hl(s.serializer,l)}}if(r instanceof vt){const l=new vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hl(s.serializer,l)}}if(r instanceof pi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof or)return{bytesValue:VI(s.serializer,r._byteString)};if(r instanceof jt){const l=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw s.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:b_(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof yi)return(function(c,f){return{mapValue:{fields:{[m_]:{stringValue:g_},[Ll]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw f.Sc("VectorValues must only contain numeric values.");return y_(f.serializer,g)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${Xd(r)}`)})(n,e)}function UR(n,e){const t={};return eI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gs(n,((r,s)=>{const l=yh(s,e.mc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function zR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof vt||n instanceof pi||n instanceof or||n instanceof jt||n instanceof ym||n instanceof yi)}function G_(n,e,t){if(!zR(t)||!zA(t)){const r=Xd(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Py(n,e,t){if((e=rn(e))instanceof pm)return e._internalPath;if(typeof e=="string")return Y_(n,e);throw Bd("Field path arguments must be of type string or ",n,!1,void 0,t)}const f4=new RegExp("[~\\*/\\[\\]]");function Y_(n,e,t){if(e.search(f4)>=0)throw Bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new pm(...e.split("."))._internalPath}catch{throw Bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Bd(n,e,t,r,s){const l=r&&!r.isEmpty(),c=s!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${s}`),m+=")"),new de(J.INVALID_ARGUMENT,f+n+m)}function BR(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,t,r,s,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new d4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class d4 extends Fd{data(){return super.data()}}function vm(n,e){return typeof e=="string"?Y_(n,e):e instanceof pm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class K_{}class Q_ extends K_{}function hd(n,e,...t){let r=[];e instanceof K_&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((m=>m instanceof $_)).length,f=l.filter((m=>m instanceof Em)).length;if(c>1||c>0&&f>0)throw new de(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Em extends Q_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Em(e,t,r)}_apply(e){const t=this._parse(e);return FR(e._query,t),new ps(e.firestore,e.converter,Ty(e._query,t))}_parse(e){const t=q_(e.firestore);return(function(l,c,f,m,g,_,E){let w;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new de(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){zb(E,_);const P=[];for(const F of E)P.push(Ub(m,l,F));w={arrayValue:{values:P}}}else w=Ub(m,l,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||zb(E,_),w=h4(f,c,E,_==="in"||_==="not-in");return tt.create(g,_,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Oy(n,e,t){const r=e,s=vm("where",n);return Em._create(s,r,t)}class $_ extends K_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $_(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Et.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,l){let c=s;const f=l.getFlattenedFilters();for(const m of f)FR(c,m),c=Ty(c,m)})(e._query,t),new ps(e.firestore,e.converter,Ty(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class X_ extends Q_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new X_(e,t)}_apply(e){const t=(function(s,l,c){if(s.startAt!==null)throw new de(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new de(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gc(l,c)})(e._query,this._field,this._direction);return new ps(e.firestore,e.converter,(function(s,l){const c=s.explicitOrderBy.concat([l]);return new Xl(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function g4(n,e="asc"){const t=e,r=vm("orderBy",n);return X_._create(r,t)}class W_ extends Q_{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new W_(e,t,r)}_apply(e){return new ps(e.firestore,e.converter,Pd(e._query,this._limit,this._limitType))}}function p4(n){return W_._create("limit",n,"F")}function Ub(n,e,t){if(typeof(t=rn(t))=="string"){if(t==="")throw new de(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yI(e)&&t.indexOf("/")!==-1)throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(lt.fromString(t));if(!ye.isDocumentKey(r))throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qc(n,new ye(r))}if(t instanceof jt)return qc(n,t._key);throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xd(t)}.`)}function zb(n,e){if(!Array.isArray(n)||n.length===0)throw new de(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FR(n,e){const t=(function(s,l){for(const c of s)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class jR{convertValue(e,t="none"){switch(ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ea(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return gs(e,((s,l)=>{r[s]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[Ll].arrayValue?.values?.map((r=>Pt(r.doubleValue)));return new yi(t)}convertGeoPoint(e){return new pi(Pt(e.latitude),Pt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=tm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Fc(e));default:return null}}convertTimestamp(e){const t=Ji(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=lt.fromString(e);Re(GI(r),9688,{name:e});const s=new ho(r.get(1),r.get(3)),l=new ye(r.popFirst(5));return s.isEqual(t)||Bn(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class y4 extends jR{constructor(e){super(),this.firestore=e}convertBytes(e){return new or(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,t)}}class Sl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class is extends Fd{constructor(e,t,r,s,l,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new fd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(vm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=is._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}is._jsonSchemaVersion="firestore/documentSnapshot/1.0",is._jsonSchema={type:$t("string",is._jsonSchemaVersion),bundleSource:$t("string","DocumentSnapshot"),bundleName:$t("string"),bundle:$t("string")};class fd extends is{data(e={}){return super.data(e)}}class xl{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Sl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new fd(this._firestore,this._userDataWriter,r.key,r,new Sl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((f=>{const m=new fd(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Sl(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new fd(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Sl(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,_=-1;return f.type!==0&&(g=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),_=c.indexOf(f.doc.key)),{type:_4(f.type),doc:m,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=s_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(n){n=Zi(n,jt);const e=Zi(n.firestore,Jl);return e4(gm(e),n._key).then((t=>E4(e,n,t)))}xl._jsonSchemaVersion="firestore/querySnapshot/1.0",xl._jsonSchema={type:$t("string",xl._jsonSchemaVersion),bundleSource:$t("string","QuerySnapshot"),bundleName:$t("string"),bundle:$t("string")};class Z_ extends jR{constructor(e){super(),this.firestore=e}convertBytes(e){return new or(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,t)}}function dd(n){n=Zi(n,ps);const e=Zi(n.firestore,Jl),t=gm(e),r=new Z_(e);return m4(n._query),t4(t,n._query).then((s=>new xl(e,r,n,s)))}function Xc(n,e,t){n=Zi(n,jt);const r=Zi(n.firestore,Jl),s=qR(n.converter,e,t);return v4(r,[LR(q_(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,dn.none())])}function v4(n,e){return(function(r,s){const l=new qr;return r.asyncQueue.enqueueAndForget((async()=>zk(await Zk(r),s,l))),l.promise})(gm(n),e)}function E4(n,e,t){const r=t.docs.get(e._key),s=new Z_(n);return new is(n,s,e._key,r,new Sl(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4={maxAttempts:5};function yc(n,e){if((n=rn(n)).firestore!==e)throw new de(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=q_(e)}get(e){const t=yc(e,this._firestore),r=new y4(this._firestore);return this._transaction.lookup([t._key]).then((s=>{if(!s||s.length!==1)return Te(24041);const l=s[0];if(l.isFoundDocument())return new Fd(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new Fd(this._firestore,r,t._key,null,t.converter);throw Te(18433,{doc:l})}))}set(e,t,r){const s=yc(e,this._firestore),l=qR(s.converter,t,r),c=LR(this._dataReader,"Transaction.set",s._key,l,s.converter!==null,r);return this._transaction.set(s._key,c),this}update(e,t,r,...s){const l=yc(e,this._firestore);let c;return c=typeof(t=rn(t))=="string"||t instanceof pm?c4(this._dataReader,"Transaction.update",l._key,t,r,s):u4(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,c),this}delete(e){const t=yc(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4 extends w4{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=yc(e,this._firestore),r=new Z_(this._firestore);return super.get(e).then((s=>new is(this._firestore,r,t._key,s._document,new Sl(!1,!1),t.converter)))}}function S4(n,e,t){n=Zi(n,Jl);const r={...T4,...t};return(function(l){if(l.maxAttempts<1)throw new de(J.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(l,c,f){const m=new qr;return l.asyncQueue.enqueueAndForget((async()=>{const g=await Jk(l);new $k(l.asyncQueue,g,f,c,m).ju()})),m.promise})(gm(n),(s=>e(new b4(n,s))),r)}function Bb(){return new H_("serverTimestamp")}(function(e,t=!0){(function(s){$l=s})(Kl),Nl(new so("firestore",((r,{instanceIdentifier:s,options:l})=>{const c=r.getProvider("app").getImmediate(),f=new Jl(new BP(r.getProvider("auth-internal")),new qP(c,r.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new de(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ho(g.options.projectId,_)})(c,s),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),es(vw,Ew,e),es(vw,Ew,"esm2020")})();var A4="firebase",I4="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */es(A4,I4,"app");const R4={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,measurementId:void 0},HR=GS(R4),Tm=kP(HR),mn=r4(HR);i4(mn).catch(n=>{n.code==="failed-precondition"?console.warn("Multiple tabs open, persistence can only be enabled in one tab at a time."):n.code==="unimplemented"&&console.warn("The current browser does not support all of the features required to enable persistence")});const D4={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},C4=(n,e,t)=>{let r;const s=D4[n];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Hp(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const x4={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},N4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},M4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},P4={date:Hp({formats:x4,defaultWidth:"full"}),time:Hp({formats:N4,defaultWidth:"full"}),dateTime:Hp({formats:M4,defaultWidth:"full"})},O4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},V4=(n,e,t,r)=>O4[n];function lc(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let s;if(r==="formatting"&&n.formattingValues){const c=n.defaultFormattingWidth||n.defaultWidth,f=t?.width?String(t.width):c;s=n.formattingValues[f]||n.formattingValues[c]}else{const c=n.defaultWidth,f=t?.width?String(t.width):n.defaultWidth;s=n.values[f]||n.values[c]}const l=n.argumentCallback?n.argumentCallback(e):e;return s[l]}}const k4={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},L4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},U4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},z4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},B4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},F4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},j4=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},q4={ordinalNumber:j4,era:lc({values:k4,defaultWidth:"wide"}),quarter:lc({values:L4,defaultWidth:"wide",argumentCallback:n=>n-1}),month:lc({values:U4,defaultWidth:"wide"}),day:lc({values:z4,defaultWidth:"wide"}),dayPeriod:lc({values:B4,defaultWidth:"wide",formattingValues:F4,defaultFormattingWidth:"wide"})};function uc(n){return(e,t={})=>{const r=t.width,s=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],l=e.match(s);if(!l)return null;const c=l[0],f=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],m=Array.isArray(f)?G4(f,E=>E.test(c)):H4(f,E=>E.test(c));let g;g=n.valueCallback?n.valueCallback(m):m,g=t.valueCallback?t.valueCallback(g):g;const _=e.slice(c.length);return{value:g,rest:_}}}function H4(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function G4(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function Y4(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const s=r[0],l=e.match(n.parsePattern);if(!l)return null;let c=n.valueCallback?n.valueCallback(l[0]):l[0];c=t.valueCallback?t.valueCallback(c):c;const f=e.slice(s.length);return{value:c,rest:f}}}const K4=/^(\d+)(th|st|nd|rd)?/i,Q4=/\d+/i,$4={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},X4={any:[/^b/i,/^(a|c)/i]},W4={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Z4={any:[/1/i,/2/i,/3/i,/4/i]},J4={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},eL={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},tL={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},nL={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},rL={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},iL={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},aL={ordinalNumber:Y4({matchPattern:K4,parsePattern:Q4,valueCallback:n=>parseInt(n,10)}),era:uc({matchPatterns:$4,defaultMatchWidth:"wide",parsePatterns:X4,defaultParseWidth:"any"}),quarter:uc({matchPatterns:W4,defaultMatchWidth:"wide",parsePatterns:Z4,defaultParseWidth:"any",valueCallback:n=>n+1}),month:uc({matchPatterns:J4,defaultMatchWidth:"wide",parsePatterns:eL,defaultParseWidth:"any"}),day:uc({matchPatterns:tL,defaultMatchWidth:"wide",parsePatterns:nL,defaultParseWidth:"any"}),dayPeriod:uc({matchPatterns:rL,defaultMatchWidth:"any",parsePatterns:iL,defaultParseWidth:"any"})},sL={code:"en-US",formatDistance:C4,formatLong:P4,formatRelative:V4,localize:q4,match:aL,options:{weekStartsOn:0,firstWeekContainsDate:1}};let oL={};function _h(){return oL}const GR=6048e5,lL=864e5,Fb=Symbol.for("constructDateFrom");function cs(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&Fb in n?n[Fb](e):n instanceof Date?new n.constructor(e):new Date(e)}function Gr(n,e){return cs(e||n,n)}function jb(n){const e=Gr(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function uL(n,...e){const t=cs.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function qb(n,e){const t=Gr(n,e?.in);return t.setHours(0,0,0,0),t}function cL(n,e,t){const[r,s]=uL(t?.in,n,e),l=qb(r),c=qb(s),f=+l-jb(l),m=+c-jb(c);return Math.round((f-m)/lL)}function hL(n,e){const t=Gr(n,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function fL(n,e){const t=Gr(n,e?.in);return cL(t,hL(t))+1}function Wc(n,e){const t=_h(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,s=Gr(n,e?.in),l=s.getDay(),c=(l<r?7:0)+l-r;return s.setDate(s.getDate()-c),s.setHours(0,0,0,0),s}function jd(n,e){return Wc(n,{...e,weekStartsOn:1})}function YR(n,e){const t=Gr(n,e?.in),r=t.getFullYear(),s=cs(t,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const l=jd(s),c=cs(t,0);c.setFullYear(r,0,4),c.setHours(0,0,0,0);const f=jd(c);return t.getTime()>=l.getTime()?r+1:t.getTime()>=f.getTime()?r:r-1}function dL(n,e){const t=YR(n,e),r=cs(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),jd(r)}function mL(n,e){const t=Gr(n,e?.in),r=+jd(t)-+dL(t);return Math.round(r/GR)+1}function KR(n,e){const t=Gr(n,e?.in),r=t.getFullYear(),s=_h(),l=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,c=cs(e?.in||n,0);c.setFullYear(r+1,0,l),c.setHours(0,0,0,0);const f=Wc(c,e),m=cs(e?.in||n,0);m.setFullYear(r,0,l),m.setHours(0,0,0,0);const g=Wc(m,e);return+t>=+f?r+1:+t>=+g?r:r-1}function gL(n,e){const t=_h(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,s=KR(n,e),l=cs(e?.in||n,0);return l.setFullYear(s,0,r),l.setHours(0,0,0,0),Wc(l,e)}function pL(n,e){const t=Gr(n,e?.in),r=+Wc(t,e)-+gL(t,e);return Math.round(r/GR)+1}function _t(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const Ba={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return _t(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):_t(t+1,2)},d(n,e){return _t(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return _t(n.getHours()%12||12,e.length)},H(n,e){return _t(n.getHours(),e.length)},m(n,e){return _t(n.getMinutes(),e.length)},s(n,e){return _t(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),s=Math.trunc(r*Math.pow(10,t-3));return _t(s,e.length)}},gl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Hb={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),s=r>0?r:1-r;return t.ordinalNumber(s,{unit:"year"})}return Ba.y(n,e)},Y:function(n,e,t,r){const s=KR(n,r),l=s>0?s:1-s;if(e==="YY"){const c=l%100;return _t(c,2)}return e==="Yo"?t.ordinalNumber(l,{unit:"year"}):_t(l,e.length)},R:function(n,e){const t=YR(n);return _t(t,e.length)},u:function(n,e){const t=n.getFullYear();return _t(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return _t(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return _t(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return Ba.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return _t(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const s=pL(n,r);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):_t(s,e.length)},I:function(n,e,t){const r=mL(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):_t(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Ba.d(n,e)},D:function(n,e,t){const r=fL(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):_t(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const s=n.getDay(),l=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(l);case"ee":return _t(l,2);case"eo":return t.ordinalNumber(l,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const s=n.getDay(),l=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(l);case"cc":return _t(l,e.length);case"co":return t.ordinalNumber(l,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return _t(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const s=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let s;switch(r===12?s=gl.noon:r===0?s=gl.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let s;switch(r>=17?s=gl.evening:r>=12?s=gl.afternoon:r>=4?s=gl.morning:s=gl.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return Ba.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Ba.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):_t(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):_t(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Ba.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Ba.s(n,e)},S:function(n,e){return Ba.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Yb(r);case"XXXX":case"XX":return Xs(r);case"XXXXX":case"XXX":default:return Xs(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return Yb(r);case"xxxx":case"xx":return Xs(r);case"xxxxx":case"xxx":default:return Xs(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Gb(r,":");case"OOOO":default:return"GMT"+Xs(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Gb(r,":");case"zzzz":default:return"GMT"+Xs(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return _t(r,e.length)},T:function(n,e,t){return _t(+n,e.length)}};function Gb(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=Math.trunc(r/60),l=r%60;return l===0?t+String(s):t+String(s)+e+_t(l,2)}function Yb(n,e){return n%60===0?(n>0?"-":"+")+_t(Math.abs(n)/60,2):Xs(n,e)}function Xs(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=_t(Math.trunc(r/60),2),l=_t(r%60,2);return t+s+e+l}const Kb=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},QR=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},yL=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],s=t[2];if(!s)return Kb(n,e);let l;switch(r){case"P":l=e.dateTime({width:"short"});break;case"PP":l=e.dateTime({width:"medium"});break;case"PPP":l=e.dateTime({width:"long"});break;case"PPPP":default:l=e.dateTime({width:"full"});break}return l.replace("{{date}}",Kb(r,e)).replace("{{time}}",QR(s,e))},_L={p:QR,P:yL},vL=/^D+$/,EL=/^Y+$/,TL=["D","DD","YY","YYYY"];function wL(n){return vL.test(n)}function bL(n){return EL.test(n)}function SL(n,e,t){const r=AL(n,e,t);if(console.warn(r),TL.includes(n))throw new RangeError(r)}function AL(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function IL(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function RL(n){return!(!IL(n)&&typeof n!="number"||isNaN(+Gr(n)))}const DL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,CL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xL=/^'([^]*?)'?$/,NL=/''/g,ML=/[a-zA-Z]/;function PL(n,e,t){const r=_h(),s=t?.locale??r.locale??sL,l=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,c=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,f=Gr(n,t?.in);if(!RL(f))throw new RangeError("Invalid time value");let m=e.match(CL).map(_=>{const E=_[0];if(E==="p"||E==="P"){const w=_L[E];return w(_,s.formatLong)}return _}).join("").match(DL).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const E=_[0];if(E==="'")return{isToken:!1,value:OL(_)};if(Hb[E])return{isToken:!0,value:_};if(E.match(ML))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:_}});s.localize.preprocessor&&(m=s.localize.preprocessor(f,m));const g={firstWeekContainsDate:l,weekStartsOn:c,locale:s};return m.map(_=>{if(!_.isToken)return _.value;const E=_.value;(!t?.useAdditionalWeekYearTokens&&bL(E)||!t?.useAdditionalDayOfYearTokens&&wL(E))&&SL(E,e,String(n));const w=Hb[E[0]];return w(f,E,s.localize,g)}).join("")}function OL(n){const e=n.match(xL);return e?e[1].replace(NL,"'"):n}function VL(){return Object.assign({},_h())}function Qb(n,e,t){const r=VL(),s=UL(n,t.timeZone,t.locale??r.locale);return"formatToParts"in s?kL(s,e):LL(s,e)}function kL(n,e){const t=n.formatToParts(e);for(let r=t.length-1;r>=0;--r)if(t[r].type==="timeZoneName")return t[r].value}function LL(n,e){const t=n.format(e).replace(/\u200E/g,""),r=/ [\w-+ ]+$/.exec(t);return r?r[0].substr(1):""}function UL(n,e,t){return new Intl.DateTimeFormat(t?[t.code,"en-US"]:void 0,{timeZone:e,timeZoneName:n})}function zL(n,e){const t=HL(e);return"formatToParts"in t?FL(t,n):jL(t,n)}const BL={year:0,month:1,day:2,hour:3,minute:4,second:5};function FL(n,e){try{const t=n.formatToParts(e),r=[];for(let s=0;s<t.length;s++){const l=BL[t[s].type];l!==void 0&&(r[l]=parseInt(t[s].value,10))}return r}catch(t){if(t instanceof RangeError)return[NaN];throw t}}function jL(n,e){const t=n.format(e),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(t);return[parseInt(r[3],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[4],10),parseInt(r[5],10),parseInt(r[6],10)]}const Gp={},$b=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),qL=$b==="06/25/2014, 00:00:00"||$b==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";function HL(n){return Gp[n]||(Gp[n]=qL?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:n,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),Gp[n]}function $R(n,e,t,r,s,l,c){const f=new Date(0);return f.setUTCFullYear(n,e,t),f.setUTCHours(r,s,l,c),f}const Xb=36e5,GL=6e4,Yp={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function J_(n,e,t){if(!n)return 0;let r=Yp.timezoneZ.exec(n);if(r)return 0;let s,l;if(r=Yp.timezoneHH.exec(n),r)return s=parseInt(r[1],10),Wb(s)?-(s*Xb):NaN;if(r=Yp.timezoneHHMM.exec(n),r){s=parseInt(r[2],10);const c=parseInt(r[3],10);return Wb(s,c)?(l=Math.abs(s)*Xb+c*GL,r[1]==="+"?-l:l):NaN}if(QL(n)){e=new Date(e||Date.now());const c=t?e:YL(e),f=Vy(c,n);return-(t?f:KL(e,f,n))}return NaN}function YL(n){return $R(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())}function Vy(n,e){const t=zL(n,e),r=$R(t[0],t[1]-1,t[2],t[3]%24,t[4],t[5],0).getTime();let s=n.getTime();const l=s%1e3;return s-=l>=0?l:1e3+l,r-s}function KL(n,e,t){let s=n.getTime()-e;const l=Vy(new Date(s),t);if(e===l)return e;s-=l-e;const c=Vy(new Date(s),t);return l===c?l:Math.max(l,c)}function Wb(n,e){return-23<=n&&n<=23&&(e==null||0<=e&&e<=59)}const Zb={};function QL(n){if(Zb[n])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:n}),Zb[n]=!0,!0}catch{return!1}}const $L=60*1e3,XL={X:function(n,e,t){const r=Kp(t.timeZone,n);if(r===0)return"Z";switch(e){case"X":return Jb(r);case"XXXX":case"XX":return wl(r);case"XXXXX":case"XXX":default:return wl(r,":")}},x:function(n,e,t){const r=Kp(t.timeZone,n);switch(e){case"x":return Jb(r);case"xxxx":case"xx":return wl(r);case"xxxxx":case"xxx":default:return wl(r,":")}},O:function(n,e,t){const r=Kp(t.timeZone,n);switch(e){case"O":case"OO":case"OOO":return"GMT"+WL(r,":");case"OOOO":default:return"GMT"+wl(r,":")}},z:function(n,e,t){switch(e){case"z":case"zz":case"zzz":return Qb("short",n,t);case"zzzz":default:return Qb("long",n,t)}}};function Kp(n,e){const t=n?J_(n,e,!0)/$L:e?.getTimezoneOffset()??0;if(Number.isNaN(t))throw new RangeError("Invalid time zone specified: "+n);return t}function qd(n,e){const t=n<0?"-":"";let r=Math.abs(n).toString();for(;r.length<e;)r="0"+r;return t+r}function wl(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=qd(Math.floor(r/60),2),l=qd(Math.floor(r%60),2);return t+s+e+l}function Jb(n,e){return n%60===0?(n>0?"-":"+")+qd(Math.abs(n)/60,2):wl(n,e)}function WL(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=Math.floor(r/60),l=r%60;return l===0?t+String(s):t+String(s)+e+qd(l,2)}function eS(n){const e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),+n-+e}const ZL=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,Qp=36e5,tS=6e4,JL=2,Fn={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:ZL};function XR(n,e={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(n===null)return new Date(NaN);const t=e.additionalDigits==null?JL:Number(e.additionalDigits);if(t!==2&&t!==1&&t!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]")return new Date(n.getTime());if(typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]")return new Date(n);if(Object.prototype.toString.call(n)!=="[object String]")return new Date(NaN);const r=eU(n),{year:s,restDateString:l}=tU(r.date,t),c=nU(l,s);if(c===null||isNaN(c.getTime()))return new Date(NaN);if(c){const f=c.getTime();let m=0,g;if(r.time&&(m=rU(r.time),m===null||isNaN(m)))return new Date(NaN);if(r.timeZone||e.timeZone){if(g=J_(r.timeZone||e.timeZone,new Date(f+m)),isNaN(g))return new Date(NaN)}else g=eS(new Date(f+m)),g=eS(new Date(f+m+g));return new Date(f+m+g)}else return new Date(NaN)}function eU(n){const e={};let t=Fn.dateTimePattern.exec(n),r;if(t?(e.date=t[1],r=t[3]):(t=Fn.datePattern.exec(n),t?(e.date=t[1],r=t[2]):(e.date=null,r=n)),r){const s=Fn.timeZone.exec(r);s?(e.time=r.replace(s[1],""),e.timeZone=s[1].trim()):e.time=r}return e}function tU(n,e){if(n){const t=Fn.YYY[e],r=Fn.YYYYY[e];let s=Fn.YYYY.exec(n)||r.exec(n);if(s){const l=s[1];return{year:parseInt(l,10),restDateString:n.slice(l.length)}}if(s=Fn.YY.exec(n)||t.exec(n),s){const l=s[1];return{year:parseInt(l,10)*100,restDateString:n.slice(l.length)}}}return{year:null}}function nU(n,e){if(e===null)return null;let t,r,s;if(!n||!n.length)return t=new Date(0),t.setUTCFullYear(e),t;let l=Fn.MM.exec(n);if(l)return t=new Date(0),r=parseInt(l[1],10)-1,rS(e,r)?(t.setUTCFullYear(e,r),t):new Date(NaN);if(l=Fn.DDD.exec(n),l){t=new Date(0);const c=parseInt(l[1],10);return sU(e,c)?(t.setUTCFullYear(e,0,c),t):new Date(NaN)}if(l=Fn.MMDD.exec(n),l){t=new Date(0),r=parseInt(l[1],10)-1;const c=parseInt(l[2],10);return rS(e,r,c)?(t.setUTCFullYear(e,r,c),t):new Date(NaN)}if(l=Fn.Www.exec(n),l)return s=parseInt(l[1],10)-1,iS(s)?nS(e,s):new Date(NaN);if(l=Fn.WwwD.exec(n),l){s=parseInt(l[1],10)-1;const c=parseInt(l[2],10)-1;return iS(s,c)?nS(e,s,c):new Date(NaN)}return null}function rU(n){let e,t,r=Fn.HH.exec(n);if(r)return e=parseFloat(r[1].replace(",",".")),$p(e)?e%24*Qp:NaN;if(r=Fn.HHMM.exec(n),r)return e=parseInt(r[1],10),t=parseFloat(r[2].replace(",",".")),$p(e,t)?e%24*Qp+t*tS:NaN;if(r=Fn.HHMMSS.exec(n),r){e=parseInt(r[1],10),t=parseInt(r[2],10);const s=parseFloat(r[3].replace(",","."));return $p(e,t,s)?e%24*Qp+t*tS+s*1e3:NaN}return null}function nS(n,e,t){e=e||0,t=t||0;const r=new Date(0);r.setUTCFullYear(n,0,4);const s=r.getUTCDay()||7,l=e*7+t+1-s;return r.setUTCDate(r.getUTCDate()+l),r}const iU=[31,28,31,30,31,30,31,31,30,31,30,31],aU=[31,29,31,30,31,30,31,31,30,31,30,31];function WR(n){return n%400===0||n%4===0&&n%100!==0}function rS(n,e,t){if(e<0||e>11)return!1;if(t!=null){if(t<1)return!1;const r=WR(n);if(r&&t>aU[e]||!r&&t>iU[e])return!1}return!0}function sU(n,e){if(e<1)return!1;const t=WR(n);return!(t&&e>366||!t&&e>365)}function iS(n,e){return!(n<0||n>52||e!=null&&(e<0||e>6))}function $p(n,e,t){return!(n<0||n>=25||e!=null&&(e<0||e>=60)||t!=null&&(t<0||t>=60))}const oU=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function lU(n,e,t={}){e=String(e);const r=e.match(oU);if(r){const s=XR(t.originalDate||n,t);e=r.reduce(function(l,c){if(c[0]==="'")return l;const f=l.indexOf(c),m=l[f-1]==="'",g=l.replace(c,"'"+XL[c[0]](s,c,t)+"'");return m?g.substring(0,f-1)+g.substring(f+1):g},e)}return PL(n,e,t)}function uU(n,e,t){n=XR(n,t);const r=J_(e,n,!0),s=new Date(n.getTime()-r),l=new Date(0);return l.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),l.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),l}function cU(n,e,t,r){return r={...r,timeZone:e,originalDate:n},lU(uU(n,e,{timeZone:r.timeZone}),t,r)}function ky(n,e){return cU(n,e,"yyyy-MM-dd")}function ev(){return Intl.DateTimeFormat().resolvedOptions().timeZone}async function hU(n,e,t){try{console.log("Starting signup process for:",n,t);const s=(await EM(Tm,n,e)).user;console.log("User created:",s.uid),await new Promise(m=>setTimeout(m,1e3)),console.log("Reserving username:",t);const l=xr(mn,"usernames",t);if((await Wa(l)).exists())throw console.log("Username already taken"),new Error("Username already taken");await Xc(l,{uid:s.uid}),console.log("Username reserved successfully"),console.log("Creating profile for user:",s.uid);const f=xr(mn,"profiles",s.uid);await Xc(f,{username:t,currentTimezone:ev(),createdAt:new Date,updatedAt:new Date}),console.log("Profile created successfully")}catch(r){throw console.error("Signup error:",r),r}}async function fU(n,e){await TM(Tm,n,e)}async function dU(){await AM(Tm)}function ZR(n){return SM(Tm,n)}function mU({onSuccess:n}){const[e,t]=Q.useState(!1),[r,s]=Q.useState(""),[l,c]=Q.useState(""),[f,m]=Q.useState(""),[g,_]=Q.useState(""),[E,w]=Q.useState(!1),I=async P=>{P.preventDefault(),_(""),w(!0);try{e?await hU(r,l,f):await fU(r,l),n()}catch(F){_(F instanceof Error?F.message:"An error occurred")}finally{w(!1)}};return pe.jsxs("div",{className:"max-w-md mx-auto bg-white p-6 rounded shadow",children:[pe.jsx("h2",{className:"text-2xl mb-4",children:e?"Sign Up":"Sign In"}),pe.jsxs("form",{onSubmit:I,children:[pe.jsxs("div",{className:"mb-4",children:[pe.jsx("label",{className:"block text-gray-700",children:"Email"}),pe.jsx("input",{type:"email",value:r,onChange:P=>s(P.target.value),className:"w-full p-2 border rounded",required:!0})]}),pe.jsxs("div",{className:"mb-4",children:[pe.jsx("label",{className:"block text-gray-700",children:"Password"}),pe.jsx("input",{type:"password",value:l,onChange:P=>c(P.target.value),className:"w-full p-2 border rounded",required:!0})]}),e&&pe.jsxs("div",{className:"mb-4",children:[pe.jsx("label",{className:"block text-gray-700",children:"Username"}),pe.jsx("input",{type:"text",value:f,onChange:P=>m(P.target.value),className:"w-full p-2 border rounded",required:!0})]}),g&&pe.jsx("p",{className:"text-red-500 mb-4",children:g}),pe.jsx("button",{type:"submit",disabled:E,className:"w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700",children:E?"Loading...":e?"Sign Up":"Sign In"})]}),pe.jsx("button",{onClick:()=>t(!e),className:"mt-4 text-blue-600 hover:underline",children:e?"Already have an account? Sign In":"Need an account? Sign Up"})]})}function gU(){const n=eh(),e=()=>{n("/app")};return pe.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:pe.jsx(mU,{onSuccess:e})})}async function pU(n,e,t,r){try{const s=xr(Dc(mn,"challenges")),l={ownerUid:n.uid,name:e,isGroup:t,visibility:r,members:[n.uid],startDate:new Date,streakPolicy:{window:"calendar",resetHour:0},createdAt:new Date,updatedAt:new Date};console.log("Creating challenge:",l),await Xc(s,l),console.log("Challenge created with ID:",s.id);const c=xr(mn,"challengeParticipants",`${s.id}_${n.uid}`),f={uid:n.uid,challengeId:s.id,currentStreak:0,longestStreak:0,lastCheckinDate:null,createdAt:new Date,updatedAt:new Date};return console.log("Creating participant:",f),await Xc(c,f),console.log("Participant created"),s.id}catch(s){throw console.error("Error in createChallenge:",s),s}}async function yU(n){try{console.log("Getting challenges for user:",n.uid);const e=hd(Dc(mn,"challenges"),Oy("members","array-contains",n.uid));console.log("Executing query...");const t=await dd(e);console.log("Query completed, found",t.docs.length,"challenges");const r=t.docs.map(s=>{const l=s.data();return console.log("Challenge doc:",s.id,l),{id:s.id,...l}});return console.log("Challenges:",r),r}catch(e){throw console.error("Error in getUserChallenges:",e),e}}async function _U(n,e){const t=ev(),r=new Date,s=ky(r,t),l=`${n}_${e.uid}_${s}`,c=xr(mn,"checkins",l);if(console.log("Checking in for challenge:",n,"user:",e.uid),(await Wa(c)).exists()){console.log("Already checked in today");return}console.log("Starting transaction for check-in"),await S4(mn,async m=>{const g=xr(mn,"challengeParticipants",`${n}_${e.uid}`);console.log("Getting participant document:",g.path);const _=await m.get(g);let E;_.exists()?(E=_.data(),console.log("Participant data:",E)):(console.log("Participant document not found, creating it"),E={uid:e.uid,challengeId:n,currentStreak:0,longestStreak:0,lastCheckinDate:null,createdAt:new Date,updatedAt:new Date},m.set(g,E));const w=E.lastCheckinDate;let I=1;if(w){const P=ky(new Date(r.getTime()-864e5),t);w===P&&(I=E.currentStreak+1)}console.log("Creating check-in document:",l),m.set(c,{uid:e.uid,challengeId:n,date:s,at:Bb()}),console.log("Updating participant document with streak:",I),m.update(g,{currentStreak:I,longestStreak:Math.max(E.longestStreak||0,I),lastCheckinDate:s,updatedAt:Bb()})}),console.log("Check-in transaction completed successfully")}async function md(n,e){const t=ev(),r=ky(new Date,t),s=`${n}_${e.uid}_${r}`;return(await Wa(xr(mn,"checkins",s))).exists()}function vU({id:n,name:e,currentStreak:t,hasCheckedToday:r}){return pe.jsxs("div",{className:"bg-white p-4 rounded shadow mb-4",children:[pe.jsx("h3",{className:"text-lg font-bold",children:e}),pe.jsxs("p",{children:["Current Streak: ",t]}),pe.jsxs("p",{children:["Checked Today: ",r?"Yes":"No"]}),pe.jsx($a,{to:`/challenge/${n}`,className:"text-blue-600 hover:underline",children:"Open"})]})}function wm(){const n=eh(),e=async()=>{await dU(),n("/")};return pe.jsx("nav",{className:"bg-blue-600 text-white p-4",children:pe.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[pe.jsx($a,{to:"/app",className:"text-xl font-bold",children:"Streaks"}),pe.jsxs("div",{className:"space-x-4",children:[pe.jsx($a,{to:"/app",className:"hover:underline",children:"Dashboard"}),pe.jsx($a,{to:"/leaderboard",className:"hover:underline",children:"Leaderboard"}),pe.jsx($a,{to:"/profile",className:"hover:underline",children:"Profile"}),pe.jsx("button",{onClick:e,className:"hover:underline",children:"Sign Out"})]})]})})}function EU(){const[n,e]=Q.useState(null),[t,r]=Q.useState([]),[s,l]=Q.useState(!0),c=eh(),f=Q.useCallback(async g=>{try{const _=await yU(g),E=await Promise.all(_.map(async w=>{const I=await md(w.id,g);let P=0;try{const F=xr(mn,"challengeParticipants",`${w.id}_${g.uid}`),L=await Wa(F);L.exists()&&(P=L.data().currentStreak||0)}catch(F){console.error("Error fetching participant data:",F)}return{...w,hasCheckedToday:I,currentStreak:P}}));r(E),console.log("Loaded challenges:",E)}catch(_){console.error("Error loading challenges:",_),setTimeout(()=>{g&&f(g)},1e3)}finally{l(!1)}},[]);Q.useEffect(()=>ZR(_=>{if(!_){c("/");return}e(_),f(_)}),[c,f]);const m=async()=>{const g=prompt("Challenge name:");if(g&&n)try{await pU(n,g,!1,"public"),f(n)}catch{alert("Error creating challenge")}};return s?pe.jsx("div",{children:"Loading..."}):pe.jsxs("div",{children:[pe.jsx(wm,{}),pe.jsxs("div",{className:"container mx-auto p-4",children:[pe.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Your Challenges"}),pe.jsxs("p",{className:"mb-4",children:["Found ",t.length," challenges"]}),pe.jsxs("div",{className:"mb-4 space-x-2",children:[pe.jsx("button",{onClick:m,className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Create Challenge"}),pe.jsx("button",{onClick:()=>n&&f(n),className:"bg-gray-600 text-white px-4 py-2 rounded",children:"Refresh Challenges"})]}),t.length===0?pe.jsx("p",{children:"No challenges found. Try creating one!"}):t.map(g=>pe.jsx(vU,{id:g.id,name:g.name,currentStreak:g.currentStreak,hasCheckedToday:g.hasCheckedToday},g.id))]})]})}function TU({challengeId:n,user:e,onCheckIn:t,disabled:r}){const[s,l]=Q.useState(!1),c=async()=>{l(!0);try{await _U(n,e),t()}catch{alert("Error checking in")}finally{l(!1)}};return pe.jsx("button",{onClick:c,disabled:r||s,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 disabled:bg-gray-400",children:s?"Checking In...":"Check In"})}function wU({username:n,currentStreak:e,hasCheckedToday:t}){return pe.jsxs("div",{className:"flex justify-between items-center p-2 border-b",children:[pe.jsx("span",{children:n}),pe.jsxs("div",{className:"flex items-center space-x-2",children:[pe.jsxs("span",{children:["Streak: ",e]}),pe.jsx("div",{className:`w-4 h-4 rounded-full ${t?"bg-green-500":"bg-red-500"}`})]})]})}function bU(){const{id:n}=FC(),[e,t]=Q.useState(null),[r,s]=Q.useState(null),[l,c]=Q.useState([]),[f,m]=Q.useState(!1),[g,_]=Q.useState(!0),E=eh(),w=Q.useCallback(async P=>{try{console.log("Loading challenge:",P);const F=await Wa(xr(mn,"challenges",P));if(!F.exists()){alert("Challenge not found"),E("/app");return}const L={id:F.id,...F.data()};console.log("Challenge loaded:",L),s(L);const ne=L.members;console.log("Member UIDs:",ne);const te=await Promise.all(ne.map(async ee=>{console.log("Loading data for member:",ee);const _e=await Wa(xr(mn,"profiles",ee));console.log("Profile data for",ee,":",_e.exists()?_e.data():"Profile not found");const le=await Wa(xr(mn,"challengeParticipants",`${P}_${ee}`)),z=await md(P,{uid:ee});return{username:_e.exists()&&_e.data()?.username?_e.data().username:`User ${ee.slice(0,8)}`,currentStreak:le.exists()&&le.data()?.currentStreak||0,hasCheckedToday:z}}));if(console.log("Member profiles loaded:",te),c(te),e){const ee=await md(P,e);m(ee)}_(!1)}catch(F){console.error("Error loading challenge:",F),_(!1)}},[E,e]);Q.useEffect(()=>ZR(F=>{if(!F){E("/");return}t(F),n&&w(n)}),[n,E,w]),Q.useEffect(()=>{e&&(async()=>{const F=xr(mn,"profiles",e.uid);(await Wa(F)).exists()||(console.log("Creating missing profile for user:",e.uid),await Xc(F,{username:e.email?.split("@")[0]||`user${e.uid.slice(0,8)}`,currentTimezone:Intl.DateTimeFormat().resolvedOptions().timeZone,createdAt:new Date,updatedAt:new Date}))})()},[e]);const I=async()=>{if(n&&e){await w(n);const P=await md(n,e);m(P)}};return g?pe.jsx("div",{children:"Loading..."}):!r||!e?pe.jsx("div",{children:"Not found"}):pe.jsxs("div",{children:[pe.jsx(wm,{}),pe.jsxs("div",{className:"container mx-auto p-4",children:[pe.jsx("h1",{className:"text-2xl font-bold mb-4",children:r.name}),pe.jsx(TU,{challengeId:r.id,user:e,onCheckIn:I,disabled:f}),pe.jsx("h2",{className:"text-xl mt-8 mb-4",children:"Members"}),l.map((P,F)=>pe.jsx(wU,{username:P.username,currentStreak:P.currentStreak,hasCheckedToday:P.hasCheckedToday},F))]})]})}async function SU(){const n=hd(Dc(mn,"challengeParticipants"),g4("currentStreak","desc"),p4(100)),e=await dd(n),t=[];for(const r of e.docs){const s=r.data(),l=await dd(hd(Dc(mn,"challenges"),Oy("__name__","==",s.challengeId)));if(l.empty)continue;const c=l.docs[0].data();if(c.visibility!=="public")continue;const f=await dd(hd(Dc(mn,"profiles"),Oy("__name__","==",s.uid)));if(f.empty)continue;const m=f.docs[0].data();t.push({username:m.username,challengeName:c.name,currentStreak:s.currentStreak})}return t}function AU(){const[n,e]=Q.useState([]),[t,r]=Q.useState(!0);return Q.useEffect(()=>{SU().then(e).finally(()=>r(!1))},[]),t?pe.jsx("div",{children:"Loading..."}):pe.jsxs("div",{children:[pe.jsx(wm,{}),pe.jsxs("div",{className:"container mx-auto p-4",children:[pe.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Public Leaderboard"}),n.map((s,l)=>pe.jsxs("div",{className:"flex justify-between p-2 border-b",children:[pe.jsxs("span",{children:[s.username," • ",s.challengeName]}),pe.jsx("span",{children:s.currentStreak})]},l))]})]})}function IU(){return pe.jsxs("div",{children:[pe.jsx(wm,{}),pe.jsxs("div",{className:"container mx-auto p-4",children:[pe.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Profile"}),pe.jsx("p",{children:"Profile page placeholder."})]})]})}const RU=Cx([{path:"/",element:pe.jsx(qx,{})},{path:"/auth",element:pe.jsx(gU,{})},{path:"/app",element:pe.jsx(EU,{})},{path:"/challenge/:id",element:pe.jsx(bU,{})},{path:"/leaderboard",element:pe.jsx(AU,{})},{path:"/profile",element:pe.jsx(IU,{})}]);function DU(){return pe.jsx(jx,{router:RU})}ND.createRoot(document.getElementById("root")).render(pe.jsx(Q.StrictMode,{children:pe.jsx(DU,{})}));
